(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e){e.exports=[{firstName:"Matthew",lastName:"A",rating:800},{firstName:"Mark",lastName:"B",rating:850},{firstName:"Luke",lastName:"C",rating:900},{firstName:"John",lastName:"D",rating:950},{firstName:"Simon",lastName:"E",rating:1e3},{firstName:"Andrew",lastName:"F",rating:1050},{firstName:"James",lastName:"G",rating:1100},{firstName:"Philip",lastName:"H",rating:1150},{firstName:"Bartholomew",lastName:"I",rating:1200},{firstName:"Thomas",lastName:"J",rating:1250},{firstName:"Catherine",lastName:"K",rating:1300},{firstName:"Clare",lastName:"L",rating:1350},{firstName:"Judas",lastName:"M",rating:1400},{firstName:"Matthias",lastName:"N",rating:1450},{firstName:"Paul",lastName:"O",rating:1500},{firstName:"Mary",lastName:"P",rating:1600},{firstName:"Theresa",lastName:"Q",rating:1650},{firstName:"Megan",lastName:"R",rating:1700},{firstName:"Elizabeth",lastName:"S",rating:1750}]},16:function(e,t,n){e.exports=n(30)},21:function(e,t,n){},22:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(9),u=n.n(l),i=(n(21),n(1));n(22);function o(e){var t=e.children;return a.a.createElement("nav",{className:"main-nav"},t)}function c(e){var t=e.name,n=e.action,r="main-nav__item";return e.isOpen&&(r+=" is-open"),a.a.createElement("span",{className:r,role:"menuitem",tabIndex:"0",onClick:n,onKeyPress:n},t)}var s=n(2);function m(e){var t=e.roster[0].getEloRank(),n=e.roster[1].getEloRank(),r=[t.getExpected(e.origRating[0],e.origRating[1]),n.getExpected(e.origRating[1],e.origRating[0])];return e.newRating=[t.updateRating(r[0],e.result[0],e.origRating[0]),n.updateRating(r[1],e.result[1],e.origRating[1])],e.newRating=e.newRating.map(function(e){return e<100?100:e}),e.roster.forEach(function(t,n){t.rating=e.newRating[n]}),e}var f=Object.freeze(function(e,t){var n,r,a=e.ref_tourney;if(t.roster){var l=Object(i.a)(t.roster,2);r=l[0],n=l[1]}else r=t[0],n=t[1];"number"===typeof n&&(n=a.players.getPlayerById(n)),"number"===typeof r&&(r=a.players.getPlayerById(r));var u={id:t.id||0,ref_round:e,ref_tourney:a,warnings:t.warnings||"",roster:[r,n],result:t.result||[0,0],origRating:t.origRating||[r.rating,n.rating],newRating:t.newRating||[r.rating,n.rating],ideal:t.ideal||0,reverse:function(){return u.roster.reverse(),u.result.reverse(),u.origRating.reverse(),u.newRating.reverse(),u},blackWon:function(){return u.result=[0,1],m(u),u},whiteWon:function(){return u.result=[1,0],m(u),u},draw:function(){return u.result=[.5,.5],m(u),u},setResult:function(e){return e!==u.result&&(u.result=e,e[0]+e[1]===0?u.resetResult():m(u)),u},resetResult:function(){return u.result=[0,0],u.newRating=Object(s.a)(u.origRating),u.roster[0].rating=u.newRating[0],u.roster[1].rating=u.newRating[1],u},isComplete:function(){return u.result[0]+u.result[1]!==0},isBye:function(){return u.roster.map(function(e){return e.dummy}).includes(!0)},getColorInfo:function(e){return{player:u.roster[e],result:u.result[e],origRating:u.origRating[e],newRating:u.newRating[e]}},getPlayerColor:function(e){return u.roster.indexOf(e)},getPlayerInfo:function(e){return u.getColorInfo(u.getPlayerColor(e))},getWhiteInfo:function(){return u.getColorInfo(0)},getBlackInfo:function(){return u.getColorInfo(1)}};return u.roster[0].dummy?u.result=[0,a.byeValue]:u.roster[1].dummy&&(u.result=[a.byeValue,0]),u.roster.forEach(function(e){e.dummy||Object.isFrozen(e)||(e.matchCount+=1)}),u}),d=n(13),y=n.n(d);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={id:e.id||0,firstName:e.firstName||"",lastName:e.lastName||"",rating:e.rating||0,dummy:e.dummy||!1,matchCount:e.matchCount||0,getEloRank:function(){var e=800/(t.matchCount||1);return new y.a(e)},hasHadBye:function(e){return e.getPlayersByOpponent(t).includes(g)},toJSON:function(e){return e&&t.isReference?t.id:t}};return t}var g=Object.freeze(p({id:-1,firstName:"Bye",dummy:!0,rating:0}));function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={roster:[],lastId:e.lastId||-1,ref_tourney:e.tourney||null,inactive:[],getActive:function(){return n.roster.filter(function(e){return!n.inactive.includes(e)})},importPlayerById:function(e,t){var r=e.getPlayerById(t);return n.roster.push(r),n},importPlayerIdsList:function(e){return e.map(function(e){return n.importPlayer(e)}),n},importPlayerList:function(e){return n.roster=e,n},deactivatePlayer:function(e){return n.inactive.push(e),n},activatePlayer:function(e){return n.inactive.splice(n.inactive.indexOf(e),1),n},removePlayer:function(e){return n.canRemovePlayer(e)?null:(delete n.roster[n.roster.indexOf(e)],n)},removePlayerById:function(e){return n.removePlayer(n.getPlayerById(e)),n},getPlayerById:function(e){return-1===e?g:n.roster.filter(function(t){return t.id===e})[0]},canRemovePlayer:function(e){return n.ref_tourney.getMatchesByPlayer(e).length>0},canRemovePlayerById:function(e){return n.canRemovePlayer(n.getPlayerById(e))},setByIdList:function(e,t){var r=n.roster.map(function(e){return e.id}),a=t.filter(function(e){return!r.includes(e)}),l=r.filter(function(e){return!t.includes(e)});a.forEach(function(t){return n.importPlayerById(e,t)}),l.forEach(function(e){return n.removePlayerById(e)})},addPlayer:function(e){e.id=n.lastId+1,n.lastId=e.id;var t=p(e);return n.roster.push(t),t},addPlayers:function(e){return e.map(function(e){return n.addPlayer(e)})},loadPlayerData:function(e){n.roster=e.map(function(e){return p(e)})},delPlayer:function(e){var t=n.roster.map(function(e){return e.id}).indexOf(Number(e));return-1===t?null:n.roster.splice(t,1)}};return e.roster&&e.roster.forEach(function(e){"number"===typeof e?n.importPlayerById(t,e):n.addPlayer(e)}),n}var h=n(3),v=n(8),b=n(14),O=n.n(b);function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.getMatchesByPlayer(t,n).map(function(e){return e.result[e.roster.indexOf(t)]})}function B(e,t){var n=0,r=N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return r.length>0&&(n=r.reduce(function(e,t){return e+t})),n}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=0,a=[];(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.getMatchesByPlayer(t,n).filter(function(e){return!e.isBye()}).map(function(e){return e.result[e.roster.indexOf(t)]})})(e,t,n).forEach(function(e){r+=e,a.push(r)});var l=0;return 0!==a.length&&(l=a.reduce(function(e,t){return e+t})),l}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=0;return e.getMatchesByPlayer(t,n).filter(function(e){return!e.isBye()}).forEach(function(e){e.roster[0]===t?r+=-1:e.roster[1]===t&&(r+=1)}),r}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.getPlayersByOpponent(t,n).filter(function(e){return!e.dummy}).map(function(t){return B(e,t,n)});a.sort(),r||(a.pop(),a.shift());var l=0;return a.length>0&&(l=a.reduce(function(e,t){return e+t})),l}function C(e,t){return k(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,!0)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.getPlayersByOpponent(t,n).filter(function(e){return!e.dummy}).map(function(t){return R(e,t,n)}),a=0;return 0!==r.length&&(a=r.reduce(function(e,t){return e+t})),a}var S=Object.freeze({calcStandings:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.tieBreak.filter(function(e){return e.active}),r=e.players.roster.map(function(r){var a={player:r,score:B(e,r,t)};return n.forEach(function(n){a[n.name]={modifiedMedian:k,playerColorBalance:j,playerOppScoreCum:P,playerScoreCum:R,solkoff:C}[n.funcName](e,r,t)}),a}),a=Object(v.firstBy)(function(e){return e.score},-1);n.forEach(function(e){a=a.thenBy(function(t){return t[e.funcName]},-1)}),r.sort(a);var l=[],u=0;return r.forEach(function(e,t,n){0!==t&&(function(e,t){var n=Object.getOwnPropertyNames(e),r=!0;return n.forEach(function(n){"player"!==n&&e[n]!==t[n]&&(r=!1)}),r}(e,n[t-1])||(u+=1)),l[u]||(l[u]=[]),l[u].push(e)}),l},modifiedMedian:k,playerColorBalance:j,playerOppScoreCum:P,playerScore:B,playerScoreCum:R,playerScoreList:N,solkoff:C}),w=20,L=16,_=2,I=1,M=w+L+_+I;var x=Object.freeze(function(e){var t,n,r,a,l=e.ref_tourney,u=function(t){if(!e.ref_prevRound)return null;var n=0;return 0===e.ref_prevRound.playerColor(t)&&(n=1),n},i=e.roster.map(function(t,n){return{player:t,id:n,score:S.playerScore(l,t,e.id),dueColor:u(t),colorBalance:S.playerColorBalance(l,t),opponentHistory:l.getPlayersByOpponent(t),upperHalf:!1}}),o=Array.from(new Set(i.map(function(e){return e.score})));if(o.sort(),i.sort(Object(v.firstBy)(function(e){return e.score},-1).thenBy(function(e){return e.player.rating},-1)),i.length%2!==0){var c=l.byeQueue.filter(function(e){return!e.hasHadBye(l)})[0],s=i.filter(function(e){return e.player===c})[0];s||(s=Object(h.last)(i.filter(function(e){return!e.player.hasHadBye(l)}))),s||(s=Object(h.last)(i)),t=f(e,[s.player,g]),i=i.filter(function(e){return e!==s})}return o.forEach(function(e){var t=i.filter(function(t){return t.score===e});t.sort(function(e){return e.player.rating}).reverse(),t.length>1&&Object(h.chunk)(t,t.length/2)[0].forEach(function(e){e.upperHalf=!0})}),n=i.reduce(function(e,t,n,r){var a=r.filter(function(e){return e!==t}).map(function(e){var n,r=0;return t.opponentHistory.includes(e.player)||(r+=w),n=Math.abs(o.indexOf(t.score)-o.indexOf(e.score)),n=(o.length-n)/o.length,r+=L*n,t.score===e.score&&t.upperHalf!==e.upperHalf&&(r+=_),null===t.dueColor?r+=I:t.dueColor!==e.dueColor&&(r+=I),[t.id,e.id,Math.ceil(r)]});return e=e.concat(a)},[]),(a=O()(n).reduce(function(e,t,r){if(-1!==t){var a=i.filter(function(e){return e.id===t})[0],l=i.filter(function(e){return e.id===r})[0],u=n.filter(function(e){return e[0]===t&&e[1]===r})[0][2],o=e.map(function(e){return e[0]});o.includes(a)||o.includes(l)||e.push([a,l,u])}return e},[])).sort(Object(v.firstBy)(function(e){return e[0].score+e[1].score},-1).thenBy(function(e){return e[0].rating+e[1].rating},-1)),r=a.map(function(t){var n=t[0],r=t[1],a=t[2],l=f(e,[n.player,r.player]);return l.ideal=a/M,n.colorBalance>r.colorBalance&&l.reverse(),n.opponentHistory.includes(r.player)&&(l.warnings+=" "+n.player.firstName+" and "+r.player.firstName+" have played previously."),[n,r].forEach(function(e){Math.abs(e.colorBalance)>2&&(l.warnings+=" "+e.player.firstName+"'s color balance is off")}),l}),t&&r.push(t),r});var T=Object.freeze(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={id:void 0!==t.id?t.id:e.roundList.length,ref_tourney:e,roster:t.roster||e.players.getActive(),ref_prevRound:t.ref_prevRound||Object(h.last)(e.roundList),matches:t.matches||null,isComplete:function(){return!n.matches.map(function(e){return e.isComplete()}).includes(!1)},getMatchByPlayer:function(e){var t=null;return n.matches.forEach(function(n){n.roster.includes(e)&&(t=n)}),t},playerColor:function(e){var t=-1,r=n.getMatchByPlayer(e);return r&&(t=r.getPlayerColor(e)),t},addPlayer:function(e){return n.players.push(e),n},hasBye:function(){return n.roster.includes(g)},removeMatch:function(e){return"number"===typeof e&&(e=n.matches[e]),e.resetResult(),e.roster.forEach(function(e){e.matchCount-=1}),n.matches=n.matches.filter(function(t){return t!==e}),n},toJSON:function(e){return"prevRound"===e?n.id:n}};return n.roster=n.roster.map(function(t){return"number"===typeof t?e.players.getPlayerById(t):t}),n.matches?n.matches=n.matches.map(function(e){return f(n,e)}):n.matches=x(n),n.matches.forEach(function(e,t){e.id=t}),n}),D=n(4);var H=Object.freeze(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={id:0,name:"string"===typeof e?e:e.name,roundList:[],byeValue:1,byeQueue:[],players:e.players||null,tieBreak:Object(h.cloneDeep)(D.tieBreak),isNewRoundReady:function(){return n.roundList.length>0?Object(h.last)(n.roundList).isComplete():n.players.roster.length>0},getMatchesByPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=n.roundList.length);var r=[];return Object(h.times)(t+1,function(t){void 0!==n.roundList[t]&&n.roundList[t].matches.forEach(function(t){-1!==t.roster.indexOf(e)&&r.push(t)})}),r},getPlayersByOpponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[];return n.getMatchesByPlayer(e,t).forEach(function(t){r=r.concat(t.roster.filter(function(t){return t!==e}))}),r},getNumOfRounds:function(){var e=Math.ceil(Math.log2(n.players.getActive().length));return e===-1/0&&(e=0),e},newRound:function(){if(!n.isNewRoundReady())return!1;var e=T(n);return n.roundList.push(e),e},removeRound:function(e){if("number"!==typeof e&&"string"!==typeof e||(e=n.roundList[e]),n.canRemoveRound(e))throw new Error("You can only remove the last round");return e.matches.forEach(function(t){e.removeMatch(t)}),n.roundList=n.roundList.filter(function(t){return t!==e}),n},canRemoveRound:function(e){return e!==Object(h.last)(n.roundList)},addPlayerToByeQueue:function(e){return n.byeQueue.push(e),n},removePlayerFromByeQueue:function(e){return n.byeQueue=n.byeQueue.filter(function(t){return t!==e}),n},setByeQueue:function(e){return n.byQueue=e,n}};return"object"===typeof e&&Object.assign(n,e),n.players?n.players=E(n.players,t):n.players=E({},t),n.players.ref_tourney=n,n.roundList.length>=0&&(n.roundList=n.roundList.reduce(function(e,t){return t.ref_prevRound=Object(h.last)(e)||null,e.push(T(n,t)),e},[])),n});D.moveTieBreak=function(e,t){if(t<0||t>D.tieBreak.length-1)return null;if(!D.tieBreak[e])return null;var n=D.tieBreak.splice(e,1)[0];return D.tieBreak.splice(t,0,n),D.tieBreak},D.noCircRefs=function(e,t){return e.startsWith("ref_")?void 0:t},D.JSONretriever=function(e,t){return e.startsWith("ref_")?void 0:"roster"===e?t.map(function(e){return e.id}):t};var J=Object.freeze(D);function F(e){var t=e.playerManager,n=Object(r.useState)(t.roster),l=Object(i.a)(n,2),u=l[0],o=l[1],c={firstName:"",lastName:"",rating:1200},m=Object(r.useState)(c),f=Object(i.a)(m,2),d=f[0],y=f[1],p=function(e){var t={};t[e.target.name]=e.target.value,y(Object.assign({},d,t))},g=function(e){t.delPlayer(e.target.dataset.id),o(Object(s.a)(t.roster))},E="";return u.length>0&&(E=a.a.createElement("table",null,a.a.createElement("caption",null,"Demo Roster"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"First name"),a.a.createElement("th",null,"Last name"),a.a.createElement("th",null,"Rating"),a.a.createElement("th",null),a.a.createElement("th",null))),a.a.createElement("tbody",null,u.map(function(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",{className:"table__player"},e.firstName),a.a.createElement("td",{className:"table__player"},e.lastName),a.a.createElement("td",{className:"table__number"},e.rating),a.a.createElement("td",null,a.a.createElement("button",{"data-id":e.id,onClick:g},"x")),a.a.createElement("td",null))})))),a.a.createElement("div",{className:"roster"},E,a.a.createElement("p",null,"Add your own players:"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.addPlayer(d),y(c),o(Object(s.a)(t.roster))}},a.a.createElement("p",null,a.a.createElement("label",null,"First name\xa0",a.a.createElement("input",{type:"text",name:"firstName",onChange:p,value:d.firstName,required:!0}))),a.a.createElement("p",null,a.a.createElement("label",null,"Last name\xa0",a.a.createElement("input",{type:"text",name:"lastName",onChange:p,value:d.lastName,required:!0}))),a.a.createElement("p",null,a.a.createElement("label",null,"Rating\xa0",a.a.createElement("input",{type:"number",name:"rating",onChange:p,value:d.rating,required:!0}))),a.a.createElement("p",null,a.a.createElement("input",{type:"submit",value:"Add"}))))}var Q=n(5);n(28);function W(e){var t=e.tourney,n=e.playerManager,l=e.playerList,u=e.setPlayerList,o=Object(r.useState)(0===l.length),c=Object(i.a)(o,2),s=c[0],m=c[1];return s?a.a.createElement(A,{key:t.id,tourney:t,playerManager:n,setIsSelecting:m,setPlayerList:u}):a.a.createElement(z,{key:t.id,tourney:t,setIsSelecting:m})}function A(e){var t=e.playerManager,n=e.tourney,l=e.setIsSelecting,u=e.setPlayerList,o=Object(r.useState)(n.players.roster.map(function(e){return e.id})),c=Object(i.a)(o,2),m=c[0],f=c[1];Object(r.useEffect)(function(){n.players.setByIdList(t,m),u(Object(s.a)(n.players.roster))},[m]);var d=function(e){var t=Number(e.target.dataset.id);m.includes(t)?f(m.filter(function(e){return e!==t})):f([t].concat(m))},y=t.roster;return a.a.createElement(r.Fragment,null,a.a.createElement("p",null,"Select your players."),a.a.createElement("ul",null,y.map(function(e){return a.a.createElement("li",{key:e.id},a.a.createElement("input",{type:"checkbox","data-id":e.id,onChange:d,checked:m.includes(e.id),disabled:n.players.canRemovePlayerById(e.id)}),e.firstName," ",e.lastName)})),a.a.createElement("button",{onClick:function(){return f(y.map(function(e){return e.id}))}},"Select all"),a.a.createElement("button",{onClick:function(){return f([])}},"Select none"),a.a.createElement("button",{onClick:function(){return l(!1)}},"Done"))}function z(e){var t=e.tourney,n=e.setIsSelecting,l=Object(r.useState)(t.byeQueue),u=Object(i.a)(l,2),o=u[0],c=u[1];Object(r.useEffect)(function(){t.setByeQueue(o.map(function(e){return t.players.getPlayerById(e)}))},[o]);var m="";o.length>0&&(m=a.a.createElement(r.Fragment,null,a.a.createElement("h2",null,"Bye signups:"),a.a.createElement("ol",null,o.map(function(e){return a.a.createElement("li",{key:e.id,className:e.hasHadBye(t)?"inactive":"active"},e.firstName,a.a.createElement("button",{onClick:function(){return function(e){c(o.filter(function(t){return t!==e}))}(e)},disabled:e.hasHadBye(t)},"x"))}))));var f=a.a.createElement("table",null,a.a.createElement("caption",null,"Roster"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"First name"),a.a.createElement("th",null,"Rating"),a.a.createElement("th",null,"Rounds played"),a.a.createElement("th",null))),a.a.createElement("tbody",null,t.players.roster.map(function(e){return a.a.createElement("tr",{key:e.id,className:t.players.inactive.includes(e)?"inactive":"active"},a.a.createElement("td",{className:"table__player"},e.firstName),a.a.createElement("td",{className:"table__number"},e.rating),a.a.createElement("td",{className:"table__number"},t.getMatchesByPlayer(e).length),a.a.createElement("td",null,t.byeQueue.includes(e)||e.hasHadBye(t)?a.a.createElement("button",{disabled:!0},"Bye"):a.a.createElement("button",{onClick:function(){return function(e){c([].concat(Object(s.a)(o),[e]))}(e)}},"Bye")))})));return a.a.createElement(r.Fragment,null,f,m,a.a.createElement("button",{onClick:function(){return n(!0)}},"Select players"),a.a.createElement("button",null,"New round"),a.a.createElement(q,{key:t.id,tourney:t}))}function q(e){var t=e.tourney,n=Object(r.useState)(t.tieBreak),l=Object(i.a)(n,2),u=l[0],o=l[1],c=function(e){var t=e.target.dataset.pos;u[t].active=e.target.checked,o(Object(s.a)(u))},m=function(e,t){var n=e+t,r=Object(s.a)(u),a=r.splice(e,1)[0];r.splice(n,0,a),o(r)};return Object(r.useEffect)(function(){t.tieBreak=u}),a.a.createElement("section",null,a.a.createElement("h3",null,"Options"),a.a.createElement("h3",null,"Tie break priority"),a.a.createElement("ol",null,u.map(function(e,t){return a.a.createElement("li",{key:e.funcName},a.a.createElement("input",{type:"checkbox","data-pos":t,checked:e.active,onChange:c}),e.name,a.a.createElement("button",{onClick:function(){return m(t,-1)},disabled:0===t},a.a.createElement("span",{role:"img","aria-label":"Move up"},"\u2191")),a.a.createElement("button",{onClick:function(){return m(t,1)},disabled:t===u.length-1},a.a.createElement("span",{role:"img","aria-label":"Move down"},"\u2193")))})))}var K=n(10),V=n.n(K);n(29);function G(e){var t=e.tourney,n=e.round,r=(e.roundList,e.setRoundList);return n?a.a.createElement($,{round:n,setRoundList:r}):a.a.createElement(Y,{tourney:t,setRoundList:r})}function Y(e){var t=e.tourney,n=e.setRoundList;return t.isNewRoundReady()?a.a.createElement("button",{onClick:function(){t.newRound(),n(Object(s.a)(t.roundList))}},"Make new round"):a.a.createElement("p",null,"Complete the last round first.")}function $(e){var t=e.round,n=e.setRoundList,l=t.ref_tourney,u=Object(r.useState)(t.matches),o=Object(i.a)(u,2),c=o[0];o[1];return a.a.createElement(r.Fragment,null,a.a.createElement("table",{className:"table__roster"},a.a.createElement("caption",null,"Round ",t.id+1," results"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"#"),a.a.createElement("th",{colSpan:"2"},"White"),a.a.createElement("th",null,"Draw"),a.a.createElement("th",{colSpan:"2"},"Black"),a.a.createElement("th",null))),a.a.createElement("tbody",null,c.map(function(e){return a.a.createElement(U,{key:e.id,match:e})}))),a.a.createElement("h2",null,"Actions"),a.a.createElement("button",{onClick:function(){l.removeRound(t),n(Object(s.a)(l.roundList))},disabled:l.canRemoveRound(t)},"Delete round"))}function U(e){var t=e.match,n=t.ref_round,l=t.ref_tourney,u=t.getWhiteInfo(),o=t.getBlackInfo();[u,o].forEach(function(e){var t=S.playerColorBalance(l,e.player,n.id),r="Even";t<0?r="White +"+Math.abs(t):t>0&&(r="Black +"+t),e.colorBalance=r,e.score=S.playerScore(l,e.player,n.id),e.oppList=l.getPlayersByOpponent(e.player,n.id)});var c=Object(r.useState)(t.result),s=Object(i.a)(c,2),m=s[0],f=s[1],d=Object(r.useState)(!1),y=Object(i.a)(d,2),p=y[0],g=y[1],E=Object(r.useState)([u.newRating-u.origRating,o.newRating-o.origRating]),h=Object(i.a)(E,2),v=h[0],b=h[1];return Object(r.useEffect)(function(){t.setResult(m),b([t.getWhiteInfo().newRating-t.getWhiteInfo().origRating,t.getBlackInfo().newRating-t.getBlackInfo().origRating])},[m]),a.a.createElement(r.Fragment,null,a.a.createElement("tr",{className:t.isBye()?"inactive":""},a.a.createElement("td",{className:"table__number"},t.id+1),a.a.createElement("td",{className:"table__player"},u.player.firstName," ",u.player.lastName),a.a.createElement("td",{className:"table__input"},a.a.createElement("input",{type:"radio",checked:1===m[0],disabled:t.isBye(),onChange:function(){return f([1,0])}})),a.a.createElement("td",{className:"table__input"},a.a.createElement("input",{type:"radio",checked:.5===m[0],disabled:t.isBye(),onChange:function(){return f([.5,.5])}})),a.a.createElement("td",{className:"table__input"},a.a.createElement("input",{type:"radio",checked:1===m[1],disabled:t.isBye(),onChange:function(){return f([0,1])}})),a.a.createElement("td",{className:"table__player"},o.player.firstName," ",o.player.lastName),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return g(!p)}},"?"),t.warnings)),p&&a.a.createElement(r.Fragment,null,a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",{colSpan:"2"},a.a.createElement(X,{player:u,ratingDiff:v[0]})),a.a.createElement("td",null),a.a.createElement("td",{colSpan:"2"},a.a.createElement(X,{player:o,ratingDiff:v[1]})),a.a.createElement("td",null)),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:"7",style:{textAlign:"center"}},"Match ideal: ",V()(t.ideal).format("00%")))))}function X(e){var t=e.player,n=e.ratingDiff;return a.a.createElement("dl",{className:"player-card"},a.a.createElement("dt",null,"Score"),a.a.createElement("dd",null,t.score),a.a.createElement("dt",null,"Rating"),a.a.createElement("dd",null,t.origRating,"\xa0(",V()(n).format("+0"),")"),a.a.createElement("dt",null,"Color balance"),a.a.createElement("dd",null,t.colorBalance),a.a.createElement("dt",null,"Opponent history"),a.a.createElement("dd",null,a.a.createElement("ol",null,t.oppList.map(function(e,t){return a.a.createElement("li",{key:t},e.firstName)}))))}function Z(e){var t=e.playerManager,n=e.tourneyList,l=e.setTourneyList,u=e.openTourney,o=e.setOpenTourney,c={name:"The most epic tournament"},m=Object(r.useState)(c),f=Object(i.a)(m,2),d=f[0],y=f[1],p=function(e){var t=e.target.dataset.id;o(n[t])},g="";return g=u?a.a.createElement(ee,{key:u.id,tourney:u,playerManager:t,setOpenTourney:o}):a.a.createElement(r.Fragment,null,n.length>0?a.a.createElement("ol",null,n.map(function(e,t){return a.a.createElement("li",{key:t,"data-id":t,tabIndex:"0",role:"menuitem",onClick:p,onKeyPress:p},e.name)})):a.a.createElement("p",null,"No tournaments added yet."),a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=H(e.target.name.value);t.id=n.length,l([].concat(Object(s.a)(n),[t])),y(c),o(t)}},a.a.createElement("input",{type:"text",name:"name",value:d.name,onChange:function(e){var t={};t[e.target.name]=e.target.value,y(Object.assign({},d,t))},required:!0}),a.a.createElement("input",{type:"submit",value:"New Tournament"}))),a.a.createElement("main",null,g)}function ee(e){var t=e.tourney,n=e.playerManager,l=e.setOpenTourney,u=Object(r.useState)(t.players.roster),o=Object(i.a)(u,2),c=o[0],m=o[1],f=Object(r.useState)(Object(s.a)(Array(t.getNumOfRounds()).keys())),d=Object(i.a)(f,2),y=d[0],p=d[1];Object(r.useEffect)(function(){p(Object(s.a)(Array(t.getNumOfRounds()).keys()))},[c]);var g=Object(r.useState)(t.roundList),E=Object(i.a)(g,2),h=E[0],v=E[1];return a.a.createElement(Q.d,null,a.a.createElement("button",{onClick:function(){return l(null)}},"< back"),a.a.createElement("h2",null,t.name),a.a.createElement(Q.b,null,a.a.createElement(Q.a,null,"Setup"),a.a.createElement(Q.a,{disabled:0===c.length},"Standings"),y.map(function(e){return a.a.createElement(Q.a,{key:e,disabled:(t=e,!(h[t]||t===h.length))},"Round ",e+1);var t})),a.a.createElement(Q.c,null,a.a.createElement(W,{key:t.id,setPlayerList:m,playerList:c,tourney:t,playerManager:n})),a.a.createElement(Q.c,null,a.a.createElement(te,{tourney:t})),y.map(function(e){return a.a.createElement(Q.c,{key:e},a.a.createElement(G,{key:e,tourney:t,round:h[e],roundList:h,setRoundList:v}))}))}function te(e){var t=e.tourney;return a.a.createElement("table",null,a.a.createElement("caption",null,"Current Standings"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null),a.a.createElement("th",null,"First name"),a.a.createElement("th",null,"Score"),t.tieBreak.filter(function(e){return e.active}).map(function(e,t){return a.a.createElement("th",{key:t},e.name)}))),S.calcStandings(t).map(function(e,n){return a.a.createElement("tbody",{key:n},e.map(function(e,r){return a.a.createElement("tr",{key:r},a.a.createElement("td",null,n+1),a.a.createElement("td",null,e.player.firstName),a.a.createElement("td",{className:"table__number"},e.score),t.tieBreak.filter(function(e){return e.active}).map(function(t,n){return a.a.createElement("td",{className:"table__number",key:n},e[t.name])}))}))}))}function ne(e){var t=e.playerManager,n=e.tourneyList,l=e.setTourneyList,u=Object(r.useState)(JSON.stringify(t.roster,J.JSONretriever,2)),o=Object(i.a)(u,2),c=o[0],s=o[1],m=Object(r.useState)(JSON.stringify(n,J.JSONretriever,2)),f=Object(i.a)(m,2),d=f[0],y=f[1];return a.a.createElement("section",null,a.a.createElement("h2",null,"Export tournament data"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=JSON.parse(e.target.tourneyData.value);l(n.map(function(e){return H(e,t)}))}},a.a.createElement("textarea",{className:"json",rows:"25",cols:"50",value:d,onChange:function(e){return y(e.target.value)},name:"tourneyData"}),a.a.createElement("input",{type:"submit",value:"load"})),a.a.createElement("h2",null,"Export player data"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=JSON.parse(e.target.playerdata.value);t.loadPlayerData(n)}},a.a.createElement("textarea",{className:"json",rows:"25",cols:"50",value:c,name:"playerdata",onChange:function(e){s(e.target.value)}}),a.a.createElement("input",{type:"submit",value:"Load"})))}var re={roster:n(15).slice(0,16)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],l=t[1],u=Object(r.useState)(null),s=Object(i.a)(u,2),m=s[0],f=s[1],d=Object(r.useState)(E(re)),y=Object(i.a)(d,2),p=y[0],g=(y[1],Object(r.useState)(0)),h=Object(i.a)(g,2),v=h[0],b=h[1],O=function(e){return b(e)},N=[a.a.createElement(F,{playerManager:p}),a.a.createElement(Z,{playerManager:p,tourneyList:n,setTourneyList:l,openTourney:m,setOpenTourney:f}),a.a.createElement(ne,{playerManager:p,tourneyList:n,setTourneyList:l})];return a.a.createElement("main",null,a.a.createElement(o,null,a.a.createElement(c,{name:"Players",action:function(){return O(0)},isOpen:0===v}),a.a.createElement(c,{name:"Tournaments",action:function(){return O(1)},isOpen:1===v}),a.a.createElement(c,{name:"Options",action:function(){return O(2)},isOpen:2===v})),N[v])},null),document.getElementById("root")),u.a.render(a.a.createElement(function(){return a.a.createElement("p",null,a.a.createElement("span",{role:"img","aria-label":"waving hand"},"\ud83d\udc4b"),"\xa0 This is an unstable demo build! Want to help make it better? Head to the\xa0",a.a.createElement("span",{role:"img","aria-label":"finger pointing right"},"\ud83d\udc49"),"\xa0",a.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"Git repository"),".")},null),document.getElementById("caution")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},4:function(e){e.exports={tieBreak:[{name:"Modified median",funcName:"modifiedMedian",active:!0},{name:"Solkoff",funcName:"solkoff",active:!0},{name:"Cumulative score",funcName:"playerScoreCum",active:!0},{name:"Cumulative of opposition",funcName:"playerOppScoreCum",active:!0},{name:"Most black",funcName:"playerColorBalance",active:!1}]}}},[[16,1,2]]]);
//# sourceMappingURL=main.fbad4136.chunk.js.map