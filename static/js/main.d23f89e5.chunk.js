(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e){e.exports=[{name:"Wayne Manor Open",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,7,8],roundList:[[{id:"6-1",players:[6,1],result:[0,1],origRating:[1238,2108],newRating:[1236,2109]},{id:"7-2",players:[7,2],result:[0,1],origRating:[1049,2260],newRating:[1049,2260]},{id:"4-3",players:[4,3],result:[1,0],origRating:[1527,1755],newRating:[1685,1545]},{id:"5-0",players:[5,0],result:[0,1],origRating:[1284,1881],newRating:[1278,1887]},{id:"8--1",players:[8,-1],result:[1,0],origRating:[831,0],newRating:[831,0]}],[{id:"1-4",players:[1,4],result:[1,0],origRating:[2109,1685],newRating:[2122,1672]},{id:"0-8",players:[0,8],result:[1,0],origRating:[1887,831],newRating:[1887,830]},{id:"2-5",players:[2,5],result:[0,1],origRating:[2260,1278],newRating:[2101,1437]},{id:"3-6",players:[3,6],result:[1,0],origRating:[1545,1236],newRating:[1574,1207]},{id:"7--1",players:[7,-1],result:[1,0],origRating:[1049,0],newRating:[1049,0]}],[{id:"2-0",players:[2,0],result:[0,1],origRating:[2101,1887],newRating:[1998,1990]},{id:"8-1",players:[8,1],result:[1,0],origRating:[830,2122],newRating:[990,2008]},{id:"5-3",players:[5,3],result:[1,0],origRating:[1437,1574],newRating:[1529,1464]},{id:"4-7",players:[4,7],result:[0,1],origRating:[1672,1049],newRating:[1542,1244]},{id:"6--1",players:[6,-1],result:[1,0],origRating:[1207,0],newRating:[1207,0]}],[{id:"0-4",players:[0,4],result:[1,0],origRating:[1990,1542],newRating:[1998,1534]},{id:"1-7",players:[1,7],result:[1,0],origRating:[2008,1244],newRating:[2009,1242]},{id:"8-5",players:[8,5],result:[0,1],origRating:[990,1529],newRating:[983,1534]},{id:"6-2",players:[6,2],result:[0,1],origRating:[1207,1998],newRating:[1205,1999]},{id:"3--1",players:[3,-1],result:[1,0],origRating:[1464,0],newRating:[1464,0]}]]},{name:"The Battle for Gotham City",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,7],roundList:[[{id:"15-0",players:[15,0],result:[0,1],origRating:[950,1998],newRating:[948,1998]},{id:"16-2",players:[16,2],result:[0,1],origRating:[900,1999],newRating:[899,1999]},{id:"17-1",players:[17,1],result:[1,0],origRating:[850,2009],newRating:[1649,1909]},{id:"13-5",players:[13,5],result:[.5,.5],origRating:[1050,1534],newRating:[1404,1495]},{id:"12-3",players:[12,3],result:[1,0],origRating:[1100,1464],newRating:[1812,1345]},{id:"14-4",players:[14,4],result:[0,1],origRating:[1e3,1534],newRating:[965,1538]},{id:"10-7",players:[10,7],result:[1,0],origRating:[1200,1242],newRating:[1648,1167]},{id:"11-9",players:[11,9],result:[0,1],origRating:[1150,1250],newRating:[862,1538]},{id:"8-6",players:[8,6],result:[1,0],origRating:[983,1205],newRating:[1087,1101]}]]}]},19:function(e){e.exports={byeValue:1}},22:function(e,t,n){e.exports=n(52)},27:function(e,t,n){},28:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),i=n.n(l),u=(n(27),n(2)),c=(n(28),n(3)),o=(n(33),n(8)),s=n(15),m=n(9),d=n.n(m),f=1,p=0;function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||0,type:e.type||"person",firstName:e.firstName||"",lastName:e.lastName||"",rating:e.rating||0,matchCount:e.matchCount||0}}var E=Object.freeze(y),g=y();function b(e,t){if(-1===e)return g;var n=t.filter(function(t){return t.id===e})[0];return n||(n=y({id:e,firstName:"Anonymous",type:"missing"})),n}function h(e,t){return t.filter(function(t){return t.includes(e)}).reduce(function(e,t){return t.concat(e)},[]).filter(function(t){return t!==e})}function v(e,t){var n=t.map(function(e){return e.id});return e.filter(function(e){return n.includes(e[0])&&n.includes(e[1])})}function N(e){return 800/(e||1)}function L(e,t,n){var a=new d.a(N(t[p])),r=new d.a(N(t[f])),l=[a.getExpected(e[p],e[f]),r.getExpected(e[f],e[p])];return[a.updateRating(l[p],n[p],e[p]),r.updateRating(l[f],n[f],e[f])].map(function(e){return e<100?100:e})}g.id=-1,g.firstName="Bye",g.lastName="Player",g.type="dummy",Object.freeze(g),Object.freeze(b),Object.freeze(h),Object.freeze(v),Object.freeze(N),Object.freeze(L);var O=n(1),k=n(21);n(20);function j(e){var t=e.children,n=e.action;return r.a.createElement("nav",null,r.a.createElement("button",{onClick:n},t))}function R(e){var t=e.action;return r.a.createElement(j,{action:t},"< Back")}function w(e){var t=e.action;return r.a.createElement(j,{action:t},"Open >")}function C(e){var t=e.children,n=e.style;return r.a.createElement("div",{style:Object(k.a)({},n)},t)}function B(e){var t=e.children;return r.a.createElement("div",{style:{display:"flex"}},r.a.Children.map(t,function(e){return e}))}var _=Object.freeze(function(e){return{name:e.name||"",tieBreaks:e.tieBreaks||[0,1,2,3],byeQueue:e.byeQueue||[],players:e.players||[],roundList:e.roundList||[]}}),S=n(4);function x(e){return e.players.includes(g.id)}function z(e,t){var n=null,a=t.filter(function(t){return t.players.includes(e)})[0];return a&&(n=a.players.indexOf(e)),n}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(null===n?t:t.slice(0,n+1)).reduce(function(e,t){return e.concat(t)},[]).filter(function(t){return t.players.includes(e)})}function D(e,t){return P(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat(t.players)},[]).includes(g.id)}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return P(e,t,n).reduce(function(e,t){return e.concat(t.players)},[]).filter(function(t){return t!==e})}function A(e,t){var n=0,a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return P(e,t,n).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return a.length>0&&(n=a.reduce(function(e,t){return e+t})),n}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=0,r=[];(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return P(e,t,n).filter(function(e){return!x(e)}).map(function(t){return t.result[t.players.indexOf(e)]})})(e,t,n).forEach(function(e){a+=e,r.push(a)});var l=0;return 0!==r.length&&(l=r.reduce(function(e,t){return e+t})),l}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=0;return P(e,t,n).filter(function(e){return!x(e)}).forEach(function(t){t.players[0]===e?a+=-1:t.players[1]===e&&(a+=1)}),a}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=T(e,t,n).filter(function(e){return e!==g.id}).map(function(e){return A(e,t,n)});r.sort(),a||(r.pop(),r.shift());var l=0;return r.length>0&&(l=r.reduce(function(e,t){return e+t})),l}Object.freeze(z),Object.freeze(D),Object.freeze(T),Object.freeze(A),Object.freeze(I);var H=[{name:"Modified median",func:Q},{name:"Solkoff",func:function(e,t){return Q(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,!0)}},{name:"Cumulative score",func:M},{name:"Cumulative of opposition",func:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=T(e,t,n).filter(function(e){return e!==g.id}).map(function(e){return M(e,t,n)}),r=0;return 0!==a.length&&(r=a.reduce(function(e,t){return e+t})),r}},{name:"Most black",func:I}];function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.map(function(e){return H[e]}),r=function(e){var t=e.reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t.players)},[]);return Array.from(new Set(t))}(t).map(function(e){return{id:e,score:A(e,t,n),tieBreaks:a.map(function(a){return a.func(e,t,n)})}}),l=Object(S.firstBy)(function(e){return e.score},-1);a.forEach(function(e,t){l=l.thenBy(function(e){return e.tieBreaks[t]},-1)}),r.sort(l);var i=[],u=0;return r.forEach(function(e,t,n){0!==t&&(function(e,t){var n=!0;return e.score!==t.score&&(n=!1),Object.keys(e.tieBreaks).forEach(function(a){e.tieBreaks[a]!==t.tieBreaks[a]&&(n=!1)}),n}(e,n[t-1])||(u+=1));i[u]||(i[u]=[]),i[u].push(e)}),[i,a.map(function(e){return e.name})]}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{data:function(t){return b(e,t)},score:function(){return A(e,t,n)},opponents:function(a){return T(e,t,n).map(function(e){return b(e,a)})},colorBalance:function(){return I(e,t,n)},avoidList:function(t,n){return h(e,t).map(function(e){return b(e,n)})}}}function V(e){var t=Math.ceil(Math.log2(e));return Number.isFinite(t)||(t=0),t}function W(e,t){return e.filter(function(e){return e.id===t})[0]}function G(e,t){return e.indexOf(W(e,t))}Object.freeze(H),Object.freeze(F),Object.freeze(J),Object.freeze(V),Object.freeze(W),Object.freeze(G);var q=n(16),K=n.n(q),U=n(17),Y=n.n(U),$=n(5),X=n.n($),Z=n(18),ee=n.n(Z);function te(e,t,n,a,r){return{rating:b(e,t).rating,id:e,score:A(e,a,r),dueColor:function(e){if(!a[r-1])return null;var t=0;return 0===z(e,a[r-1])&&(t=1),t}(e),colorBalance:I(e,a,r),opponentHistory:T(e,a,null),upperHalf:!1,avoidList:h(e,n)}}Object.freeze(te);var ne=20,ae=16,re=2,le=1;function ie(e,t,n){var a,r=0,l=e.opponentHistory.includes(t.id),i=e.avoidList.includes(t.id);return l||i||(r+=ne),a=Math.abs(n.indexOf(e.score)-n.indexOf(t.score)),a=(n.length-a)/n.length,r+=ae*a,e.score===t.score&&e.upperHalf!==t.upperHalf&&(r+=re),null===e.dueColor?r+=le:e.dueColor!==t.dueColor&&(r+=le),Math.ceil(r)}Object.freeze(ie);var ue=Object.freeze(function(e,t,n,a,r){var l,i,u,c,o,s=e.map(function(e){return te(e,a,r,n,t)});if((o=Array.from(new Set(s.map(function(e){return e.score})))).sort(),s.sort(Object(S.firstBy)(function(e){return e.score},-1).thenBy(function(e){return e.rating},-1)),s.length%2!==0){var m=X()(s.filter(function(e){return!D(e.id,n,t)}));m||(m=X()(s)),l=[m.id,g.id],s=s.filter(function(e){return e!==m})}return o.forEach(function(e){var t=s.filter(function(t){return t.score===e});t.sort(function(e){return e.rating}).reverse(),t.length>1&&Y()(t,t.length/2)[0].forEach(function(e){e.upperHalf=!0})}),i=s.reduce(function(e,t,n,a){var r=a.filter(function(e){return e!==t}).map(function(e){return[t.id,e.id,ie(t,e,o)]});return e.concat(r)},[]),(c=ee()(i).reduce(function(e,t,n){if(-1!==t){var a=s.filter(function(e){return e.id===t})[0],r=s.filter(function(e){return e.id===n})[0],l=i.filter(function(e){return e[0]===t&&e[1]===n})[0][2],u=e.map(function(e){return e[0]});u.includes(a)||u.includes(r)||e.push([a,r,l])}return e},[])).sort(Object(S.firstBy)(function(e){return e[0].score+e[1].score},-1).thenBy(function(e){return e[0].rating+e[1].rating},-1)),u=c.map(function(e){var t=e[0],n=e[1],a=[t.id,n.id];return t.colorBalance<n.colorBalance&&a.reverse(),a}),l&&u.push(l),u});var ce=Object.freeze(function(e){return{id:e.id,players:e.players,result:e.result||[0,0],origRating:e.origRating,newRating:e.newRating}}),oe=n(6),se=n.n(oe);function me(e){var t=e.matchList,n=e.roundId,l=e.playerList,i=e.avoidList,c=e.tourneyList,o=e.tourneyId,s=e.setTourneyList,m=e.setPlayerList,d=e.options,y=c[o],E=Object(a.useState)(null),h=Object(u.a)(E,2),v=h[0],N=h[1],k=Object(a.useState)([]),j=Object(u.a)(k,2),_=j[0],S=j[1];function x(e){var t=Number(e.target.value);e.target.checked?S(function(e){return e.includes(t)||e.push(t),e.slice(-2)}):S(_.filter(function(e){return e!==t}))}var z=y.roundList,P=t.reduce(function(e,t){return e.concat(t.players)},[]),T=y.players.filter(function(e){return!P.includes(e)});function A(e,t){var a=W(y.roundList[n],e),r=y.roundList[n].indexOf(a),i=b(a.players[p],l),c=b(a.players[f],l),d=L(a.origRating,[i.matchCount,c.matchCount],t),E=Object(u.a)(d,2),g=E[0],h=E[1],v=0===a.result.reduce(function(e,t){return e+t});s(function(e){var a=Object(O.a)(e);return a[o].roundList[n][r].result=t,a[o].roundList[n][r].newRating=[g,h],a}),i.rating=g,c.rating=h,v&&(i.matchCount+=1,c.matchCount+=1),m(Object(O.a)(l))}function M(e,t){var a=c[o].roundList[n],r=G(a,e);c[o].roundList[n]=se()(a,r,r+t),s(Object(O.a)(c))}return r.a.createElement(B,null,r.a.createElement(C,null,r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{onClick:function(){return function(e){var t=W(y.roundList[n],e);0!==t.result.reduce(function(e,t){return e+t})&&t.players.forEach(function(e,n){b(e,l).matchCount-=1,b(e,l).rating=t.origRating[n]}),c[o].roundList[n]=c[o].roundList[n].filter(function(e){return e!==t}),N(null),s(Object(O.a)(c))}(v)},disabled:null===v},"Unmatch"),r.a.createElement("button",{onClick:function(){return function(e){var t=W(y.roundList[n],e);t.players.reverse(),t.origRating.reverse(),t.newRating.reverse(),s(Object(O.a)(c))}(v)},disabled:null===v},"Swap colors"),r.a.createElement("button",{onClick:function(){return M(v,-1)},disabled:null===v},"Move up"),r.a.createElement("button",{onClick:function(){return M(v,1)},disabled:null===v},"Move down")),r.a.createElement("table",{className:"table__roster"},r.a.createElement("caption",null,"Round ",n+1," results"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"row__id"},"#"),r.a.createElement("th",{className:"row__player"},"White"),r.a.createElement("th",{className:"row__result"},"Result"),r.a.createElement("th",{className:"row__player"},"Black"),r.a.createElement("th",{className:"row__controls"}))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__number row__id"},t+1),r.a.createElement("td",{className:"table__player row__player"},b(e.players[0],l).firstName,"\xa0",b(e.players[0],l).lastName),r.a.createElement("td",{className:"data__input row__result"},r.a.createElement("input",{type:"radio",checked:e.result[0]>e.result[1],onChange:function(){return A(e.id,[1,0])},disabled:e.players.includes(g.id)}),r.a.createElement("input",{type:"radio",checked:e.result.every(function(e){return.5===e}),onChange:function(){return A(e.id,[.5,.5])},disabled:e.players.includes(g.id)}),r.a.createElement("input",{type:"radio",checked:e.result[1]>e.result[0],onChange:function(){return A(e.id,[0,1])},disabled:e.players.includes(g.id)})),r.a.createElement("td",{className:"table__player row__player"},b(e.players[1],l).firstName,"\xa0",b(e.players[1],l).lastName),r.a.createElement("td",{className:"data__input row__controls"},v!==e.id?r.a.createElement(w,{action:function(){return N(e.id)}}):r.a.createElement(R,{action:function(){return N(null)}})))})))),r.a.createElement(C,null,null!==v&&r.a.createElement(B,null,r.a.createElement(C,null,r.a.createElement(de,{match:W(t,v),color:0,playerData:J(W(t,v).players[0],z,n),playerList:l})),r.a.createElement(C,null,r.a.createElement(de,{match:W(t,v),color:1,playerData:J(W(t,v).players[1],z,n),playerList:l}))),T.length>0&&r.a.createElement(a.Fragment,null,r.a.createElement("h3",null,"Unmatched players"),r.a.createElement("ul",null,T.map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("input",{type:"checkbox",checked:_.includes(e),value:e,onChange:x}),b(e,l).firstName,"\xa0",b(e,l).lastName)}),T.length%2!==0&&r.a.createElement("li",null,r.a.createElement("input",{type:"checkbox",checked:_.includes(g.id),value:g.id,onChange:x}),g.firstName," ",g.lastName)),r.a.createElement("button",{onClick:function(){return function(e){var t=ce({id:e.join("-"),players:[e[p],e[f]],origRating:[b(e[p],l).rating,b(e[f],l).rating],newRating:[b(e[p],l).rating,b(e[f],l).rating]});e[p]===g.id&&(t.result=[d.byeValue,0]),e[f]===g.id&&(t.result=[0,d.byeValue]),y.roundList[n].push(t),s(Object(O.a)(c))}(_)},disabled:2!==_.length},"Pair checked"),"\xa0",r.a.createElement("button",{onClick:function(){return function(e){var t=y.byeQueue.filter(function(e){return!D(e,y.roundList)})[0],a=null;t>=0&&(a=ce({id:t+"-"+g.id,players:[t,g.id],origRating:[b(t,l).rating,g.rating],newRating:[b(t,l).rating,g.rating]}),e=e.filter(function(e){return e!==t}));var r=ue(e,n,y.roundList,l,i).map(function(e){return ce({id:e.join("-"),players:[e[p],e[f]],origRating:[b(e[p],l).rating,b(e[f],l).rating],newRating:[b(e[p],l).rating,b(e[f],l).rating]})});a&&r.push(a),r.forEach(function(e){var t=e.players.indexOf(g.id);t===f&&(e.result[p]=d.byeValue),t===p&&(e.result[f]=d.byeValue)}),y.roundList[n]=y.roundList[n].concat(r),s(Object(O.a)(c))}(T)},disabled:0===T.length},"Auto-pair"))))}function de(e){var t=e.match,n=e.color,a=e.playerData,l=e.playerList,i=a.colorBalance(),u="Even";return i<0?u="White +"+Math.abs(i):i>0&&(u="Black +"+i),r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,a.data(l).firstName,"\xa0",a.data(l).lastName),r.a.createElement("dt",null,"Score"),r.a.createElement("dd",null,a.score()),r.a.createElement("dt",null,"Rating"),r.a.createElement("dd",null,t.origRating[n],"\xa0 (",K()(t.origRating[n]-t.newRating[n]).format("+0"),")"),r.a.createElement("dt",null,"Color balance"),r.a.createElement("dd",null,u),r.a.createElement("dt",null,"Opponent history"),r.a.createElement("dd",null,r.a.createElement("ol",null,a.opponents(l).map(function(e){return r.a.createElement("li",{key:e.id},e.firstName)}))),r.a.createElement("dt",null,"Players to avoid"),r.a.createElement("dd",null,"TBD"))}function fe(e){var t=e.tourneyList,n=e.setTourneyList,l=e.tourneyId,i=e.playerList,c=t[l].players,o=t[l],s=Object(a.useState)(0===c.length),m=Object(u.a)(s,2),d=m[0],f=m[1],p=Object(a.useState)(null),y=Object(u.a)(p,2),E=y[0],g=y[1];function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=E);var a=t[l].tieBreaks;a.includes(e)?t[l].tieBreaks=a.filter(function(t){return t!==e}):t[l].tieBreaks=a.concat([e]),n(Object(O.a)(t))}function v(e){var a=t[l].tieBreaks,r=a.indexOf(E);console.log(a,r,e),t[l].tieBreaks=se()(a,r,r+e),n(Object(O.a)(t))}function N(e){var a=Number(e.target.value);e.target.checked?t[l].players=c.concat([a]):t[l].players=c.filter(function(e){return e!==a}),n(Object(O.a)(t))}return d?r.a.createElement("table",null,r.a.createElement("caption",null,"Select players"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null))),r.a.createElement("tbody",null,i.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.firstName),r.a.createElement("td",null,e.lastName),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",value:e.id,checked:c.includes(e.id),onChange:N})))})),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement("button",{onClick:function(){return t[l].players=i.map(function(e){return e.id}),void n(Object(O.a)(t))}},"Select all"),r.a.createElement("button",{onClick:function(){return t[l].players=[],void n(Object(O.a)(t))}},"Select none"),r.a.createElement("button",{onClick:function(){return f(!1)}},"Done"))))):r.a.createElement(B,null,r.a.createElement(C,null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null))),r.a.createElement("tbody",null,c.map(function(e){return r.a.createElement("tr",{key:e,className:b(e,i).type+" player"},r.a.createElement("td",null,b(e,i).firstName),r.a.createElement("td",null,b(e,i).lastName),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a=e,o.byeQueue=o.byeQueue.concat([a]),void n(Object(O.a)(t));var a},disabled:o.byeQueue.includes(e)},"Bye")))}))),r.a.createElement("button",{onClick:function(){return f(!0)}},"Edit player roster"),r.a.createElement("h3",null,"Bye queue"),r.a.createElement("ol",null,o.byeQueue.map(function(e){return r.a.createElement("li",{key:e,className:D(e,o.roundList)?"disabled":""},b(e,i).firstName,"\xa0",b(e,i).lastName,r.a.createElement("button",{onClick:function(){return a=e,o.byeQueue=o.byeQueue.filter(function(e){return e!==a}),void n(Object(O.a)(t));var a}},"Remove"))}))),r.a.createElement(C,null,r.a.createElement("h3",null,"Selected tiebreak methods"),r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{onClick:function(){return h()},disabled:null===E},"Toggle"),r.a.createElement("button",{onClick:function(){return v(-1)},disabled:null===E},"Move up"),r.a.createElement("button",{onClick:function(){return v(1)},disabled:null===E},"Move down"),r.a.createElement("button",{onClick:function(){return g(null)},disabled:null===E},"Done")),r.a.createElement("ol",null,o.tieBreaks.map(function(e){return r.a.createElement("li",{key:e},H[e].name,r.a.createElement("button",{onClick:function(){return g(E===e?null:e)},disabled:null!==E&&E!==e},E===e?"Done":"Edit"))})),r.a.createElement("h3",null,"Available tiebreak methods"),r.a.createElement("ol",null,H.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:o.tieBreaks.includes(t)?"enabled":"disabled"},e.name),!o.tieBreaks.includes(t)&&r.a.createElement("button",{onClick:function(){return h(t)}},"Add"))}))))}function pe(e){var t=e.playerList,n=e.setPlayerList,l=e.avoidList,i=e.tourneyList,c=e.setTourneyList,o=e.options,s=Object(a.useState)(null),m=Object(u.a)(s,2),d=m[0],f=m[1],p=Object(a.useState)(""),y=Object(u.a)(p,2),E=y[0],g=y[1];var b=r.a.createElement(a.Fragment,null);return b=null!==d?r.a.createElement(ye,{tourneyId:d,playerList:t,setOpenTourney:f,backButton:r.a.createElement(R,{action:function(){return f(null)}}),avoidList:l,setPlayerList:n,tourneyList:i,setTourneyList:c,options:o}):r.a.createElement("div",null,i.length>0?r.a.createElement("ol",null,i.map(function(e,a){return r.a.createElement("li",{key:a},r.a.createElement("button",{className:"tourney-select",onClick:function(){return f(a)}},e.name),r.a.createElement("button",{className:"danger",onClick:function(){return e=a,i.splice(e,1),void n(Object(O.a)(t));var e}},"delete"))})):r.a.createElement("p",null,"No tournaments added yet."),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(i.concat([_({name:E})])),g("")}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Make a new tournament"),r.a.createElement("input",{type:"text",placeholder:"tournament name",value:E,onChange:function(e){g(e.target.value)},required:!0}),r.a.createElement("input",{type:"submit",value:"Create"})))),r.a.createElement("div",null,b)}function ye(e){var t=e.tourneyId,n=e.playerList,l=e.setPlayerList,i=e.backButton,o=e.avoidList,s=e.tourneyList,m=e.setTourneyList,d=e.options,f=s[t],p=f.players,y=Object(a.useState)(0),E=Object(u.a)(y,2),h=E[0],v=E[1],N=F(f.tieBreaks,f.roundList),L=Object(u.a)(N,2),k=L[0],j=L[1];return console.log(k),r.a.createElement(c.e,{defaultIndex:h},i,r.a.createElement("div",null,r.a.createElement("h2",null,f.name),"Round progress: ",f.roundList.length,"/",V(p.length),r.a.createElement("button",{onClick:function(){return f.roundList=f.roundList.concat([[]]),m(Object(O.a)(s)),void v(f.roundList.length+1)}},"New Round"),r.a.createElement("button",{onClick:function(){return X()(f.roundList).forEach(function(e){0!==e.result.reduce(function(e,t){return e+t})&&e.players.forEach(function(t,a){b(t,n).matchCount-=1,b(t,n).rating=e.origRating[a]})}),f.roundList=f.roundList.slice(0,f.roundList.length-1),void m(Object(O.a)(s))},disabled:0===f.roundList.length},"Remove last round")),r.a.createElement(c.b,null,r.a.createElement(c.a,null,"Players"),r.a.createElement(c.a,null,"Scores"),Object.keys(f.roundList).map(function(e){return r.a.createElement(c.a,{key:e},"Round ",Number(e)+1)})),r.a.createElement(c.d,null,r.a.createElement(c.c,null,r.a.createElement(fe,{tourneyList:s,setTourneyList:m,tourneyId:t,playerList:n})),r.a.createElement(c.c,null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Score"),j.map(function(e,t){return r.a.createElement("th",{key:t},e)}))),r.a.createElement("tbody",null,k.map(function(e,t){return e.filter(function(e){return e.id!==g.id}).map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__number"},t+1),r.a.createElement("td",null,b(e.id,n).firstName),r.a.createElement("td",{className:"table__number"},e.score),e.tieBreaks.map(function(e,t){return r.a.createElement("td",{key:t,className:"table__number"},e)}))})})))),f.roundList.map(function(e,a){return r.a.createElement(c.c,{key:a},r.a.createElement(me,{matchList:e,roundId:a,playerList:n,avoidList:o,tourneyList:s,tourneyId:t,setTourneyList:m,setPlayerList:l,options:d}))})))}function Ee(e){var t=e.playerList,n=e.setPlayerList,l=e.avoidList,i=e.setAvoidList,c=Object(a.useState)(null),o=Object(u.a)(c,2),s=o[0],m=o[1];return null!==s?r.a.createElement(be,{key:s,playerId:s,setOpenPlayer:m,playerList:t,avoidList:l,setAvoidList:i}):r.a.createElement(ge,{playerList:t,setPlayerList:n,setOpenPlayer:m})}function ge(e){var t=e.playerList,n=e.setPlayerList,l=e.setOpenPlayer,i={firstName:"",lastName:"",rating:1200},c=Object(a.useState)(i),o=Object(u.a)(c,2),s=o[0],m=o[1],d=t.map(function(e){return e.id});d.sort(function(e,t){return e-t}),d.reverse();var f=Object(a.useState)(d[0]+1),p=Object(u.a)(f,2),y=p[0],g=p[1],b=function(e){e.preventDefault();var t={};t[e.currentTarget.name]=e.currentTarget.value,m(Object.assign({},s,t))},h=r.a.createElement(a.Fragment,null);return t.length>0&&(h=r.a.createElement("table",null,r.a.createElement("caption",null,"Demo Roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Rating"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__player"},e.firstName),r.a.createElement("td",{className:"table__player"},e.lastName),r.a.createElement("td",{className:"table__number"},e.rating),r.a.createElement("td",null,r.a.createElement("button",{className:"danger",onClick:function(a){return function(e,a){e.preventDefault();var r=t.indexOf(a);t.splice(r,1),n(Object(O.a)(t))}(a,e)}},"delete")),r.a.createElement("td",null,r.a.createElement(w,{action:function(){return l(e.id)}})))})))),r.a.createElement("div",{className:"roster"},h,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=E(s);a.id=y,g(function(e){return e+1}),m(i),n(t.concat(a))}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add your own players"),r.a.createElement("p",null,r.a.createElement("label",null,"First name\xa0",r.a.createElement("input",{type:"text",name:"firstName",onChange:b,value:s.firstName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name\xa0",r.a.createElement("input",{type:"text",name:"lastName",onChange:b,value:s.lastName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating\xa0",r.a.createElement("input",{type:"number",name:"rating",onChange:b,value:s.rating,required:!0}))),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Add"})))))}function be(e){var t=e.playerId,n=e.playerList,l=e.setOpenPlayer,i=e.avoidList,c=e.setAvoidList,o=Object(a.useState)(h(t,i)),s=Object(u.a)(o,2),m=s[0],d=s[1],f=function(){return n.map(function(e){return e.id}).filter(function(e){return!m.includes(e)&&e!==t})},p=Object(a.useState)(f()[0]),y=Object(u.a)(p,2),E=y[0],g=y[1];return Object(a.useEffect)(function(){g(f()[0]),d(h(t,i))},[i]),r.a.createElement("div",null,r.a.createElement(R,{action:function(){return l(null)}}),r.a.createElement("h2",null,b(t,n).firstName,"\xa0",b(t,n).lastName),r.a.createElement("dl",null,r.a.createElement("dt",null,"Matches played"),r.a.createElement("dd",null,b(t,n).matchCount),r.a.createElement("dt",null,"K factor"),r.a.createElement("dd",null,N(b(t,n).matchCount)),r.a.createElement("dt",null,"Players to avoid"),r.a.createElement("dd",null,r.a.createElement("ul",null,m.map(function(e){return r.a.createElement("li",{key:e},b(e,n).firstName,"\xa0",b(e,n).lastName,r.a.createElement("button",{onClick:function(){return n=e,void c(i.filter(function(e){return!(e.includes(t)&&e.includes(n))}));var n}},"x"))}),0===i.length&&r.a.createElement("li",null,"None")))),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),i.push([t,Number(E)]),c(Object(O.a)(i))}(e)}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add player to avoid"),r.a.createElement("select",{onBlur:function(e){return g(e.target.value)}},f().map(function(e){return r.a.createElement("option",{key:e,value:e},b(e,n).firstName,"\xa0",b(e,n).lastName)})),r.a.createElement("input",{type:"submit",value:"Add"}))))}function he(e){var t=e.playerList,n=e.avoidList,a=e.tourneyList,l=e.options,i=e.setOptions,u=JSON.stringify({playerList:t,avoidList:n},null,2),c=JSON.stringify(a,null,2);return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Bye options"),"Select how many points a bye is worth:\xa0",r.a.createElement("input",{type:"number",value:l.byeValue,onChange:function(e){return i({byeValue:Number(e.target.value)})}}))),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Export tournament data"),r.a.createElement("textarea",{className:"json",rows:25,cols:50,value:c,readOnly:!0,name:"tourneyData"}),r.a.createElement("input",{type:"submit",value:"load",disabled:!0}))),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Export player data"),r.a.createElement("textarea",{className:"json",rows:25,cols:50,value:u,name:"playerdata",readOnly:!0}),r.a.createElement("input",{type:"submit",value:"Load",disabled:!0}))))}var ve=n(19);function Ne(){return r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"waving hand"},"\ud83d\udc4b"),"\xa0 This is an unstable demo build! Want to help make it better? Head to the\xa0",r.a.createElement("span",{role:"img","aria-label":"finger pointing right"},"\ud83d\udc49"),"\xa0",r.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"Git repository"),".")}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(function(){var e=Object(a.useState)(o.playerList.map(function(e){return E(e)})),t=Object(u.a)(e,2),n=t[0],l=t[1],i=Object(a.useState)(o.avoidList),m=Object(u.a)(i,2),d=m[0],f=m[1],p=Object(a.useState)(s),y=Object(u.a)(p,2),g=y[0],b=y[1],h=Object(a.useState)(ve),N=Object(u.a)(h,2),L=N[0],O=N[1];return Object(a.useEffect)(function(){f(v(d,n))},[n]),r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.e,{className:"app",defaultIndex:1},r.a.createElement(c.b,{className:"header"},r.a.createElement(c.a,null,"Players"),r.a.createElement(c.a,null,"Tournaments"),r.a.createElement(c.a,null,"Options"),r.a.createElement(c.a,null,"About")),r.a.createElement(c.d,{className:"content"},r.a.createElement(c.c,null,r.a.createElement(Ee,{playerList:n,setPlayerList:l,avoidList:d,setAvoidList:f})),r.a.createElement(c.c,null,r.a.createElement(pe,{playerList:n,setPlayerList:l,avoidList:d,tourneyList:g,setTourneyList:b,options:L})),r.a.createElement(c.c,null,r.a.createElement(he,{playerList:n,avoidList:d,tourneyList:g,options:L,setOptions:O})),r.a.createElement(c.c,null,r.a.createElement("p",null,"This is an early, proof-of-concept, demo of a chess tournament manager. ",r.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"You can find out more here.")))),r.a.createElement("footer",{className:"caution footer"},r.a.createElement(Ne,null))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e){e.exports={playerList:[{id:0,type:"person",firstName:"Bruce",lastName:"Wayne",rating:1998,matchCount:9},{id:1,type:"person",firstName:"Dick",lastName:"Grayson",rating:1909,matchCount:9},{id:2,type:"person",firstName:"Alfred",lastName:"Pennyworth",rating:1999,matchCount:9},{id:3,type:"person",firstName:"Barbara",lastName:"Gordon",rating:1345,matchCount:7},{id:4,type:"person",firstName:"Kate",lastName:"Kane",rating:1538,matchCount:9},{id:5,type:"person",firstName:"Selina",lastName:"Kyle",rating:1495,matchCount:9},{id:6,type:"person",firstName:"Jason",lastName:"Todd",rating:1101,matchCount:7},{id:7,type:"person",firstName:"James",lastName:"Gordon",rating:1167,matchCount:7},{id:8,type:"person",firstName:"Helena",lastName:"Wayne",rating:1087,matchCount:7},{id:9,type:"person",firstName:"Joker",lastName:"",rating:1538,matchCount:1},{id:10,type:"person",firstName:"Harley",lastName:"Quinn",rating:1648,matchCount:1},{id:11,type:"person",firstName:"Victor",lastName:"Fries",rating:862,matchCount:1},{id:12,type:"person",firstName:"Oswald",lastName:"Cobblepot",rating:1812,matchCount:1},{id:13,type:"person",firstName:"Ra's",lastName:"al Ghul",rating:1404,matchCount:1},{id:14,type:"person",firstName:"Pamela",lastName:"Isley",rating:965,matchCount:1},{id:15,type:"person",firstName:"Edward",lastName:"Nigma",rating:948,matchCount:1},{id:16,type:"person",firstName:"Jonathan",lastName:"Crane",rating:899,matchCount:1},{id:17,type:"person",firstName:"Harvey",lastName:"Dent",rating:1649,matchCount:1},{id:18,type:"person",firstName:"Hugo",lastName:"Strange",rating:800,matchCount:0}],avoidList:[[0,1],[3,7],[9,10]]}}},[[22,1,2]]]);
//# sourceMappingURL=main.d23f89e5.chunk.js.map