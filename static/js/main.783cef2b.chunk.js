(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(38),c=a.n(l),u=(a(99),a(7)),i=a(68),o=a.n(i),s=function(e){return r.a.createElement("p",{"data-testid":"about"},"This is an early, proof-of-concept, demo of a chess tournament manager."," ",r.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"You can find out more here."))},m=function(e){return r.a.createElement("div",{"data-testid":"404"},r.a.createElement("p",null,"Page not found."))},d=a(57),p=a.n(d),E=a(69),f=a(2),y=a(88),b=a(59),g=a.n(b),h=a(70),O=a.n(h),N=a(71),v=a.n(N),j=a(72),_=a.n(j),R=a(16),I=a.n(R),S=a(73),C=a.n(S),w=a(145),k=a(89),A=a(122),T=a(123),L=a(124),D=a(75),B=a(141),P=a(125),x=a(45),M=a(144),Y=a(142),H=a(126),U=a(127),V=a(87),W=a(128),J=a(129);function K(e,t){var a=JSON.parse(localStorage.getItem(e))||t;return localStorage.setItem(e,JSON.stringify(a)),a}var G=a(121),Q=a(74),F=1,q=0,z=-1;function X(e){return{id:e.id,players:e.players,result:e.result||[0,0],origRating:e.origRating,newRating:e.newRating}}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||0,type:e.type||"person",firstName:e.firstName||"",lastName:e.lastName||"",rating:e.rating||0,matchCount:e.matchCount||0}}var $=Z({id:-1,firstName:"Bye",lastName:"Player",type:"dummy"});function ee(e){return!function(e){return e.players.includes(z)}(e)}function te(e){return e!==z}function ae(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(null===a?t:t.slice(0,a+1)).reduce(function(e,t){return e.concat(t)},[]).filter(function(t){return t.players.includes(e)})}Object.freeze($);var ne=Object(w.a)(G.a,Q.a);function re(e,t){if(t===z)return $;var a=e.filter(function(e){return e.id===t})[0];return a||Z({id:t,firstName:"Anonymous",type:"missing"})}function le(e,t){return t.filter(function(t){return t.includes(e)}).reduce(function(e,t){return t.concat(e)},[]).filter(function(t){return t!==e})}function ce(e){var t=Math.ceil(Math.log2(e));return Number.isFinite(t)?t:0}function ue(e,t){return e.filter(function(e){return e.id===t})[0]}var ie=a(31),oe={players:ie.playerList.map(function(e){return Z(e)}),avoid:ie.avoidList};function se(e,t){var a=Object(w.a)(Object(k.a)(function(e){return e.id}),Object(A.a)(function(e,t){return t-e}),T.a,L.a);switch(t.type){case"ADD_PLAYER":return Object(D.a)(Object(B.a)(["players"]),Object(P.a)(Z({firstName:t.firstName,lastName:t.lastName,rating:t.rating,id:a(e.players)})),e);case"SET_PLAYER":return Object(x.a)("players",Object(D.a)(Object(M.a)(Object(Y.a)(Object(H.a)("id",t.id),e.players)),Object(U.a)({firstName:t.firstName,lastName:t.lastName,rating:t.rating,matchCount:t.matchCount}),e.players),e);case"DEL_PLAYER":return Object(D.a)(Object(B.a)(["players"]),Object(V.a)(function(e){return e.id!==t.id}),Object(W.a)(Object(B.a)(["avoid"]),Object(V.a)(function(e){return!e.includes(t.id)}),e));case"SET_PLAYER_MATCHCOUNT":return Object(W.a)(Object(B.a)(["players",Object(Y.a)(Object(H.a)("id",t.id),e.players),"matchCount"]),t.matchCount,e);case"SET_PLAYER_RATING":return Object(W.a)(Object(B.a)(["players",Object(Y.a)(Object(H.a)("id",t.id),e.players),"rating"]),t.rating,e);case"ADD_AVOID_PAIR":return Object(D.a)(Object(B.a)(["avoid"]),Object(P.a)(t.pair),e);case"DEL_AVOID_PAIR":return Object(D.a)(Object(B.a)(["avoid"]),Object(V.a)(function(e){return!(e.includes(t.pair[0])&&e.includes(t.pair[1]))}),e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type")}}var me=Object(n.createContext)(null);function de(){var e=Object(n.useContext)(me),t=Object(f.a)(e,2),a=t[0];return{playerState:a,playerDispatch:t[1],getPlayer:Object(J.a)(re)(a.players)}}function pe(e){var t=K("players",oe),a=Object(n.useReducer)(se,t),r=Object(f.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)(function(){localStorage.setItem("players",JSON.stringify(l))},[l]),Object(n.createElement)(me.Provider,{value:[l,c]},e.children)}var Ee=a(136),fe=a(137),ye=a(140),be=a(138),ge=a(139),he=a(135),Oe=a(148),Ne=a(49),ve=a(130),je=a(131),_e=a(146),Re=a(132),Ie=a(43),Se=a(34),Ce=a(58),we=a.n(Ce),ke=[{name:"Modified median",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Pe(e,t,a),r=ne(n);return Object(ve.a)(r)}},{name:"Solkoff",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Pe(e,t,a);return Object(ve.a)(n)}},{name:"Cumulative score",func:De},{name:"Cumulative of opposition",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Te(e,t,a).filter(te).map(function(e){return De(e,t,a)});return Object(ve.a)(n)}},{name:"Most black",func:Be}];function Ae(e,t){return ae(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat(t.players)},[]).includes(z)}function Te(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ae(e,t,a).reduce(function(e,t){return e.concat(t.players)},[]).filter(function(t){return t!==e})}function Le(e,t){var a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ae(e,t,a).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return Object(ve.a)(a)}function De(e,t){var a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ae(e,t,a).filter(ee).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat([Object(je.a)(e)+t])},[0]);return Object(ve.a)(a)}function Be(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=ae(e,t,a).filter(ee).reduce(function(t,a){return a.players[q]===e?t.concat(-1):t.concat(1)},[0]);return Object(ve.a)(n)}function Pe(e,t,a){var n=Te(e,t,a).filter(te).map(function(e){return Le(e,t,a)});return Object(A.a)(function(e,t){return e-t},n)}function xe(e,t,a){var n=e.map(function(e){return ke[e]}),r=n.map(function(e){return e.name}),l=function(e){var t=e.reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t.players)},[]);return Array.from(new Set(t))}(t).filter(function(e){return e!==z}).map(function(e){return{id:e,score:Le(e,t,a),tieBreaks:n.map(function(n){return n.func(e,t,a)})}}),c=n.reduce(function(e,t,a){return e.thenBy(function(e){return e.tieBreaks[a]},-1)},Object(Se.firstBy)(function(e){return e.score},-1));return[Object(A.a)(c,l),r]}function Me(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null===a?Object(je.a)(t):t[a-1];if(!n)return null;var r=function(e,t){var a=t.filter(function(t){return t.players.includes(e)})[0];return a?a.players.indexOf(e):null}(e,n);return r===q?F:q}function Ye(e,t,a,n,r){var l=re(t,e);return{profile:l,rating:l.rating,id:e,score:Le(e,n,r),dueColor:Me(e,n,r),colorBalance:Be(e,n,r),opponentHistory:Te(e,n,r),upperHalf:!1,avoidList:le(e,a),hasHadBye:Ae(e,n,r),isDueBye:!1}}function He(e){return 800/(e||1)}Object.freeze(ke);var Ue,Ve=a(143),We=a(133),Je=a(147),Ke=a(134),Ge=a(76),Qe=a.n(Ge),Fe=function(e){return function(t){return t?e:0}},qe=Fe(20),ze=(Ue=16,function(e){return Ue/e}),Xe=Fe(2),Ze=Fe(1),$e=Object(w.a)(Object(Ie.a)(Xe(!1)),Object(Ie.a)(Ze(!0)),Object(Ie.a)(ze(1)),Object(Ie.a)(qe(!0)))(0);function et(e,t){var a=e.opponentHistory.includes(t.id),n=e.avoidList.includes(t.id);return Object(w.a)(Object(Ie.a)(Xe(e.upperHalf!==t.upperHalf&&e.score===t.score)),Object(Ie.a)(Ze(null===e.dueColor||e.dueColor!==t.dueColor)),Object(Ie.a)(ze(Math.abs(e.score-t.score)+1)),Object(Ie.a)(qe(!a&&!n)))(0)}function tt(e){var t=function(e){return Object(Ve.a)(e.length/2,e)};return e.reduce(function(e,a,n,r){return Object(w.a)(Object(V.a)(function(e){return e.score===a.score}),Object(A.a)(function(e,t){return t.rating-e.rating}),t,Object(We.a)(Object(M.a)(0)),Object(k.a)(function(e){return e.id}))(r).includes(a.id)?e.concat([Object(x.a)("upperHalf",!0,a)]):e.concat([Object(x.a)("upperHalf",!1,a)])},[])}function at(e){if(e.length%2===0)return e;var t=Object(Je.a)(function(e){return!e.hasHadBye},e),a=-1===t?Object(Je.a)(Ke.a,e):t;return Object(D.a)(Object(M.a)(a),Object(x.a)("isDueBye",!0),e)}function nt(e,t,a,n,r){var l=e.roundList,c=Object(J.a)(re)(t.players),u=e.byeQueue.filter(function(e){return!Ae(e,l)})[0],i=null;u>=0&&(i=X({id:u+"-"+$.id,players:[u,$.id],origRating:[c(u).rating,$.rating],newRating:[c(u).rating,$.rating]}),n=n.filter(function(e){return e!==u}));var o=function(e,t,a,n,r){var l=Object(w.a)(Object(k.a)(function(e){return Ye(e,n,r,a,t)}),Object(A.a)(Object(Se.firstBy)(function(e,t){return t.score-e.score}).thenBy(function(e,t){return t.rating-e.rating})),tt,at)(e),c=l.filter(function(e){return!e.isDueBye}).reduce(function(e,t,a,n){var r=n.filter(function(e){return e!==t}).map(function(e){return[t.id,e.id,et(t,e)]});return e.concat(r)},[]),u=Qe()(c).reduce(function(e,t,a){if(-1!==t){var n=l.filter(function(e){return e.id===t})[0],r=l.filter(function(e){return e.id===a})[0],u=c.filter(function(e){return e[0]===t&&e[1]===a})[0][2],i=e.map(function(e){return e[0]});if(!i.includes(n)&&!i.includes(r))return e.concat([[n,r,u]])}return e},[]),i=Object(A.a)(Object(Se.firstBy)(function(e){return e[0].score+e[1].score},-1).thenBy(function(e){return e[0].rating+e[1].rating},-1),u).map(function(e){var t=e[0],a=e[1],n=[t.id,a.id];return t.colorBalance<a.colorBalance?Object(he.a)(n):n}),o=l.filter(function(e){return e.isDueBye})[0];return o?i.concat([[o.id,z]]):i}(n,a,l,t.players,t.avoid).map(function(e){return X({id:e.join("-"),players:[e[q],e[F]],origRating:[c(e[q]).rating,c(e[F]).rating],newRating:[c(e[q]).rating,c(e[F]).rating]})});return i&&o.push(i),o.forEach(function(e){var t=e.players.indexOf($.id);t===F&&(e.result[q]=r),t===q&&(e.result[F]=r)}),o}var rt=Ne;function lt(e,t){switch(t.type){case"ADD_TOURNEY":return Object(P.a)({name:(a={name:t.name}).name||"",tieBreaks:a.tieBreaks||[0,1,2,3],byeQueue:a.byeQueue||[],players:a.players||[],roundList:a.roundList||[]},e);case"DEL_TOURNEY":return e.filter(function(e,a){return a!==t.index});case"ADD_ROUND":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList"]),Object(P.a)([]),e);case"DEL_LAST_ROUND":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList"]),Object(Ee.a)(-1,1),e);case"ADD_TIEBREAK":return Object(D.a)(Object(B.a)([t.tourneyId,"tieBreaks"]),Object(P.a)(t.id),e);case"DEL_TIEBREAK":return Object(D.a)(Object(B.a)([t.tourneyId,"tieBreaks"]),Object(V.a)(function(e){return e!==t.id}),e);case"MOVE_TIEBREAK":return Object(D.a)(Object(B.a)([t.tourneyId,"tieBreaks"]),Object(fe.a)(t.oldIndex,t.newIndex),e);case"SET_TOURNEY_PLAYERS":return Object(W.a)(Object(B.a)([t.tourneyId,"players"]),t.players,e);case"SET_BYE_QUEUE":return Object(W.a)(Object(B.a)([t.tourneyId,"byeQueue"]),t.byeQueue,e);case"AUTO_PAIR":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId]),Object(ye.a)(be.a,nt(e[t.tourneyId],t.playerState,t.roundId,t.unpairedPlayers,t.byeValue)),e);case"MANUAL_PAIR":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId]),Object(P.a)(function(e,t,a){var n=Object(J.a)(re)(e),r=X({id:t.join("-"),players:[t[q],t[F]],origRating:[n(t[q]).rating,n(t[F]).rating],newRating:[n(t[q]).rating,n(t[F]).rating]});return t[q]===$.id&&(r.result=[0,a]),t[F]===$.id&&(r.result=[a,0]),r}(t.players,t.pair,t.byeValue)),e);case"SET_MATCH_RESULT":return Object(W.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId,Object(Y.a)(Object(H.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId]),"result"]),t.result,Object(W.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId,Object(Y.a)(Object(H.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId]),"newRating"]),t.newRating,e));case"DEL_MATCH":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId]),Object(V.a)(function(e){return e.id!==t.matchId}),e);case"SWAP_COLORS":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId,Object(Y.a)(Object(H.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId])]),function(e){return Object(ge.a)(e,{result:Object(he.a)(e.result),players:Object(he.a)(e.players),origRating:Object(he.a)(e.origRating),newRating:Object(he.a)(e.newRating)})},e);case"MOVE_MATCH":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId]),Object(fe.a)(t.oldIndex,t.newIndex),e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type "+t.type)}var a}var ct=Object(n.createContext)(null);function ut(){return Object(n.useContext)(ct)}function it(e){var t=Object(n.useContext)(ct),a=Object(f.a)(t,2),r=a[0],l=a[1];return[r[e],l]}function ot(e,t){var a=it(e),n=Object(f.a)(a,2),r=n[0],l=n[1],c=r.roundList[t],u=c.reduce(function(e,t){return e.concat(t.players)},[]);return{tourney:r,dispatch:l,unmatched:Object(Oe.a)(r.players,u),matchList:c}}function st(e){var t=K("tourneys",rt),a=Object(n.useReducer)(lt,t),r=Object(f.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)(function(){localStorage.setItem("tourneys",JSON.stringify(l))},[l]),Object(n.createElement)(ct.Provider,{value:[l,c]},e.children)}var mt=a(50);function dt(e,t){switch(t.type){case"SET_BYE_VALUE":return Object(x.a)("byeValue",t.byeValue,e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type.")}}var pt=Object(n.createContext)(null);function Et(){return Object(n.useContext)(pt)}function ft(e){var t=K("options",mt),a=Object(n.useReducer)(dt,t),r=Object(f.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)(function(){localStorage.setItem("options",JSON.stringify(l))},[l]),Object(n.createElement)(pt.Provider,{value:[l,c]},e.children)}a(110),a(111);var yt=a(33),bt=a.n(yt);function gt(e){var t=e.tourneyId,a=e.children,l=e.navigate,c=it(t=Number(t)),i=Object(f.a)(c,2),o=i[0],s=i[1],m=o.name,d=o.players,b=o.roundList,h=de(),N=h.playerState,j=h.getPlayer,R=h.playerDispatch,S=Object(n.useMemo)(function(){var e=g()(b);if(!e)return!0;var t=e.reduce(function(e,t){return e.concat(t.players)},[]),a=d.filter(function(e){return!t.includes(e)}),n=e.map(function(e){return e.result[0]+e.result[1]});return 0===a.length&&!n.includes(0)},[d,b]);Object(n.useEffect)(function(){var e=document.title;return document.title=m,function(){document.title=e}},[m]);var w=b.length>=ce(d.length),k=S?w?["All necessary rounds have completed.",!0]:["Ready to begin a new round.",!1]:["You must complete the last round before beginning a new one.",!0],A=Object(f.a)(k,2),T=A[0],L=A[1];function D(){return(D=Object(E.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete the last round?")){e.next=5;break}return e.next=3,l(".");case 3:g()(b).forEach(function(e){e.result[0]+e.result[1]!==0&&e.players.forEach(function(t,a){if(t!==z){var n=j(t).matchCount;R({type:"SET_PLAYER_MATCHCOUNT",id:t,matchCount:n-1}),R({type:"SET_PLAYER_RATING",id:t,rating:e.origRating[a]})}})}),s({type:"DEL_LAST_ROUND",players:N.players,tourneyId:t});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.a.createElement("div",{className:bt.a.tournament},r.a.createElement("div",{className:bt.a.header},r.a.createElement("nav",null,r.a.createElement(u.a,{to:"/"},r.a.createElement(_.a,null)," Back")),r.a.createElement("h2",null,m)),r.a.createElement("div",{className:bt.a.sidebar},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.a,{to:"."},"Players")),r.a.createElement("li",null,r.a.createElement(u.a,{to:"crosstable"},"Crosstable")),r.a.createElement("li",null,r.a.createElement(u.a,{to:"scores"},"Score detail"))),r.a.createElement("hr",null),r.a.createElement("ul",null,Object.keys(b).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement(u.a,{to:"".concat(e)},"Round ",Number(e)+1))}))),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){w&&!window.confirm("All rounds have completed. Are you sure you want to begin a new one?")||s({type:"ADD_ROUND",tourneyId:t})},disabled:!S},r.a.createElement(C.a,null)," New round")," ",r.a.createElement(y.a,{label:T},r.a.createElement("span",{className:"helpIcon"},L?r.a.createElement(v.a,{className:"status-alert"}):r.a.createElement(O.a,{className:"status-ok"})))),r.a.createElement("li",null,r.a.createElement("button",{className:"danger "+bt.a.toolbarItem,onClick:function(){return D.apply(this,arguments)},disabled:0===b.length},r.a.createElement(I.a,null)," Remove last round")),r.a.createElement("li",null,"Round progress: ",b.length,"/",ce(d.length)," "))),r.a.createElement("div",{className:bt.a.content},a))}function ht(e){var t=ut(),a=Object(f.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),o=Object(f.a)(i,2),s=o[0],m=o[1];return r.a.createElement("div",null,l.length>0&&r.a.createElement("h2",null,"Tournament list"),l.length>0?r.a.createElement("ol",null,l.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(u.a,{to:String(t)},e.name)," ",r.a.createElement("button",{title:"Delete \u201c".concat(e.name,"\u201d"),"aria-label":"Delete \u201c".concat(e.name,"\u201d"),className:"danger iconButton",onClick:function(){return c({type:"DEL_TOURNEY",index:t})}},r.a.createElement(I.a,null)))})):r.a.createElement("p",null,"No tournaments added yet."),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c({type:"ADD_TOURNEY",name:s}),m("")}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Make a new tournament"),r.a.createElement("label",null,"Name:"," ",r.a.createElement("input",{type:"text",placeholder:"tournament name",value:s,onChange:function(e){m(e.target.value)},required:!0})),r.a.createElement("input",{type:"submit",value:"Create"}))))}var Ot=function(e){return r.a.createElement("div",null,e.children)},Nt=a(10),vt=a.n(Nt);function jt(e){var t=Number(e.playerId),a=de(),l=a.playerState,c=a.playerDispatch,u=a.getPlayer,i=l.players,o=l.avoid,s=Object(n.useState)(le(t,o)),m=Object(f.a)(s,2),d=m[0],p=m[1],E=Object(n.useMemo)(function(){return i.map(function(e){return e.id}).filter(function(e){return!d.includes(e)&&e!==t})},[i,t,d]),y=Object(n.useState)(E[0]),b=Object(f.a)(y,2),g=b[0],h=b[1];function O(e){e.preventDefault();var a=e.currentTarget,n=a.firstName,r=a.lastName,l=a.matchCount,u=a.rating;c({type:"SET_PLAYER",id:t,firstName:n.value,lastName:r.value,matchCount:Number(l.value),rating:Number(u.value)})}return Object(n.useEffect)(function(){p(le(t,o))},[o,t]),Object(n.useEffect)(function(){h(E[0])},[h,E]),Object(n.useEffect)(function(){var e=document.title;return document.title=u(t).firstName+" "+u(t).lastName,function(){document.title=e}},[t,u]),r.a.createElement("div",null,r.a.createElement("h2",null,"Profile for"," ",u(t).firstName," ",u(t).lastName),r.a.createElement("form",{onChange:O,onSubmit:O},r.a.createElement("p",null,r.a.createElement("label",null,"First name"," ",r.a.createElement("input",{type:"text",name:"firstName",defaultValue:u(t).firstName}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name"," ",r.a.createElement("input",{type:"text",name:"lastName",defaultValue:u(t).lastName}))),r.a.createElement("p",null,r.a.createElement("label",null,"Matches played"," ",r.a.createElement("input",{type:"number",name:"matchCount",defaultValue:String(u(t).matchCount)}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating",r.a.createElement("input",{type:"number",name:"rating",defaultValue:String(u(t).rating)}))),r.a.createElement("p",null,r.a.createElement("label",null,"K factor",r.a.createElement("input",{type:"number",readOnly:!0,value:vt()(He(u(t).matchCount)).format("00")})))),r.a.createElement("ul",null,r.a.createElement("h3",null,"Players to avoid"),d.map(function(e){return r.a.createElement("li",{key:e},u(e).firstName," ",u(e).lastName," ",r.a.createElement("button",{className:"danger iconButton",onClick:function(){return c({type:"DEL_AVOID_PAIR",pair:[t,e]})},title:"Remove ".concat(u(e).firstName," \n").concat(u(e).lastName),"arial-label":"Remove \n".concat(u(e).firstName," ").concat(u(e).lastName," from avoid list.")},r.a.createElement(I.a,null)))}),0===o.length&&r.a.createElement("li",null,"None")),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),c({type:"ADD_AVOID_PAIR",pair:[t,Number(g)]})}(e)}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add player to avoid"),r.a.createElement("select",{onBlur:function(e){return h(Number(e.target.value))}},E.map(function(e){return r.a.createElement("option",{key:e,value:e},u(e).firstName," ",u(e).lastName)}))," ",r.a.createElement("input",{type:"submit",value:"Add"}))))}var _t=a(21),Rt=a(77),It=a.n(Rt),St=a(90),Ct=a(60),wt=a.n(Ct);function kt(e){var t=e.children,a=e.style;return r.a.createElement("div",{style:Object(St.a)({},a),className:wt.a.panel},t)}function At(e){return r.a.createElement("div",Object.assign({},e,{className:wt.a.panels}),r.a.Children.map(e.children,function(e){return e}))}function Tt(e){var t=e.id,a=e.firstName,n=e.lastName,l=de().getPlayer;return t===z?r.a.createElement("span",null,a&&l(t).firstName," ",n&&l(t).lastName):r.a.createElement(u.a,{to:"/players/"+t},a&&l(t).firstName," ",n&&l(t).lastName)}function Lt(){var e=de().playerDispatch,t={firstName:"",lastName:"",rating:1200},a=Object(n.useState)(t),l=Object(f.a)(a,2),c=l[0],u=l[1],i=function(e){e.preventDefault();var t=e.currentTarget,a=t.name,n=t.value;u(function(e){return Object(x.a)(a,n,e)})};return r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=c.firstName,r=c.lastName,l=c.rating;u(t),e({type:"ADD_PLAYER",firstName:n,lastName:r,rating:l})}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Register a new player"),r.a.createElement("p",null,r.a.createElement("label",null,"First name"," ",r.a.createElement("input",{type:"text",name:"firstName",onChange:i,value:c.firstName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name"," ",r.a.createElement("input",{type:"text",name:"lastName",onChange:i,value:c.lastName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating "," ",r.a.createElement("input",{type:"number",name:"rating",onChange:i,value:c.rating,required:!0}))),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Add"}))))}function Dt(e){var t=de(),a=t.playerState,n=t.playerDispatch;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("caption",null,"Demo Roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Rating"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.players.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__player"},r.a.createElement(Tt,{id:e.id,firstName:!0})),r.a.createElement("td",{className:"table__player"},r.a.createElement(Tt,{id:e.id,lastName:!0})),r.a.createElement("td",{className:"table__number"},e.rating),r.a.createElement("td",null,r.a.createElement("button",{className:"danger iconButton",onClick:function(t){return function(e,t){e.preventDefault(),n({type:"DEL_PLAYER",id:t})}(t,e.id)},title:"Delete ".concat(e.firstName," ").concat(e.lastName),"aria-label":"Delete ".concat(e.firstName," ").concat(e.lastName)},r.a.createElement(I.a,null))),r.a.createElement("td",null,r.a.createElement(u.a,{to:String(e.id)},"Open",r.a.createElement(_t.a,null," ",e.firstName," ",e.lastName)," ",r.a.createElement(It.a,null))))}))),r.a.createElement(Lt,null))}function Bt(e){return r.a.createElement("div",null,e.children)}var Pt=a(61),xt=a.n(Pt),Mt=a(11),Yt=a(19),Ht=a.n(Yt);function Ut(e){var t=it(e.tourneyId),a=Object(f.a)(t,1)[0],n=a.tieBreaks,l=a.roundList,c=de().getPlayer,u=function(e,t){var a=xe(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),n=Object(f.a)(a,2),r=n[0],l=n[1];return[r.reduce(function(e,t,a,n){var r,l,c=n[a-1];return 0===a||(l=c,(r=t).score!==l.score||r.tieBreaks.reduce(function(e,t,a){return e.concat(t!==l.tieBreaks[a])},[]).includes(!0))?Object(P.a)([t],e):Object(D.a)(Object(M.a)(e.length-1),Object(P.a)(t),e)},[]),l]}(n,l),i=Object(f.a)(u,2),o=i[0],s=i[1];return r.a.createElement("table",{className:Ht.a.table},r.a.createElement("caption",null,"Score detail"),r.a.createElement("tbody",null,r.a.createElement("tr",{className:Ht.a.topHeader},r.a.createElement("th",{scope:"col"},"Rank"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Score"),s.map(function(e,t){return r.a.createElement("th",{key:t,scope:"col"},e)})),o.map(function(e,t){return e.map(function(e,a,n){return r.a.createElement("tr",{key:e.id,className:Ht.a.row},0===a&&r.a.createElement("th",{scope:"row",className:"table__number "+Ht.a.rank,rowSpan:n.length},vt()(t+1).format("0o")),r.a.createElement("th",{scope:"row",className:Ht.a.playerName,"data-testid":t},c(e.id).firstName,"\xa0",c(e.id).lastName),r.a.createElement("td",{className:"table__number","data-testid":xt()(c(e.id).firstName+c(e.id).lastName+" score")},vt()(e.score).format("1/2")),e.tieBreaks.map(function(t,a){return r.a.createElement("td",{key:a,className:"table__number","data-testid":xt()(c(e.id).firstName+c(e.id).lastName+s[a])},vt()(t).format("1/2"))}))})})))}function Vt(e){var t=e.tourneyId,a=it(t),l=Object(f.a)(a,2),c=l[0].tieBreaks,u=l[1],i=Object(n.useState)(null),o=Object(f.a)(i,2),s=o[0],m=o[1];function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=Object(Re.a)(s);c.includes(a(e))?(u({type:"DEL_TIEBREAK",id:a(e),tourneyId:t}),m(null)):u({type:"ADD_TIEBREAK",id:a(e),tourneyId:t})}function p(e){var a=c.indexOf(s);u({type:"MOVE_TIEBREAK",oldIndex:a,newIndex:a+e,tourneyId:t})}return r.a.createElement("div",null,r.a.createElement("h3",null,"Selected tiebreak methods"),r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{onClick:function(){return d()},disabled:null===s},"Toggle"),r.a.createElement("button",{onClick:function(){return p(-1)},disabled:null===s},"Move up"),r.a.createElement("button",{onClick:function(){return p(1)},disabled:null===s},"Move down"),r.a.createElement("button",{onClick:function(){return m(null)},disabled:null===s},"Done")),r.a.createElement("ol",null,c.map(function(e){return r.a.createElement("li",{key:e,className:s===e?"selected":""},ke[e].name,r.a.createElement("button",{onClick:function(){return m(s===e?null:e)},disabled:null!==s&&s!==e},s===e?"Done":"Edit"))})),r.a.createElement("h3",null,"Available tiebreak methods"),r.a.createElement("ol",null,ke.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:c.includes(t)?"enabled":"disabled"},e.name),!c.includes(t)&&r.a.createElement("button",{onClick:function(){return d(t)}},"Add"))})))}var Wt=function(e){var t=e.tourneyId;return r.a.createElement(Mt.e,null,r.a.createElement(Mt.b,null,r.a.createElement(Mt.a,null,"Scores"),r.a.createElement(Mt.a,null,"Edit tiebreak rules")),r.a.createElement(Mt.d,null,r.a.createElement(Mt.c,null,r.a.createElement(Ut,{tourneyId:Number(t)})),r.a.createElement(Mt.c,null,r.a.createElement(Vt,{tourneyId:Number(t)}))))},Jt=a(28);function Kt(e){var t=e.tourneyId,a=it(t=Number(t)),n=Object(f.a)(a,2),l=n[0].players,c=n[1],u=de(),i=u.playerState,o=u.getPlayer;function s(e){var a=Number(e.target.value);e.target.checked?c({type:"SET_TOURNEY_PLAYERS",players:l.concat([a]),tourneyId:t}):c({type:"SET_TOURNEY_PLAYERS",players:l.filter(function(e){return e!==a}),tourneyId:t})}return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return c({type:"SET_TOURNEY_PLAYERS",players:i.players.map(function(e){return e.id}),tourneyId:t})}},"Select all"),r.a.createElement("button",{onClick:function(){return c({type:"SET_TOURNEY_PLAYERS",players:[],tourneyId:t})}},"Select none"),r.a.createElement("table",null,r.a.createElement("caption",null,"Select players"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Select"))),r.a.createElement("tbody",null,i.players.map(function(e){var t=e.id;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,o(t).firstName),r.a.createElement("td",null,o(t).lastName),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",value:t,checked:l.includes(t),onChange:s})))}))),r.a.createElement(Lt,null))}function Gt(e){var t=e.tourneyId,a=it(t=Number(t)),l=Object(f.a)(a,2),c=l[0],u=c.players,i=c.byeQueue,o=c.roundList,s=l[1],m=de().getPlayer,d=Object(n.useState)(0===u.length),p=Object(f.a)(d,2),E=p[0],y=p[1];return r.a.createElement(At,null,r.a.createElement(kt,null,r.a.createElement("button",{onClick:function(){return y(!0)}},"Edit player roster"),r.a.createElement("table",null,r.a.createElement("caption",null,"Current roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Options"))),r.a.createElement("tbody",null,u.map(function(e){return r.a.createElement("tr",{key:e,className:m(e).type+" player"},r.a.createElement("td",null,m(e).firstName),r.a.createElement("td",null,m(e).lastName),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return s({type:"SET_BYE_QUEUE",byeQueue:i.concat([e]),tourneyId:t})},disabled:i.includes(e)},"Bye signup")))})))),r.a.createElement(kt,null,r.a.createElement("h3",null,"Bye queue"),0===i.length&&r.a.createElement("p",null,"No players have signed up for a bye round."),r.a.createElement("ol",null,i.map(function(e){return r.a.createElement("li",{key:e,className:Ae(e,o)?"disabled":""},m(e).firstName," ",m(e).lastName,r.a.createElement("button",{onClick:function(){return s({type:"SET_BYE_QUEUE",byeQueue:i.filter(function(t){return e!==t}),tourneyId:t})}},"Remove"))}))),r.a.createElement(Jt.a,{isOpen:E},r.a.createElement("button",{onClick:function(){return y(!1)}},"Done"),r.a.createElement(Kt,{tourneyId:t})))}var Qt=a(79),Ft=a.n(Qt);function qt(e){var t=e.tourneyId,a=it(Number(t)),l=Object(f.a)(a,1)[0],c=l.tieBreaks,u=l.roundList,i=de().getPlayer,o=Object(n.useMemo)(function(){var e=xe(c,u),t=Object(f.a)(e,1)[0],a=t.reduce(function(e,t){return Object(x.a)(String(t.id),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ae(e,t,a).reduce(function(t,a){var n=a.players.filter(function(t){return t!==e})[0],r=a.players.indexOf(e),l=a.result[r];return Object(D.a)(Object(_e.a)(String(n)),Object(w.a)(Object(Re.a)(0),Object(Ie.a)(l)),t)},{})}(t.id,u),e)},{});return[t,a]},[u,c]),s=Object(f.a)(o,2),m=s[0],d=s[1];function p(e){var t=function(e,t){var a=ae(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),n=a[0],r=n.players.indexOf(e),l=n.origRating[r],c=Object(je.a)(a),u=c.players.indexOf(e);return[l,c.newRating[u]]}(e,u),a=Object(f.a)(t,2),n=a[0],r=a[1],l=vt()(r-n).format("+0");return"".concat(r,"\xa0(").concat(l,")")}return r.a.createElement("table",{className:Ht.a.table},r.a.createElement("caption",null,"Crosstable"),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"Name"),m.map(function(e,t){return r.a.createElement("th",{key:t},t+1)}),r.a.createElement("th",null,"Score"),r.a.createElement("th",null,"Rating")),m.map(function(e,t){return r.a.createElement("tr",{key:t,className:Ht.a.row},r.a.createElement("th",{scope:"col"},t+1),r.a.createElement("th",{scope:"row",className:Ht.a.playerName},i(e.id).firstName,"\xa0",i(e.id).lastName),m.map(function(t,a){return r.a.createElement("td",{key:a,className:"table__number"},function(e,t){if(e===t)return r.a.createElement(Ft.a,null);var a=d[String(e)][t];return void 0===a?null:vt()(a).format("1/2")}(e.id,t.id))}),r.a.createElement("td",{className:"table__number"},vt()(e.score).format("1/2")),r.a.createElement("td",{className:"table__number"},p(e.id)))})))}var zt=a(80),Xt=a.n(zt),Zt=a(81),$t=a.n(Zt),ea=a(52),ta=a.n(ea),aa=a(82),na=a.n(aa),ra=a(83),la=a.n(ra),ca=a(84),ua=a.n(ca),ia=a(85),oa=a.n(ia),sa=a(53),ma=a.n(sa);function da(e){var t=e.matchId,a=e.color,n=e.tourneyId,l=e.roundId,c=ot(n,l),u=c.tourney,i=c.matchList,o=de(),s=o.playerState,m=o.getPlayer,d=ue(i,t),p=Ye(d.players[a],s.players,s.avoid,u.roundList,l),E=p.colorBalance,f=E<0?"White +"+Math.abs(E):E>0?"Black +"+E:"Even";return r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,p.profile.firstName," ",p.profile.lastName),r.a.createElement("dt",null,"Score"),r.a.createElement("dd",null,p.score),r.a.createElement("dt",null,"Rating"),r.a.createElement("dd",{"data-testid":"rating-".concat(p.id)},d.origRating[a]," (",vt()(d.newRating[a]-d.origRating[a]).format("+0"),")"),r.a.createElement("dt",null,"Color balance"),r.a.createElement("dd",null,f),r.a.createElement("dt",null,"Has had a bye round"),r.a.createElement("dd",null,p.hasHadBye?"Yes":"No"),r.a.createElement("dt",null,"Opponent history"),r.a.createElement("dd",null,r.a.createElement("ol",null,p.opponentHistory.map(function(e){return r.a.createElement("li",{key:e},m(e).firstName," ",m(e).lastName)}))))}var pa=a(35),Ea=a.n(pa);a(117);function fa(e){var t=e.pos,a=e.match,l=e.tourneyId,c=e.roundId,u=e.selectedMatch,i=e.setSelectedMatch,o=ot(l,c),s=o.tourney,m=o.dispatch,d=de(),p=d.playerDispatch,E=d.getPlayer,y=Object(n.useState)(!1),b=Object(f.a)(y,2),g=b[0],h=b[1],O=a.result[0]>a.result[1]?"WHITE":a.result[1]>a.result[0]?"BLACK":a.result.every(function(e){return.5===e})?"DRAW":"NOTSET",N=E(a.players[0]).firstName+" "+E(a.players[0]).lastName,v=E(a.players[1]).firstName+" "+E(a.players[1]).lastName;function j(e){var t=function(){switch(e.currentTarget.value){case"WHITE":return[1,0];case"BLACK":return[0,1];case"DRAW":return[.5,.5];case"NOTSET":return[0,0];default:throw new Error}}(),n=E(a.players[q]),r=E(a.players[F]),u="NOTSET"===e.currentTarget.value?a.origRating:function(e,t,a){var n=new we.a(He(t[q])),r=new we.a(He(t[F])),l=[n.getExpected(e[q],e[F]),r.getExpected(e[F],e[q])];return[n.updateRating(l[q],a[q],e[q]),r.updateRating(l[F],a[F],e[F])].map(function(e){return e<100?100:e})}(a.origRating,[n.matchCount,r.matchCount],t);p({type:"SET_PLAYER_RATING",id:n.id,rating:u[q]}),p({type:"SET_PLAYER_RATING",id:r.id,rating:u[F]}),0===a.result.reduce(function(e,t){return e+t})&&(p({type:"SET_PLAYER_MATCHCOUNT",id:n.id,matchCount:n.matchCount+1}),p({type:"SET_PLAYER_MATCHCOUNT",id:r.id,matchCount:r.matchCount+1})),m({type:"SET_MATCH_RESULT",tourneyId:l,roundId:c,matchId:a.id,result:t,newRating:u})}return r.a.createElement("tr",{className:a.id===u?"selected":""},r.a.createElement("th",{className:"table__number row__id",scope:"row"},t+1),r.a.createElement("td",{className:"table__player row__player","data-testid":"match-".concat(t,"-white")},N," ","WHITE"===O&&r.a.createElement("span",{role:"img","aria-label":"Winner"},"\ud83c\udfc6")),r.a.createElement("td",{className:"table__player row__player","data-testid":"match-".concat(t,"-black")},v," ","BLACK"===O&&r.a.createElement("span",{role:"img","aria-label":"Winner"},"\ud83c\udfc6")),r.a.createElement("td",{className:"data__input row__controls"},r.a.createElement("select",{onBlur:j,onChange:j,disabled:a.players.includes(z),value:O,className:pa.winnerSelect},r.a.createElement("option",{value:"NOTSET"},"Select a winner"),r.a.createElement("option",{value:"WHITE"},N," won"),r.a.createElement("option",{value:"BLACK"},v," won"),r.a.createElement("option",{value:"DRAW"},"Draw"))),r.a.createElement("td",{className:"data__input row__controls"},u!==a.id?r.a.createElement("button",{className:"iconButton",onClick:function(){return i(a.id)},title:"Edit match"},r.a.createElement(ua.a,null)):r.a.createElement("button",{className:"iconButton",onClick:function(){return i(null)},title:"End editing match"},r.a.createElement(ma.a,null)),r.a.createElement("button",{className:"iconButton",onClick:function(){return h(!0)},title:"Open match information."},r.a.createElement(oa.a,null),r.a.createElement(_t.a,null,"View information for match:"," ",N," versus ",v)),r.a.createElement(Jt.a,{isOpen:g},r.a.createElement("button",{onClick:function(){return h(!1)}},"close"),r.a.createElement("p",null,s.name),r.a.createElement("p",null,"Round ",c+1,", match ",t+1),r.a.createElement(At,null,r.a.createElement(kt,null,r.a.createElement(da,{matchId:a.id,color:0,tourneyId:l,roundId:c})),r.a.createElement(kt,null,r.a.createElement(da,{matchId:a.id,color:1,tourneyId:l,roundId:c}))))))}function ya(e){var t=e.roundId,a=e.tourneyId,l=ot(a,t),c=l.matchList,u=l.dispatch,i=de(),o=i.playerDispatch,s=i.getPlayer,m=Object(n.useState)(null),d=Object(f.a)(m,2),p=d[0],E=d[1];if(!c)throw new Error("Round "+t+" does not exist.");function y(e,n){var r,l,i=(l=e,(r=c).indexOf(ue(r,l)));u({type:"MOVE_MATCH",tourneyId:a,roundId:t,oldIndex:i,newIndex:i+n>=0?i+n:0})}return r.a.createElement(At,{"data-testid":"round-"+t},r.a.createElement(kt,null,r.a.createElement("div",{className:Ea.a.toolbar},r.a.createElement("button",{className:"danger iconButton",onClick:function(){return function(e){var n=ue(c,e);0!==n.result.reduce(function(e,t){return e+t})&&n.players.forEach(function(e,t){o({type:"SET_PLAYER_MATCHCOUNT",id:e,matchCount:s(e).matchCount-1}),o({type:"SET_PLAYER_RATING",id:e,rating:n.origRating[t]})}),u({type:"DEL_MATCH",tourneyId:a,roundId:t,matchId:e}),E(null)}(p)},disabled:null===p},r.a.createElement(I.a,null)," Unmatch"),r.a.createElement("button",{className:"iconButton",onClick:function(){u({type:"SWAP_COLORS",tourneyId:a,roundId:t,matchId:p})},disabled:null===p},r.a.createElement(ta.a,null)," Swap colors"),r.a.createElement("button",{className:"iconButton",onClick:function(){return y(p,-1)},disabled:null===p},r.a.createElement(na.a,null)," Move up"),r.a.createElement("button",{className:"iconButton",onClick:function(){return y(p,1)},disabled:null===p},r.a.createElement(la.a,null)," Move down")),0===c.length&&r.a.createElement("p",null,"No players matched yet."),r.a.createElement("table",{className:Ea.a.table},c.length>0&&r.a.createElement("caption",null,"Round ",t+1," results"),r.a.createElement("tbody",null,c.length>0&&r.a.createElement("tr",null,r.a.createElement("th",{className:"row__id",scope:"col"},"#"),r.a.createElement("th",{className:"row__player",scope:"col"},"White"),r.a.createElement("th",{className:"row__player",scope:"col"},"Black"),r.a.createElement("th",{className:"row__result",scope:"col"},"Result"),r.a.createElement("th",{className:"row__controls",scope:"col"},"Controls")),c.map(function(e,n){return r.a.createElement(fa,{key:e.id,pos:n,match:e,tourneyId:a,roundId:t,selectedMatch:p,setSelectedMatch:E})})))),r.a.createElement(kt,null))}var ba=a(86),ga=a.n(ba);function ha(e){var t=e.tourneyId,a=e.roundId,l=e.stagedPlayers,c=e.setStagedPlayers,u=ot(t,a),i=u.dispatch,o=u.unmatched,s=de(),m=s.playerState,d=s.getPlayer,p=Et(),E=Object(f.a)(p,1)[0].byeValue,y=Object(n.useState)(!1),b=Object(f.a)(y,2),g=b[0],h=b[1];var O=o.length%2!==0?Object(P.a)(z,o):o;return 0===o.length?null:r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return i({type:"AUTO_PAIR",unpairedPlayers:o,tourneyId:t,roundId:a,playerState:m,byeValue:E})},disabled:0===o.length},"Auto-pair unmatched players"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return h(!0)}},"Add or remove players from the roster."),r.a.createElement("ul",null,O.map(function(e){return r.a.createElement("li",{key:e},l.includes(e)?r.a.createElement("button",{disabled:!0},"Selected"):r.a.createElement("button",{disabled:!l.includes(null),onClick:function(){return t=e,void(null===l[q]?c(function(e){return Object(W.a)(Object(M.a)(q),t,e)}):null===l[F]&&c(function(e){return Object(W.a)(Object(M.a)(F),t,e)}));var t}},r.a.createElement(ga.a,null),r.a.createElement(_t.a,null,"Select ",d(e).firstName," ",d(e).lastName))," ",d(e).firstName," ",d(e).lastName)})),r.a.createElement(Jt.a,{isOpen:g},r.a.createElement("button",{onClick:function(){return h(!1)}},"Done"),r.a.createElement(Kt,{tourneyId:t})))}var Oa=a(63),Na=a.n(Oa);function va(e){var t=e.tourneyId,a=e.roundId,l=e.stagedPlayers,c=e.setStagedPlayers,u=de(),i=u.playerState,o=u.getPlayer,s=i.players,m=it(t)[1],d=Et(),p=Object(f.a)(d,1)[0].byeValue,E=Object(f.a)(l,2),y=E[0],b=E[1];function g(e){c(function(t){return Object(W.a)(Object(M.a)(e),null,t)})}return r.a.createElement("div",null,r.a.createElement("h2",null,"Selected for matching:"),r.a.createElement("p",null,"White:"," ",null!==y&&r.a.createElement(n.Fragment,null,o(y).firstName," ",o(y).lastName," ",r.a.createElement("button",{onClick:function(){return g(q)}},r.a.createElement(Na.a,null)," Remove"))),r.a.createElement("p",null,"Black:"," ",null!==b&&r.a.createElement(n.Fragment,null,o(b).firstName," ",o(b).lastName," ",r.a.createElement("button",{onClick:function(){return g(F)}},r.a.createElement(Na.a,null)," Remove"))),r.a.createElement("button",{onClick:function(){return c(function(e){return[e[F],e[q]]})},disabled:l.every(function(e){return null===e})},r.a.createElement(ta.a,null)," Swap colors")," ",r.a.createElement("button",{onClick:function(){m({type:"MANUAL_PAIR",pair:[y,b],tourneyId:t,roundId:a,byeValue:p,players:s}),c([null,null])},disabled:l.includes(null)},r.a.createElement(ma.a,null)," Match selected")," ")}function ja(e){var t=e.playerId,a=e.tourneyId,n=e.roundId,l=it(a),c=Object(f.a)(l,1)[0].roundList,u=de(),i=u.playerState,o=u.getPlayer,s=Ye(t,i.players,i.avoid,c,n),m=s.profile,d=s.rating,p=s.score,E=s.colorBalance,y=s.hasHadBye,b=s.opponentHistory,g=s.avoidList,h=E<0?"White +"+Math.abs(E):E>0?"Black +"+E:"Even";return r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,m.firstName," ",m.lastName),r.a.createElement("p",null,"Score: ",p),r.a.createElement("p",null,"Rating: ",d),r.a.createElement("p",null,"Color balance: ",h),r.a.createElement("p",null,"Has had a bye round: ",y?"Yes":"No"),r.a.createElement("p",null,"Opponent history:"),r.a.createElement("ol",null,b.map(function(e){return r.a.createElement("li",{key:e},o(e).firstName," ",o(e).lastName)})),r.a.createElement("p",null,"Players to avoid:"),r.a.createElement("ol",null,g.map(function(e){return r.a.createElement("li",{key:e},o(e).firstName," ",o(e).lastName)})))}function _a(e){var t=e.tourneyId,a=e.roundId,l=Object(n.useState)([null,null]),c=Object(f.a)(l,2),u=c[0],i=c[1],o=de().playerState,s=it(t),m=Object(f.a)(s,1)[0],d=r.a.useMemo(function(){if(u.includes(null))return null;var e=function(e){return Ye(e,o.players,o.avoid,m.roundList,a)},t=et(e(u[0]),e(u[1]));return vt()(t/$e).format("%")},[o.avoid,o.players,a,m.roundList,u]);return r.a.createElement(At,null,r.a.createElement(kt,null,r.a.createElement(ha,{tourneyId:t,roundId:a,stagedPlayers:u,setStagedPlayers:i})),r.a.createElement(kt,null,r.a.createElement(va,{tourneyId:t,roundId:a,stagedPlayers:u,setStagedPlayers:i}),r.a.createElement(At,null,u.map(function(e){return null!==e&&r.a.createElement(kt,{key:e},r.a.createElement(ja,{playerId:e,tourneyId:t,roundId:a}))})),"Match ideal: ",d))}function Ra(e){var t=e.tourneyId,a=e.roundId,l=ot(t=Number(t),a=Number(a)).unmatched,c=Object(n.useState)(0),u=Object(f.a)(c,2),i=u[0],o=u[1];return Object(n.useEffect)(function(){l.length>0?o(1):o(0)},[l.length]),r.a.createElement(Mt.e,{index:i,onChange:function(e){return o(e)}},r.a.createElement(Mt.b,null,r.a.createElement(Mt.a,null,r.a.createElement(Xt.a,null)," Matches"),r.a.createElement(Mt.a,{disabled:0===l.length},r.a.createElement($t.a,null)," Unmatched players")),r.a.createElement(Mt.d,null,r.a.createElement(Mt.c,null,r.a.createElement(ya,{tourneyId:t,roundId:a})),r.a.createElement(Mt.c,null,r.a.createElement(_a,{tourneyId:t,roundId:a}))))}function Ia(e){var t=ut(),a=Object(f.a)(t,2),l=a[0],c=a[1],u=Et(),i=Object(f.a)(u,2),o=i[0],s=i[1],m=de(),d=m.playerState,p=m.playerDispatch,E=Object(n.useState)(""),y=Object(f.a)(E,2),b=y[0],g=y[1],h=Object(n.useMemo)(function(){return{options:o,tourneys:l,playerState:d}},[o,l,d]);function O(e){c({type:"LOAD_STATE",state:e.tourneys}),s({type:"LOAD_STATE",state:e.options}),p({type:"LOAD_STATE",state:e.playerState}),window.alert("Data loaded!")}return Object(n.useEffect)(function(){g(JSON.stringify(h,null,4))},[h]),r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Bye options"),"Select how many points a bye is worth:"," ",r.a.createElement("label",null,"1",r.a.createElement("input",{type:"radio",checked:1===o.byeValue,onChange:function(){return s({type:"SET_BYE_VALUE",byeValue:1})}}))," ",r.a.createElement("label",null,"\xbd",r.a.createElement("input",{type:"radio",checked:.5===o.byeValue,onChange:function(){return s({type:"SET_BYE_VALUE",byeValue:.5})}})))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Manage data"),r.a.createElement("p",null,r.a.createElement("a",{href:"data:application/json,"+encodeURIComponent(JSON.stringify(h)),download:"chessahoochee.json"},"Download all data")),r.a.createElement("label",null,"Load data file:"," ",r.a.createElement("input",{type:"file",id:"file",onChange:function(e){e.preventDefault();var t=new FileReader;t.onload=function(e){var t=e.target.result;O(JSON.parse(t))},t.readAsText(e.currentTarget.files[0]),e.currentTarget.value=""}}))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Reset all changes"),r.a.createElement("button",{onClick:function(e){e.preventDefault(),O({options:mt,playerState:{players:ie.playerList.map(function(e){return Z(e)}),avoid:ie.avoidList},tourneys:Ne})}},"Reload demo data")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),O(JSON.parse(b))}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Advanced: manually edit data"),r.a.createElement("textarea",{className:"json",rows:25,cols:50,value:b,name:"playerdata",onChange:function(e){return g(e.currentTarget.value)},spellCheck:!1}),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Load"})))))}var Sa=a(56),Ca=a.n(Sa),wa=function(){return r.a.createElement("div",{className:Ca.a.caution},r.a.createElement("p",{className:Ca.a.caution__text},r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f"),"\xa0 This is an unstable demo build. \xa0",r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f")," ","Want to help make it better? Head to the"," ",r.a.createElement("span",{role:"img","aria-label":"finger pointing right"},"\ud83d\udc49"),"\xa0",r.a.createElement("a",{className:Ca.a.caution__link,href:"https://github.com/johnridesabike/chessahoochee"},"Git repository"),"."))};vt.a.register("format","half",{regexps:{format:/(1\/2)/,unformat:/(1\/2)/},format:function(e,t,a){var n=Math.floor(e),r=e-n;return.5===r?r="\xbd":0===r&&(r=""),0===n&&r&&(n=""),String(n)+r},unformat:function(e){return Number(e)}});a(118);var ka=a(37),Aa=o()(),Ta=Object(u.e)(Aa);var La=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(wa,null),r.a.createElement(u.b,{history:Ta},r.a.createElement("nav",{className:"header"},r.a.createElement(u.a,{to:"tourneys",className:ka.link},"Tournaments"),r.a.createElement(u.a,{to:"players",className:ka.link},"Players"),r.a.createElement(u.a,{to:"options",className:ka.link},"Options"),r.a.createElement(u.a,{to:"about",className:ka.link},"About")),r.a.createElement("main",{className:"content"},r.a.createElement(ft,null,r.a.createElement(pe,null,r.a.createElement(st,null,r.a.createElement(u.d,null,r.a.createElement(Ot,{path:"tourneys"},r.a.createElement(ht,{path:"/"}),r.a.createElement(gt,{path:":tourneyId"},r.a.createElement(Gt,{path:"/"}),r.a.createElement(qt,{path:"crosstable"}),r.a.createElement(Wt,{path:"scores"}),r.a.createElement(Ra,{path:":roundId"}))),r.a.createElement(Bt,{path:"players"},r.a.createElement(Dt,{path:"/"}),r.a.createElement(jt,{path:":playerId"})),r.a.createElement(Ia,{path:"options"}),r.a.createElement(s,{path:"about"}),r.a.createElement(m,{default:!0}),r.a.createElement(u.c,{from:"/",to:"tourneys",noThrow:!0}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(n.StrictMode,null,r.a.createElement(La,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},19:function(e,t,a){e.exports={table:"scores_table__22BFZ",topHeader:"scores_topHeader__2RVRR",row:"scores_row__bmBzX",playerName:"scores_playerName__3ghv9",rank:"scores_rank__3AxBb"}},31:function(e){e.exports={playerList:[{id:0,type:"person",firstName:"Bruce",lastName:"Wayne",rating:1998,matchCount:9},{id:1,type:"person",firstName:"Dick",lastName:"Grayson",rating:1909,matchCount:9},{id:2,type:"person",firstName:"Alfred",lastName:"Pennyworth",rating:1999,matchCount:9},{id:3,type:"person",firstName:"Barbara",lastName:"Gordon",rating:1345,matchCount:7},{id:4,type:"person",firstName:"Kate",lastName:"Kane",rating:1538,matchCount:9},{id:5,type:"person",firstName:"Selina",lastName:"Kyle",rating:1495,matchCount:9},{id:6,type:"person",firstName:"Jason",lastName:"Todd",rating:1101,matchCount:7},{id:7,type:"person",firstName:"James",lastName:"Gordon",rating:1167,matchCount:7},{id:8,type:"person",firstName:"Helena",lastName:"Wayne",rating:1087,matchCount:7},{id:9,type:"person",firstName:"Joker",lastName:"",rating:1538,matchCount:1},{id:10,type:"person",firstName:"Harley",lastName:"Quinn",rating:1648,matchCount:1},{id:11,type:"person",firstName:"Victor",lastName:"Fries",rating:862,matchCount:1},{id:12,type:"person",firstName:"Oswald",lastName:"Cobblepot",rating:1812,matchCount:1},{id:13,type:"person",firstName:"Ra's",lastName:"al Ghul",rating:1404,matchCount:1},{id:14,type:"person",firstName:"Pamela",lastName:"Isley",rating:965,matchCount:1},{id:15,type:"person",firstName:"Edward",lastName:"Nigma",rating:948,matchCount:1},{id:16,type:"person",firstName:"Jonathan",lastName:"Crane",rating:899,matchCount:1},{id:17,type:"person",firstName:"Harvey",lastName:"Dent",rating:1649,matchCount:1},{id:18,type:"person",firstName:"Hugo",lastName:"Strange",rating:800,matchCount:0}],avoidList:[[3,7],[9,10],[8,0]]}},33:function(e,t,a){e.exports={tournament:"tournament_tournament__2nSxH",header:"tournament_header__9nZzI",sidebar:"tournament_sidebar__21G-s",content:"tournament_content__1mdG3"}},35:function(e,t,a){e.exports={table:"round_table__2JmnE",winnerSelect:"round_winnerSelect__317oT",toolbar:"round_toolbar__3CWVM"}},37:function(e,t,a){e.exports={link:"App_link__TB6Cl"}},49:function(e){e.exports=[{name:"Wayne Manor Open",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,7,8],roundList:[[{id:"6-1",players:[6,1],result:[0,1],origRating:[1238,2108],newRating:[1236,2109]},{id:"7-2",players:[7,2],result:[0,1],origRating:[1049,2260],newRating:[1049,2260]},{id:"4-3",players:[4,3],result:[.5,.5],origRating:[1527,1755],newRating:[1553,1722]},{id:"5-0",players:[5,0],result:[0,1],origRating:[1284,1881],newRating:[1278,1887]},{id:"8--1",players:[8,-1],result:[1,0],origRating:[831,0],newRating:[831,0]}],[{id:"1-4",players:[1,4],result:[1,0],origRating:[2109,1685],newRating:[2122,1672]},{id:"0-8",players:[0,8],result:[1,0],origRating:[1887,831],newRating:[1887,830]},{id:"2-5",players:[2,5],result:[0,1],origRating:[2260,1278],newRating:[2101,1437]},{id:"3-6",players:[3,6],result:[1,0],origRating:[1545,1236],newRating:[1574,1207]},{id:"7--1",players:[7,-1],result:[1,0],origRating:[1049,0],newRating:[1049,0]}],[{id:"2-0",players:[2,0],result:[0,1],origRating:[2101,1887],newRating:[1998,1990]},{id:"8-1",players:[8,1],result:[1,0],origRating:[830,2122],newRating:[990,2008]},{id:"5-3",players:[5,3],result:[1,0],origRating:[1437,1574],newRating:[1529,1464]},{id:"4-7",players:[4,7],result:[0,1],origRating:[1672,1049],newRating:[1542,1244]},{id:"6--1",players:[6,-1],result:[1,0],origRating:[1207,0],newRating:[1207,0]}],[{id:"0-4",players:[0,4],result:[1,0],origRating:[1990,1542],newRating:[1998,1534]},{id:"1-7",players:[1,7],result:[1,0],origRating:[2008,1244],newRating:[2009,1243]},{id:"8-5",players:[8,5],result:[0,1],origRating:[990,1529],newRating:[983,1534]},{id:"6-2",players:[6,2],result:[0,1],origRating:[1207,1998],newRating:[1205,1999]},{id:"3--1",players:[3,-1],result:[1,0],origRating:[1464,0],newRating:[1464,0]}]]},{name:"The Battle for Gotham City",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,7],roundList:[[{id:"15-0",players:[15,0],result:[0,1],origRating:[950,1998],newRating:[948,1998]},{id:"16-2",players:[16,2],result:[0,1],origRating:[900,1999],newRating:[899,1999]},{id:"17-1",players:[17,1],result:[1,0],origRating:[850,2009],newRating:[1649,1909]},{id:"13-5",players:[13,5],result:[.5,.5],origRating:[1050,1534],newRating:[1404,1495]},{id:"12-3",players:[12,3],result:[1,0],origRating:[1100,1464],newRating:[1812,1345]},{id:"14-4",players:[14,4],result:[0,1],origRating:[1e3,1534],newRating:[965,1538]},{id:"10-7",players:[10,7],result:[1,0],origRating:[1200,1242],newRating:[1648,1167]},{id:"11-9",players:[11,9],result:[0,1],origRating:[1150,1250],newRating:[862,1538]},{id:"8-6",players:[8,6],result:[1,0],origRating:[983,1205],newRating:[1087,1101]}],[]]}]},50:function(e){e.exports={byeValue:1}},56:function(e,t,a){e.exports={caution:"caution_caution__17Bbq",caution__text:"caution_caution__text__2ptRS",caution__link:"caution_caution__link__X_K5Y"}},60:function(e,t,a){e.exports={panels:"utility_panels__LN75I",panel:"utility_panel__2GOiH"}},94:function(e,t,a){e.exports=a(119)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.783cef2b.chunk.js.map