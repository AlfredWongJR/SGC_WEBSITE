(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(37),c=a.n(l),u=(a(100),a(6)),i=a(64),o=a.n(i),s=function(e){return r.a.createElement("p",{"data-testid":"about"},"This is an early, proof-of-concept, demo of a chess tournament manager."," ",r.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"You can find out more here."))},m=function(e){return r.a.createElement("div",{"data-testid":"404"},r.a.createElement("p",null,"Page not found."))},d=a(54),p=a.n(d),E=a(65),f=a(2),y=a(89),b=a(56),g=a.n(b),h=a(66),O=a.n(h),N=a(67),v=a.n(N),j=a(68),_=a.n(j),R=a(69),I=a.n(R),C=a(70),w=a.n(C),S=a(71),A=a.n(S),k=a(72),T=a.n(k),L=a(73),D=a.n(L),B=a(74),P=a.n(B),x=a(75),M=a.n(x),U=a(76),Y=a.n(U),H=a(77),V=a.n(H),W=a(78),J=a.n(W),K=a(79),G=a.n(K),Q=a(80),F=a.n(Q),q=a(81),z=a.n(q),X=a(82),Z=a.n(X),$=a(83),ee=a.n($),te={Alert:O.a,ArrowDown:v.a,ArrowUp:_.a,Check:I.a,ChevronLeft:w.a,ChevronRight:A.a,Edit:T.a,Info:D.a,Layers:Z.a,List:P.a,Plus:M.a,Repeat:Y.a,Settings:ee.a,Trash:V.a,UserMinus:J.a,UserPlus:G.a,Users:F.a,X:z.a},ae=a(146),ne=a(90),re=a(123),le=a(124),ce=a(125),ue=a(85),ie=a(142),oe=a(126),se=a(44),me=a(145),de=a(143),pe=a(127),Ee=a(128),fe=a(88),ye=a(129),be=a(130);function ge(e,t){var a=JSON.parse(localStorage.getItem(e))||t;return localStorage.setItem(e,JSON.stringify(a)),a}var he=a(122),Oe=a(84),Ne=1,ve=0,je=-1;function _e(e){return{id:e.id,players:e.players,result:e.result||[0,0],origRating:e.origRating,newRating:e.newRating}}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||0,type:e.type||"person",firstName:e.firstName||"",lastName:e.lastName||"",rating:e.rating||0,matchCount:e.matchCount||0}}var Ie=Re({id:-1,firstName:"Bye",lastName:"Player",type:"dummy"});function Ce(e){return!function(e){return e.players.includes(je)}(e)}function we(e){return e!==je}function Se(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(null===a?t:t.slice(0,a+1)).reduce(function(e,t){return e.concat(t)},[]).filter(function(t){return t.players.includes(e)})}Object.freeze(Ie);var Ae=Object(ae.a)(he.a,Oe.a);function ke(e,t){if(t===je)return Ie;var a=e.filter(function(e){return e.id===t})[0];return a||Re({id:t,firstName:"Anonymous",type:"missing"})}function Te(e,t){return t.filter(function(t){return t.includes(e)}).reduce(function(e,t){return t.concat(e)},[]).filter(function(t){return t!==e})}function Le(e){var t=Math.ceil(Math.log2(e));return Number.isFinite(t)?t:0}function De(e,t){return e.filter(function(e){return e.id===t})[0]}var Be=a(30),Pe={players:Be.playerList.map(function(e){return Re(e)}),avoid:Be.avoidList};function xe(e,t){var a=Object(ae.a)(Object(ne.a)(function(e){return e.id}),Object(re.a)(function(e,t){return t-e}),le.a,ce.a);switch(t.type){case"ADD_PLAYER":return Object(ue.a)(Object(ie.a)(["players"]),Object(oe.a)(Re({firstName:t.firstName,lastName:t.lastName,rating:t.rating,id:a(e.players)})),e);case"SET_PLAYER":return Object(se.a)("players",Object(ue.a)(Object(me.a)(Object(de.a)(Object(pe.a)("id",t.id),e.players)),Object(Ee.a)({firstName:t.firstName,lastName:t.lastName,rating:t.rating,matchCount:t.matchCount}),e.players),e);case"DEL_PLAYER":return Object(ue.a)(Object(ie.a)(["players"]),Object(fe.a)(function(e){return e.id!==t.id}),Object(ye.a)(Object(ie.a)(["avoid"]),Object(fe.a)(function(e){return!e.includes(t.id)}),e));case"SET_PLAYER_MATCHCOUNT":return Object(ye.a)(Object(ie.a)(["players",Object(de.a)(Object(pe.a)("id",t.id),e.players),"matchCount"]),t.matchCount,e);case"SET_PLAYER_RATING":return Object(ye.a)(Object(ie.a)(["players",Object(de.a)(Object(pe.a)("id",t.id),e.players),"rating"]),t.rating,e);case"ADD_AVOID_PAIR":return Object(ue.a)(Object(ie.a)(["avoid"]),Object(oe.a)(t.pair),e);case"DEL_AVOID_PAIR":return Object(ue.a)(Object(ie.a)(["avoid"]),Object(fe.a)(function(e){return!(e.includes(t.pair[0])&&e.includes(t.pair[1]))}),e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type")}}var Me=Object(n.createContext)(null);function Ue(){var e=Object(n.useContext)(Me),t=Object(f.a)(e,2),a=t[0];return{playerState:a,playerDispatch:t[1],getPlayer:Object(be.a)(ke)(a.players)}}function Ye(e){var t=ge("players",Pe),a=Object(n.useReducer)(xe,t),r=Object(f.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)(function(){localStorage.setItem("players",JSON.stringify(l))},[l]),Object(n.createElement)(Me.Provider,{value:[l,c]},e.children)}var He=a(137),Ve=a(138),We=a(141),Je=a(139),Ke=a(140),Ge=a(136),Qe=a(149),Fe=a(48),qe=a(33),ze=a(42),Xe=a(144),Ze=a(134),$e=a(148),et=a(135),tt=a(86),at=a.n(tt),nt=a(131),rt=a(132),lt=a(147),ct=a(133),ut=a(55),it=a.n(ut),ot=[{name:"Modified median",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=ft(e,t,a),r=Ae(n);return Object(nt.a)(r)}},{name:"Solkoff",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=ft(e,t,a);return Object(nt.a)(n)}},{name:"Cumulative score",func:pt},{name:"Cumulative of opposition",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=mt(e,t,a).filter(we).map(function(e){return pt(e,t,a)});return Object(nt.a)(n)}},{name:"Most black",func:Et}];function st(e,t){return Se(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat(t.players)},[]).includes(je)}function mt(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Se(e,t,a).reduce(function(e,t){return e.concat(t.players)},[]).filter(function(t){return t!==e})}function dt(e,t){var a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Se(e,t,a).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return Object(nt.a)(a)}function pt(e,t){var a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Se(e,t,a).filter(Ce).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat([Object(rt.a)(e)+t])},[0]);return Object(nt.a)(a)}function Et(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Se(e,t,a).filter(Ce).reduce(function(t,a){return a.players[ve]===e?t.concat(-1):t.concat(1)},[0]);return Object(nt.a)(n)}function ft(e,t,a){var n=mt(e,t,a).filter(we).map(function(e){return dt(e,t,a)});return Object(re.a)(function(e,t){return e-t},n)}function yt(e,t,a){var n=e.map(function(e){return ot[e]}),r=n.map(function(e){return e.name}),l=function(e){var t=e.reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t.players)},[]);return Array.from(new Set(t))}(t).filter(function(e){return e!==je}).map(function(e){return{id:e,score:dt(e,t,a),tieBreaks:n.map(function(n){return n.func(e,t,a)})}}),c=n.reduce(function(e,t,a){return e.thenBy(function(e){return e.tieBreaks[a]},-1)},Object(qe.firstBy)(function(e){return e.score},-1));return[Object(re.a)(c,l),r]}function bt(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null===a?Object(rt.a)(t):t[a-1];if(!n)return null;var r=function(e,t){var a=t.filter(function(t){return t.players.includes(e)})[0];return a?a.players.indexOf(e):null}(e,n);return r===ve?Ne:ve}function gt(e,t,a,n,r){var l=ke(t,e);return{profile:l,rating:l.rating,id:e,score:dt(e,n,r),dueColor:bt(e,n,r),colorBalance:Et(e,n,r),opponentHistory:mt(e,n,r),upperHalf:!1,avoidList:Te(e,a),hasHadBye:st(e,n,r),isDueBye:!1}}function ht(e){return 800/(e||1)}Object.freeze(ot);var Ot,Nt=function(e){return function(t){return t?e:0}},vt=Nt(20),jt=(Ot=16,function(e){return Ot/e}),_t=Nt(2),Rt=Nt(1),It=Object(ae.a)(Object(ze.a)(_t(!0)),Object(ze.a)(Rt(!0)),Object(ze.a)(jt(1)),Object(ze.a)(vt(!0)))(0);function Ct(e,t){var a=e.opponentHistory.includes(t.id),n=e.avoidList.includes(t.id);return Object(ae.a)(Object(ze.a)(_t(e.upperHalf!==t.upperHalf&&e.score===t.score)),Object(ze.a)(Rt(null===e.dueColor||e.dueColor!==t.dueColor)),Object(ze.a)(jt(Math.abs(e.score-t.score)+1)),Object(ze.a)(vt(!a&&!n)))(0)}function wt(e){var t=function(e){return Object(Xe.a)(e.length/2,e)};return e.reduce(function(e,a,n,r){var l=Object(ae.a)(Object(fe.a)(function(e){return e.score===a.score}),t,Object(Ze.a)(Object(me.a)(0)),Object(ne.a)(function(e){return e.id}))(r).includes(a.id);return e.concat([Object(se.a)("upperHalf",l,a)])},[])}function St(e){return Object(re.a)(Object(qe.firstBy)(function(e,t){return t.score-e.score}).thenBy(function(e,t){return t.rating-e.rating}),e)}function At(e,t,a,n,r,l){var c=Object(ae.a)(Object(ne.a)(function(e){return gt(e,n,r,a,t)}),St,wt,function(e){return function(e,t){if(t.length%2===0)return t;var a=t.filter(function(e){return!e.hasHadBye}).map(function(e){return e.id}),n=e.filter(function(e){return a.includes(e)})[0],r=n?Object($e.a)(function(e){return e.id===n},t):Object($e.a)(function(e){return!e.hasHadBye},t),l=-1===r?Object($e.a)(et.a,t):r;return Object(ue.a)(Object(me.a)(l),Object(se.a)("isDueBye",!0),t)}(l,e)})(e),u=c.filter(function(e){return!e.isDueBye}).reduce(function(e,t,a,n){var r=n.filter(function(e){return e!==t}).map(function(e){return[t.id,e.id,Ct(t,e)]});return e.concat(r)},[]),i=at()(u).reduce(function(e,t,a){if(-1!==t){var n=c.filter(function(e){return e.id===t})[0],r=c.filter(function(e){return e.id===a})[0],l=u.filter(function(e){return e[0]===t&&e[1]===a})[0][2],i=e.map(function(e){return e[0]});if(!i.includes(n)&&!i.includes(r))return e.concat([[n,r,l]])}return e},[]),o=Object(re.a)(Object(qe.firstBy)(function(e,t){return t[0].score+t[1].score-e[0].score-e[1].score}).thenBy(function(e,t){return t[0].rating+t[1].rating-e[0].rating-e[1].rating}),i).map(function(e){var t=e[0],a=e[1],n=[t.id,a.id];return t.colorBalance<a.colorBalance?Object(Ge.a)(n):n}),s=c.filter(function(e){return e.isDueBye})[0];return s?o.concat([[s.id,je]]):o}var kt=Fe;function Tt(e,t){switch(t.type){case"ADD_TOURNEY":return Object(oe.a)({name:(a={name:t.name}).name||"",tieBreaks:a.tieBreaks||[0,1,2,3],byeQueue:a.byeQueue||[],players:a.players||[],roundList:a.roundList||[]},e);case"DEL_TOURNEY":return e.filter(function(e,a){return a!==t.index});case"ADD_ROUND":return Object(ue.a)(Object(ie.a)([t.tourneyId,"roundList"]),Object(oe.a)([]),e);case"DEL_LAST_ROUND":return Object(ue.a)(Object(ie.a)([t.tourneyId,"roundList"]),Object(He.a)(-1,1),e);case"ADD_TIEBREAK":return Object(ue.a)(Object(ie.a)([t.tourneyId,"tieBreaks"]),Object(oe.a)(t.id),e);case"DEL_TIEBREAK":return Object(ue.a)(Object(ie.a)([t.tourneyId,"tieBreaks"]),Object(fe.a)(function(e){return e!==t.id}),e);case"MOVE_TIEBREAK":return Object(ue.a)(Object(ie.a)([t.tourneyId,"tieBreaks"]),Object(Ve.a)(t.oldIndex,t.newIndex),e);case"SET_TOURNEY_PLAYERS":return Object(ye.a)(Object(ie.a)([t.tourneyId,"players"]),t.players,e);case"SET_BYE_QUEUE":return Object(ye.a)(Object(ie.a)([t.tourneyId,"byeQueue"]),t.byeQueue,e);case"AUTO_PAIR":return Object(ue.a)(Object(ie.a)([t.tourneyId,"roundList",t.roundId]),Object(We.a)(Je.a,function(e,t,a,n,r){var l=e.roundList,c=Object(be.a)(ke)(t.players);return At(n,a,l,t.players,t.avoid,e.byeQueue).map(function(e){return _e({id:e.join("-"),players:[e[ve],e[Ne]],origRating:[c(e[ve]).rating,c(e[Ne]).rating],newRating:[c(e[ve]).rating,c(e[Ne]).rating]})}).reduce(function(e,t){return t.players[ve]===je?e.concat([Object(se.a)("result",[0,r],t)]):t.players[Ne]===je?e.concat([Object(se.a)("result",[r,0],t)]):e.concat([t])},[])}(e[t.tourneyId],t.playerState,t.roundId,t.unpairedPlayers,t.byeValue)),e);case"MANUAL_PAIR":return Object(ue.a)(Object(ie.a)([t.tourneyId,"roundList",t.roundId]),Object(oe.a)(function(e,t,a){var n=Object(be.a)(ke)(e),r=_e({id:t.join("-"),players:[t[ve],t[Ne]],origRating:[n(t[ve]).rating,n(t[Ne]).rating],newRating:[n(t[ve]).rating,n(t[Ne]).rating]});return t[ve]===je?Object(se.a)("result",[0,a],r):t[Ne]===je?Object(se.a)("result",[a,0],r):r}(t.players,t.pair,t.byeValue)),e);case"SET_MATCH_RESULT":return Object(ye.a)(Object(ie.a)([t.tourneyId,"roundList",t.roundId,Object(de.a)(Object(pe.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId]),"result"]),t.result,Object(ye.a)(Object(ie.a)([t.tourneyId,"roundList",t.roundId,Object(de.a)(Object(pe.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId]),"newRating"]),t.newRating,e));case"DEL_MATCH":return Object(ue.a)(Object(ie.a)([t.tourneyId,"roundList",t.roundId]),Object(fe.a)(function(e){return e.id!==t.matchId}),e);case"SWAP_COLORS":return Object(ue.a)(Object(ie.a)([t.tourneyId,"roundList",t.roundId,Object(de.a)(Object(pe.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId])]),function(e){return Object(Ke.a)(e,{result:Object(Ge.a)(e.result),players:Object(Ge.a)(e.players),origRating:Object(Ge.a)(e.origRating),newRating:Object(Ge.a)(e.newRating)})},e);case"MOVE_MATCH":return Object(ue.a)(Object(ie.a)([t.tourneyId,"roundList",t.roundId]),Object(Ve.a)(t.oldIndex,t.newIndex),e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type "+t.type)}var a}var Lt=Object(n.createContext)(null);function Dt(){return Object(n.useContext)(Lt)}function Bt(e){var t=Object(n.useContext)(Lt),a=Object(f.a)(t,2),r=a[0],l=a[1];return[r[e],l]}function Pt(e,t){var a=Bt(e),n=Object(f.a)(a,2),r=n[0],l=n[1],c=r.roundList[t],u=c.reduce(function(e,t){return e.concat(t.players)},[]);return{tourney:r,dispatch:l,unmatched:Object(Qe.a)(r.players,u),matchList:c}}function xt(e){var t=ge("tourneys",kt),a=Object(n.useReducer)(Tt,t),r=Object(f.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)(function(){localStorage.setItem("tourneys",JSON.stringify(l))},[l]),Object(n.createElement)(Lt.Provider,{value:[l,c]},e.children)}var Mt=a(49);function Ut(e,t){switch(t.type){case"SET_BYE_VALUE":return Object(se.a)("byeValue",t.byeValue,e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type.")}}var Yt=Object(n.createContext)(null);function Ht(){return Object(n.useContext)(Yt)}function Vt(e){var t=ge("options",Mt),a=Object(n.useReducer)(Ut,t),r=Object(f.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)(function(){localStorage.setItem("options",JSON.stringify(l))},[l]),Object(n.createElement)(Yt.Provider,{value:[l,c]},e.children)}a(111),a(112);var Wt=a(32),Jt=a.n(Wt);function Kt(e){var t=Number(e.tourneyId),a=Bt(t),l=Object(f.a)(a,2),c=l[0],i=l[1],o=c.name,s=c.players,m=c.roundList,d=Ue(),b=d.playerState,h=d.getPlayer,O=d.playerDispatch,N=Object(n.useMemo)(function(){var e=g()(m);if(!e)return!0;var t=e.reduce(function(e,t){return e.concat(t.players)},[]),a=s.filter(function(e){return!t.includes(e)}),n=e.map(function(e){return e.result[0]+e.result[1]});return 0===a.length&&!n.includes(0)},[s,m]);Object(n.useEffect)(function(){var e=document.title;return document.title=o,function(){document.title=e}},[o]);var v=m.length>=Le(s.length),j=N?v?["All necessary rounds have completed.",!0]:["Ready to begin a new round.",!1]:["You must complete the last round before beginning a new one.",!0],_=Object(f.a)(j,2),R=_[0],I=_[1];function C(){return(C=Object(E.a)(p.a.mark(function a(){return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure you want to delete the last round?")){a.next=5;break}return a.next=3,e.navigate(".");case 3:g()(m).forEach(function(e){e.result[0]+e.result[1]!==0&&e.players.forEach(function(t,a){if(t!==je){var n=h(t).matchCount;O({type:"SET_PLAYER_MATCHCOUNT",id:t,matchCount:n-1}),O({type:"SET_PLAYER_RATING",id:t,rating:e.origRating[a]})}})}),i({type:"DEL_LAST_ROUND",players:b.players,tourneyId:t});case 5:case"end":return a.stop()}},a)}))).apply(this,arguments)}return r.a.createElement("div",{className:Jt.a.tournament},r.a.createElement("div",{className:Jt.a.header},r.a.createElement("nav",null,r.a.createElement(u.a,{to:"/"},r.a.createElement(te.ChevronLeft,null)," Back")),r.a.createElement("h2",null,o)),r.a.createElement("div",{className:Jt.a.sidebar},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.a,{to:"."},r.a.createElement(te.Users,null)," Players")),r.a.createElement("li",null,r.a.createElement(u.a,{to:"crosstable"},r.a.createElement(te.Layers,null)," Crosstable")),r.a.createElement("li",null,r.a.createElement(u.a,{to:"scores"},r.a.createElement(te.List,null)," Score detail"))),r.a.createElement("hr",null),r.a.createElement("ul",null,Object.keys(m).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement(u.a,{to:"".concat(e)},"Round ",Number(e)+1))}))),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){v&&!window.confirm("All rounds have completed. Are you sure you want to begin a new one?")||i({type:"ADD_ROUND",tourneyId:t})},disabled:!N},r.a.createElement(te.Plus,null)," New round")," ",r.a.createElement(y.a,{label:R},r.a.createElement("span",{className:"helpIcon"},I?r.a.createElement(te.Alert,{className:"status-alert"}):r.a.createElement(te.Check,{className:"status-ok"})))),r.a.createElement("li",null,r.a.createElement("button",{className:"danger "+Jt.a.toolbarItem,onClick:function(){return C.apply(this,arguments)},disabled:0===m.length},r.a.createElement(te.Trash,null)," Remove last round")),r.a.createElement("li",null,"Round progress: ",m.length,"/",Le(s.length)," "))),r.a.createElement("div",{className:Jt.a.content},e.children))}function Gt(e){var t=Dt(),a=Object(f.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),o=Object(f.a)(i,2),s=o[0],m=o[1];return r.a.createElement("div",null,l.length>0&&r.a.createElement("h2",null,"Tournament list"),l.length>0?r.a.createElement("ol",null,l.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(u.a,{to:String(t)},e.name)," ",r.a.createElement("button",{title:"Delete \u201c".concat(e.name,"\u201d"),"aria-label":"Delete \u201c".concat(e.name,"\u201d"),className:"danger iconButton",onClick:function(){return c({type:"DEL_TOURNEY",index:t})}},r.a.createElement(te.Trash,null)))})):r.a.createElement("p",null,"No tournaments added yet."),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c({type:"ADD_TOURNEY",name:s}),m("")}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Make a new tournament"),r.a.createElement("label",null,"Name:"," ",r.a.createElement("input",{type:"text",placeholder:"tournament name",value:s,onChange:function(e){m(e.target.value)},required:!0})),r.a.createElement("input",{type:"submit",value:"Create"}))))}var Qt=function(e){return r.a.createElement("div",null,e.children)},Ft=a(10),qt=a.n(Ft);function zt(e){var t=Number(e.playerId),a=Ue(),l=a.playerState,c=a.playerDispatch,i=a.getPlayer,o=l.players,s=l.avoid,m=Object(n.useState)(Te(t,s)),d=Object(f.a)(m,2),p=d[0],E=d[1],y=Object(n.useMemo)(function(){return o.map(function(e){return e.id}).filter(function(e){return!p.includes(e)&&e!==t})},[o,t,p]),b=Object(n.useState)(y[0]),g=Object(f.a)(b,2),h=g[0],O=g[1];function N(e){e.preventDefault();var a=e.currentTarget,n=a.firstName,r=a.lastName,l=a.matchCount,u=a.rating;c({type:"SET_PLAYER",id:t,firstName:n.value,lastName:r.value,matchCount:Number(l.value),rating:Number(u.value)})}return Object(n.useEffect)(function(){E(Te(t,s))},[s,t]),Object(n.useEffect)(function(){O(y[0])},[O,y]),Object(n.useEffect)(function(){var e=document.title;return document.title=i(t).firstName+" "+i(t).lastName,function(){document.title=e}},[t,i]),r.a.createElement("div",null,r.a.createElement(u.a,{to:".."},r.a.createElement(te.ChevronLeft,null)," Back"),r.a.createElement("h2",null,"Profile for"," ",i(t).firstName," ",i(t).lastName),r.a.createElement("form",{onChange:N,onSubmit:N},r.a.createElement("p",null,r.a.createElement("label",null,"First name"," ",r.a.createElement("input",{type:"text",name:"firstName",defaultValue:i(t).firstName}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name"," ",r.a.createElement("input",{type:"text",name:"lastName",defaultValue:i(t).lastName}))),r.a.createElement("p",null,r.a.createElement("label",null,"Matches played"," ",r.a.createElement("input",{type:"number",name:"matchCount",defaultValue:String(i(t).matchCount)}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating",r.a.createElement("input",{type:"number",name:"rating",defaultValue:String(i(t).rating)}))),r.a.createElement("p",null,r.a.createElement("label",null,"K factor",r.a.createElement("input",{type:"number",readOnly:!0,value:qt()(ht(i(t).matchCount)).format("00")})))),r.a.createElement("ul",null,r.a.createElement("h3",null,"Players to avoid"),p.map(function(e){return r.a.createElement("li",{key:e},i(e).firstName," ",i(e).lastName," ",r.a.createElement("button",{className:"danger iconButton",onClick:function(){return c({type:"DEL_AVOID_PAIR",pair:[t,e]})},title:"Remove ".concat(i(e).firstName," \n").concat(i(e).lastName),"arial-label":"Remove \n".concat(i(e).firstName," ").concat(i(e).lastName," from avoid list.")},r.a.createElement(te.Trash,null)))}),0===s.length&&r.a.createElement("li",null,"None")),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),c({type:"ADD_AVOID_PAIR",pair:[t,Number(h)]})}(e)}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add player to avoid"),r.a.createElement("select",{onBlur:function(e){return O(Number(e.target.value))}},y.map(function(e){return r.a.createElement("option",{key:e,value:e},i(e).firstName," ",i(e).lastName)}))," ",r.a.createElement("input",{type:"submit",value:"Add"}))))}var Xt=a(20),Zt=a(91),$t=a(57),ea=a.n($t);function ta(e){var t=e.children,a=e.style;return r.a.createElement("div",{style:Object(Zt.a)({},a),className:ea.a.panel},t)}function aa(e){return r.a.createElement("div",Object.assign({},e,{className:ea.a.panels}),r.a.Children.map(e.children,function(e){return e}))}function na(e){var t=e.id,a=e.firstName,n=e.lastName,l=Ue().getPlayer;return t===je?r.a.createElement("span",null,a&&l(t).firstName," ",n&&l(t).lastName):r.a.createElement(u.a,{to:"/players/"+t},a&&l(t).firstName," ",n&&l(t).lastName)}function ra(){var e=Ue().playerDispatch,t={firstName:"",lastName:"",rating:1200},a=Object(n.useState)(t),l=Object(f.a)(a,2),c=l[0],u=l[1],i=function(e){e.preventDefault();var t=e.currentTarget,a=t.name,n=t.value;u(function(e){return Object(se.a)(a,n,e)})};return r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=c.firstName,r=c.lastName,l=c.rating;u(t),e({type:"ADD_PLAYER",firstName:n,lastName:r,rating:l})}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Register a new player"),r.a.createElement("p",null,r.a.createElement("label",null,"First name"," ",r.a.createElement("input",{type:"text",name:"firstName",onChange:i,value:c.firstName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name"," ",r.a.createElement("input",{type:"text",name:"lastName",onChange:i,value:c.lastName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating "," ",r.a.createElement("input",{type:"number",name:"rating",onChange:i,value:c.rating,required:!0}))),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Add"}))))}function la(e){var t=Ue(),a=t.playerState,n=t.playerDispatch;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("caption",null,"Demo Roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Rating"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.players.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__player"},r.a.createElement(na,{id:e.id,firstName:!0})),r.a.createElement("td",{className:"table__player"},r.a.createElement(na,{id:e.id,lastName:!0})),r.a.createElement("td",{className:"table__number"},e.rating),r.a.createElement("td",null,r.a.createElement("button",{className:"danger iconButton",onClick:function(t){return function(e,t){e.preventDefault(),n({type:"DEL_PLAYER",id:t})}(t,e.id)},title:"Delete ".concat(e.firstName," ").concat(e.lastName),"aria-label":"Delete ".concat(e.firstName," ").concat(e.lastName)},r.a.createElement(te.Trash,null))),r.a.createElement("td",null,r.a.createElement(u.a,{to:String(e.id)},"Open",r.a.createElement(Xt.a,null," ",e.firstName," ",e.lastName)," ",r.a.createElement(te.ChevronRight,null))))}))),r.a.createElement(ra,null))}function ca(e){return r.a.createElement("div",null,e.children)}var ua=a(58),ia=a.n(ua),oa=a(11),sa=a(18),ma=a.n(sa);function da(e){var t=Bt(e.tourneyId),a=Object(f.a)(t,1)[0],n=a.tieBreaks,l=a.roundList,c=Ue().getPlayer,u=function(e,t){var a=yt(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),n=Object(f.a)(a,2),r=n[0],l=n[1];return[r.reduce(function(e,t,a,n){var r,l,c=n[a-1];return 0===a||(l=c,(r=t).score!==l.score||r.tieBreaks.reduce(function(e,t,a){return e.concat(t!==l.tieBreaks[a])},[]).includes(!0))?Object(oe.a)([t],e):Object(ue.a)(Object(me.a)(e.length-1),Object(oe.a)(t),e)},[]),l]}(n,l),i=Object(f.a)(u,2),o=i[0],s=i[1];return r.a.createElement("table",{className:ma.a.table},r.a.createElement("caption",null,"Score detail"),r.a.createElement("tbody",null,r.a.createElement("tr",{className:ma.a.topHeader},r.a.createElement("th",{scope:"col"},"Rank"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Score"),s.map(function(e,t){return r.a.createElement("th",{key:t,scope:"col"},e)})),o.map(function(e,t){return e.map(function(e,a,n){return r.a.createElement("tr",{key:e.id,className:ma.a.row},0===a&&r.a.createElement("th",{scope:"row",className:"table__number "+ma.a.rank,rowSpan:n.length},qt()(t+1).format("0o")),r.a.createElement("th",{scope:"row",className:ma.a.playerName,"data-testid":t},c(e.id).firstName,"\xa0",c(e.id).lastName),r.a.createElement("td",{className:"table__number","data-testid":ia()(c(e.id).firstName+c(e.id).lastName+" score")},qt()(e.score).format("1/2")),e.tieBreaks.map(function(t,a){return r.a.createElement("td",{key:a,className:"table__number","data-testid":ia()(c(e.id).firstName+c(e.id).lastName+s[a])},qt()(t).format("1/2"))}))})})))}function pa(e){var t=e.tourneyId,a=Bt(t),l=Object(f.a)(a,2),c=l[0].tieBreaks,u=l[1],i=Object(n.useState)(null),o=Object(f.a)(i,2),s=o[0],m=o[1];function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=Object(ct.a)(s);c.includes(a(e))?(u({type:"DEL_TIEBREAK",id:a(e),tourneyId:t}),m(null)):u({type:"ADD_TIEBREAK",id:a(e),tourneyId:t})}function p(e){var a=c.indexOf(s);u({type:"MOVE_TIEBREAK",oldIndex:a,newIndex:a+e,tourneyId:t})}return r.a.createElement("div",null,r.a.createElement("h3",null,"Selected tiebreak methods"),r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{onClick:function(){return d()},disabled:null===s},"Toggle"),r.a.createElement("button",{onClick:function(){return p(-1)},disabled:null===s},r.a.createElement(te.ArrowUp,null)," Move up"),r.a.createElement("button",{onClick:function(){return p(1)},disabled:null===s},r.a.createElement(te.ArrowDown,null)," Move down"),r.a.createElement("button",{onClick:function(){return m(null)},disabled:null===s},"Done")),r.a.createElement("ol",null,c.map(function(e){return r.a.createElement("li",{key:e,className:s===e?"selected":""},ot[e].name,r.a.createElement("button",{onClick:function(){return m(s===e?null:e)},disabled:null!==s&&s!==e},s===e?"Done":"Edit"))})),r.a.createElement("h3",null,"Available tiebreak methods"),r.a.createElement("ol",null,ot.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:c.includes(t)?"enabled":"disabled"},e.name),!c.includes(t)&&r.a.createElement("button",{onClick:function(){return d(t)}},"Add"))})))}var Ea=function(e){var t=e.tourneyId;return r.a.createElement(oa.e,null,r.a.createElement(oa.b,null,r.a.createElement(oa.a,null,r.a.createElement(te.List,null)," Scores"),r.a.createElement(oa.a,null,r.a.createElement(te.Settings,null)," Edit tiebreak rules")),r.a.createElement(oa.d,null,r.a.createElement(oa.c,null,r.a.createElement(da,{tourneyId:Number(t)})),r.a.createElement(oa.c,null,r.a.createElement(pa,{tourneyId:Number(t)}))))},fa=a(27);function ya(e){var t=e.tourneyId,a=Bt(t),n=Object(f.a)(a,2),l=n[0].players,c=n[1],u=Ue(),i=u.playerState,o=u.getPlayer;function s(e){var a=Number(e.target.value);e.target.checked?c({type:"SET_TOURNEY_PLAYERS",players:l.concat([a]),tourneyId:t}):c({type:"SET_TOURNEY_PLAYERS",players:l.filter(function(e){return e!==a}),tourneyId:t})}return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return c({type:"SET_TOURNEY_PLAYERS",players:i.players.map(function(e){return e.id}),tourneyId:t})}},"Select all"),r.a.createElement("button",{onClick:function(){return c({type:"SET_TOURNEY_PLAYERS",players:[],tourneyId:t})}},"Select none"),r.a.createElement("table",null,r.a.createElement("caption",null,"Select players"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Select"))),r.a.createElement("tbody",null,i.players.map(function(e){var t=e.id;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,o(t).firstName),r.a.createElement("td",null,o(t).lastName),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",value:t,checked:l.includes(t),onChange:s})))}))),r.a.createElement(ra,null))}function ba(e){var t=e.tourneyId,a=Bt(t=Number(t)),l=Object(f.a)(a,2),c=l[0],u=c.players,i=c.byeQueue,o=c.roundList,s=l[1],m=Ue().getPlayer,d=Object(n.useState)(0===u.length),p=Object(f.a)(d,2),E=p[0],y=p[1];return r.a.createElement(aa,null,r.a.createElement(ta,null,r.a.createElement("button",{onClick:function(){return y(!0)}},r.a.createElement(te.Edit,null)," Edit player roster"),r.a.createElement("table",null,r.a.createElement("caption",null,"Current roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Options"))),r.a.createElement("tbody",null,u.map(function(e){return r.a.createElement("tr",{key:e,className:m(e).type+" player"},r.a.createElement("td",null,m(e).firstName),r.a.createElement("td",null,m(e).lastName),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return s({type:"SET_BYE_QUEUE",byeQueue:i.concat([e]),tourneyId:t})},disabled:i.includes(e)},"Bye signup")))})))),r.a.createElement(ta,null,r.a.createElement("h3",null,"Bye queue"),0===i.length&&r.a.createElement("p",null,"No players have signed up for a bye round."),r.a.createElement("ol",null,i.map(function(e){return r.a.createElement("li",{key:e,className:st(e,o)?"disabled":""},m(e).firstName," ",m(e).lastName,r.a.createElement("button",{onClick:function(){return s({type:"SET_BYE_QUEUE",byeQueue:i.filter(function(t){return e!==t}),tourneyId:t})}},"Remove"))}))),r.a.createElement(fa.a,{isOpen:E},r.a.createElement("button",{onClick:function(){return y(!1)}},"Done"),r.a.createElement(ya,{tourneyId:t})))}function ga(e){var t=e.tourneyId,a=Bt(Number(t)),l=Object(f.a)(a,1)[0],c=l.tieBreaks,u=l.roundList,i=Ue().getPlayer,o=Object(n.useMemo)(function(){var e=yt(c,u),t=Object(f.a)(e,1)[0],a=t.reduce(function(e,t){return Object(se.a)(String(t.id),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Se(e,t,a).reduce(function(t,a){var n=a.players.filter(function(t){return t!==e})[0],r=a.players.indexOf(e),l=a.result[r];return Object(ue.a)(Object(lt.a)(String(n)),Object(ae.a)(Object(ct.a)(0),Object(ze.a)(l)),t)},{})}(t.id,u),e)},{});return[t,a]},[u,c]),s=Object(f.a)(o,2),m=s[0],d=s[1];function p(e){var t=function(e,t){var a=Se(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),n=a[0],r=n.players.indexOf(e),l=n.origRating[r],c=Object(rt.a)(a),u=c.players.indexOf(e);return[l,c.newRating[u]]}(e,u),a=Object(f.a)(t,2),n=a[0],r=a[1],l=qt()(r-n).format("+0");return"".concat(r,"\xa0(").concat(l,")")}return r.a.createElement("table",{className:ma.a.table},r.a.createElement("caption",null,"Crosstable"),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"Name"),m.map(function(e,t){return r.a.createElement("th",{key:t},t+1)}),r.a.createElement("th",null,"Score"),r.a.createElement("th",null,"Rating")),m.map(function(e,t){return r.a.createElement("tr",{key:t,className:ma.a.row},r.a.createElement("th",{scope:"col"},t+1),r.a.createElement("th",{scope:"row",className:ma.a.playerName},i(e.id).firstName,"\xa0",i(e.id).lastName),m.map(function(t,a){return r.a.createElement("td",{key:a,className:"table__number"},function(e,t){if(e===t)return r.a.createElement(te.X,null);var a=d[String(e)][t];return void 0===a?null:qt()(a).format("1/2")}(e.id,t.id))}),r.a.createElement("td",{className:"table__number"},qt()(e.score).format("1/2")),r.a.createElement("td",{className:"table__number"},p(e.id)))})))}function ha(e){var t=e.matchId,a=e.color,n=e.tourneyId,l=e.roundId,c=Pt(n,l),u=c.tourney,i=c.matchList,o=Ue(),s=o.playerState,m=o.getPlayer,d=De(i,t),p=gt(d.players[a],s.players,s.avoid,u.roundList,l),E=p.colorBalance,f=E<0?"White +"+Math.abs(E):E>0?"Black +"+E:"Even";return r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,p.profile.firstName," ",p.profile.lastName),r.a.createElement("dt",null,"Score"),r.a.createElement("dd",null,p.score),r.a.createElement("dt",null,"Rating"),r.a.createElement("dd",{"data-testid":"rating-".concat(p.id)},d.origRating[a]," (",qt()(d.newRating[a]-d.origRating[a]).format("+0"),")"),r.a.createElement("dt",null,"Color balance"),r.a.createElement("dd",null,f),r.a.createElement("dt",null,"Has had a bye round"),r.a.createElement("dd",null,p.hasHadBye?"Yes":"No"),r.a.createElement("dt",null,"Opponent history"),r.a.createElement("dd",null,r.a.createElement("ol",null,p.opponentHistory.map(function(e){return r.a.createElement("li",{key:e},m(e).firstName," ",m(e).lastName)}))))}var Oa=a(34),Na=a.n(Oa);a(118);function va(e){var t=e.pos,a=e.match,l=e.tourneyId,c=e.roundId,u=e.selectedMatch,i=e.setSelectedMatch,o=Pt(l,c),s=o.tourney,m=o.dispatch,d=Ue(),p=d.playerDispatch,E=d.getPlayer,y=Object(n.useState)(!1),b=Object(f.a)(y,2),g=b[0],h=b[1],O=a.result[0]>a.result[1]?"WHITE":a.result[1]>a.result[0]?"BLACK":a.result.every(function(e){return.5===e})?"DRAW":"NOTSET",N=E(a.players[0]).firstName+" "+E(a.players[0]).lastName,v=E(a.players[1]).firstName+" "+E(a.players[1]).lastName;function j(e){var t=function(){switch(e.target.value){case"WHITE":return[1,0];case"BLACK":return[0,1];case"DRAW":return[.5,.5];case"NOTSET":return[0,0];default:throw new Error}}(),n=E(a.players[ve]),r=E(a.players[Ne]),u="NOTSET"===e.currentTarget.value?a.origRating:function(e,t,a){var n=new it.a(ht(t[ve])),r=new it.a(ht(t[Ne])),l=[n.getExpected(e[ve],e[Ne]),r.getExpected(e[Ne],e[ve])];return[n.updateRating(l[ve],a[ve],e[ve]),r.updateRating(l[Ne],a[Ne],e[Ne])].map(function(e){return e<100?100:e})}(a.origRating,[n.matchCount,r.matchCount],t);p({type:"SET_PLAYER_RATING",id:n.id,rating:u[ve]}),p({type:"SET_PLAYER_RATING",id:r.id,rating:u[Ne]}),0===a.result.reduce(function(e,t){return e+t})&&(p({type:"SET_PLAYER_MATCHCOUNT",id:n.id,matchCount:n.matchCount+1}),p({type:"SET_PLAYER_MATCHCOUNT",id:r.id,matchCount:r.matchCount+1})),m({type:"SET_MATCH_RESULT",tourneyId:l,roundId:c,matchId:a.id,result:t,newRating:u})}return r.a.createElement("tr",{className:a.id===u?"selected":""},r.a.createElement("th",{className:"table__number row__id",scope:"row"},t+1),r.a.createElement("td",{className:"table__player row__player","data-testid":"match-".concat(t,"-white")},N," ","WHITE"===O&&r.a.createElement("span",{role:"img","aria-hidden":!0},"\ud83c\udfc6")),r.a.createElement("td",{className:"table__player row__player","data-testid":"match-".concat(t,"-black")},v," ","BLACK"===O&&r.a.createElement("span",{role:"img","aria-hidden":!0},"\ud83c\udfc6")),r.a.createElement("td",{className:"data__input row__controls"},r.a.createElement("select",{onBlur:j,onChange:j,disabled:a.players.includes(je),value:O,className:Oa.winnerSelect},r.a.createElement("option",{value:"NOTSET"},"Select a winner"),r.a.createElement("option",{value:"WHITE"},N," won"),r.a.createElement("option",{value:"BLACK"},v," won"),r.a.createElement("option",{value:"DRAW"},"Draw"))),r.a.createElement("td",{className:"data__input row__controls"},u!==a.id?r.a.createElement("button",{className:"iconButton",onClick:function(){return i(a.id)},title:"Edit match"},r.a.createElement(te.Edit,null)):r.a.createElement("button",{className:"iconButton",onClick:function(){return i(null)},title:"End editing match"},r.a.createElement(te.Check,null)),r.a.createElement("button",{className:"iconButton",onClick:function(){return h(!0)},title:"Open match information."},r.a.createElement(te.Info,null),r.a.createElement(Xt.a,null,"View information for match:"," ",N," versus ",v)),r.a.createElement(fa.a,{isOpen:g},r.a.createElement("button",{onClick:function(){return h(!1)}},"close"),r.a.createElement("p",null,s.name),r.a.createElement("p",null,"Round ",c+1,", match ",t+1),r.a.createElement(aa,null,r.a.createElement(ta,null,r.a.createElement(ha,{matchId:a.id,color:0,tourneyId:l,roundId:c})),r.a.createElement(ta,null,r.a.createElement(ha,{matchId:a.id,color:1,tourneyId:l,roundId:c}))))))}function ja(e){var t=e.roundId,a=e.tourneyId,l=Pt(a,t),c=l.matchList,u=l.dispatch,i=Ue(),o=i.playerDispatch,s=i.getPlayer,m=Object(n.useState)(null),d=Object(f.a)(m,2),p=d[0],E=d[1];if(!c)throw new Error("Round "+t+" does not exist.");function y(e,n){var r,l,i=(l=e,(r=c).indexOf(De(r,l)));u({type:"MOVE_MATCH",tourneyId:a,roundId:t,oldIndex:i,newIndex:i+n>=0?i+n:0})}return r.a.createElement("div",null,r.a.createElement("div",{className:Na.a.toolbar},r.a.createElement("button",{className:"danger iconButton",onClick:function(){return function(e){var n=De(c,e);0!==n.result.reduce(function(e,t){return e+t})&&n.players.forEach(function(e,t){o({type:"SET_PLAYER_MATCHCOUNT",id:e,matchCount:s(e).matchCount-1}),o({type:"SET_PLAYER_RATING",id:e,rating:n.origRating[t]})}),u({type:"DEL_MATCH",tourneyId:a,roundId:t,matchId:e}),E(null)}(p)},disabled:null===p},r.a.createElement(te.Trash,null)," Unmatch"),r.a.createElement("button",{className:"iconButton",onClick:function(){u({type:"SWAP_COLORS",tourneyId:a,roundId:t,matchId:p})},disabled:null===p},r.a.createElement(te.Repeat,null)," Swap colors"),r.a.createElement("button",{className:"iconButton",onClick:function(){return y(p,-1)},disabled:null===p},r.a.createElement(te.ArrowUp,null)," Move up"),r.a.createElement("button",{className:"iconButton",onClick:function(){return y(p,1)},disabled:null===p},r.a.createElement(te.ArrowDown,null)," Move down")),0===c.length&&r.a.createElement("p",null,"No players matched yet."),r.a.createElement("table",{className:Na.a.table},c.length>0&&r.a.createElement("caption",null,"Round ",t+1," results"),r.a.createElement("tbody",null,c.length>0&&r.a.createElement("tr",null,r.a.createElement("th",{className:"row__id",scope:"col"},"#"),r.a.createElement("th",{className:"row__player",scope:"col"},"White"),r.a.createElement("th",{className:"row__player",scope:"col"},"Black"),r.a.createElement("th",{className:"row__result",scope:"col"},"Result"),r.a.createElement("th",{className:"row__controls",scope:"col"},"Controls")),c.map(function(e,n){return r.a.createElement(va,{key:e.id,pos:n,match:e,tourneyId:a,roundId:t,selectedMatch:p,setSelectedMatch:E})}))))}function _a(e){var t=e.tourneyId,a=e.roundId,l=e.stagedPlayers,c=e.setStagedPlayers,u=Pt(t,a),i=u.dispatch,o=u.unmatched,s=Ue(),m=s.playerState,d=s.getPlayer,p=Ht(),E=Object(f.a)(p,1)[0].byeValue,y=Object(n.useState)(!1),b=Object(f.a)(y,2),g=b[0],h=b[1];var O=o.length%2!==0?Object(oe.a)(je,o):o;return 0===o.length?null:r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return i({type:"AUTO_PAIR",unpairedPlayers:o,tourneyId:t,roundId:a,playerState:m,byeValue:E})},disabled:0===o.length},"Auto-pair unmatched players"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return h(!0)}},"Add or remove players from the roster."),r.a.createElement("ul",null,O.map(function(e){return r.a.createElement("li",{key:e},l.includes(e)?r.a.createElement("button",{disabled:!0},"Selected"):r.a.createElement("button",{disabled:!l.includes(null),onClick:function(){return t=e,void(null===l[ve]?c(function(e){return Object(ye.a)(Object(me.a)(ve),t,e)}):null===l[Ne]&&c(function(e){return Object(ye.a)(Object(me.a)(Ne),t,e)}));var t}},r.a.createElement(te.UserPlus,null),r.a.createElement(Xt.a,null,"Select ",d(e).firstName," ",d(e).lastName))," ",d(e).firstName," ",d(e).lastName)})),r.a.createElement(fa.a,{isOpen:g},r.a.createElement("button",{onClick:function(){return h(!1)}},"Done"),r.a.createElement(ya,{tourneyId:t})))}function Ra(e){var t=e.tourneyId,a=e.roundId,l=e.stagedPlayers,c=e.setStagedPlayers,u=Ue(),i=u.playerState,o=u.getPlayer,s=i.players,m=Bt(t)[1],d=Ht(),p=Object(f.a)(d,1)[0].byeValue,E=Object(f.a)(l,2),y=E[0],b=E[1];function g(e){c(function(t){return Object(ye.a)(Object(me.a)(e),null,t)})}return r.a.createElement("div",null,r.a.createElement("h2",null,"Selected for matching:"),r.a.createElement("p",null,"White:"," ",null!==y&&r.a.createElement(n.Fragment,null,o(y).firstName," ",o(y).lastName," ",r.a.createElement("button",{onClick:function(){return g(ve)}},r.a.createElement(te.UserMinus,null)," Remove"))),r.a.createElement("p",null,"Black:"," ",null!==b&&r.a.createElement(n.Fragment,null,o(b).firstName," ",o(b).lastName," ",r.a.createElement("button",{onClick:function(){return g(Ne)}},r.a.createElement(te.UserMinus,null)," Remove"))),r.a.createElement("button",{onClick:function(){return c(function(e){return[e[Ne],e[ve]]})},disabled:l.every(function(e){return null===e})},r.a.createElement(te.Repeat,null)," Swap colors")," ",r.a.createElement("button",{onClick:function(){m({type:"MANUAL_PAIR",pair:[y,b],tourneyId:t,roundId:a,byeValue:p,players:s}),c([null,null])},disabled:l.includes(null)},r.a.createElement(te.Check,null)," Match selected")," ")}function Ia(e){var t=e.playerId,a=e.tourneyId,n=e.roundId,l=Bt(a),c=Object(f.a)(l,1)[0].roundList,u=Ue(),i=u.playerState,o=u.getPlayer,s=gt(t,i.players,i.avoid,c,n),m=s.profile,d=s.rating,p=s.score,E=s.colorBalance,y=s.hasHadBye,b=s.opponentHistory,g=s.avoidList,h=E<0?"White +"+Math.abs(E):E>0?"Black +"+E:"Even";return r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,m.firstName," ",m.lastName),r.a.createElement("p",null,"Score: ",p),r.a.createElement("p",null,"Rating: ",d),r.a.createElement("p",null,"Color balance: ",h),r.a.createElement("p",null,"Has had a bye round: ",y?"Yes":"No"),r.a.createElement("p",null,"Opponent history:"),r.a.createElement("ol",null,b.map(function(e){return r.a.createElement("li",{key:e},o(e).firstName," ",o(e).lastName)})),r.a.createElement("p",null,"Players to avoid:"),r.a.createElement("ol",null,g.map(function(e){return r.a.createElement("li",{key:e},o(e).firstName," ",o(e).lastName)})))}function Ca(e){var t=e.tourneyId,a=e.roundId,l=Object(n.useState)([null,null]),c=Object(f.a)(l,2),u=c[0],i=c[1],o=Ue().playerState,s=Bt(t),m=Object(f.a)(s,1)[0],d=r.a.useMemo(function(){return Object(ae.a)(Object(ne.a)(function(e){return gt(e,o.players,o.avoid,m.roundList,a)}),St,wt)(m.players)},[m.players,m.roundList,o.avoid,o.players,a]),p=r.a.useMemo(function(){if(u.includes(null))return null;var e=Ct(De(d,u[0]),De(d,u[1]));return qt()(e/It).format("%")},[u,d]);return r.a.createElement(aa,null,r.a.createElement(ta,null,r.a.createElement(_a,{tourneyId:t,roundId:a,stagedPlayers:u,setStagedPlayers:i})),r.a.createElement(ta,null,r.a.createElement(Ra,{tourneyId:t,roundId:a,stagedPlayers:u,setStagedPlayers:i}),r.a.createElement(aa,null,u.map(function(e){return null!==e&&r.a.createElement(ta,{key:e},r.a.createElement(Ia,{playerId:e,tourneyId:t,roundId:a}))})),"Match ideal: ",p))}function wa(e){var t=e.tourneyId,a=e.roundId,l=Pt(t=Number(t),a=Number(a)).unmatched,c=Object(n.useState)(0),u=Object(f.a)(c,2),i=u[0],o=u[1];return Object(n.useEffect)(function(){l.length>0?o(1):o(0)},[l.length]),r.a.createElement(oa.e,{index:i,onChange:function(e){return o(e)}},r.a.createElement(oa.b,null,r.a.createElement(oa.a,null,r.a.createElement(te.List,null)," Matches"),r.a.createElement(oa.a,{disabled:0===l.length},r.a.createElement(te.Users,null)," Unmatched players")),r.a.createElement(oa.d,null,r.a.createElement(oa.c,null,r.a.createElement(ja,{tourneyId:t,roundId:a})),r.a.createElement(oa.c,null,r.a.createElement(Ca,{tourneyId:t,roundId:a}))))}function Sa(e){var t=Dt(),a=Object(f.a)(t,2),l=a[0],c=a[1],u=Ht(),i=Object(f.a)(u,2),o=i[0],s=i[1],m=Ue(),d=m.playerState,p=m.playerDispatch,E=Object(n.useState)(""),y=Object(f.a)(E,2),b=y[0],g=y[1],h=Object(n.useMemo)(function(){return{options:o,tourneys:l,playerState:d}},[o,l,d]);function O(e){c({type:"LOAD_STATE",state:e.tourneys}),s({type:"LOAD_STATE",state:e.options}),p({type:"LOAD_STATE",state:e.playerState}),window.alert("Data loaded!")}return Object(n.useEffect)(function(){g(JSON.stringify(h,null,4))},[h]),r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Bye options"),"Select how many points a bye is worth:"," ",r.a.createElement("label",null,"1",r.a.createElement("input",{type:"radio",checked:1===o.byeValue,onChange:function(){return s({type:"SET_BYE_VALUE",byeValue:1})}}))," ",r.a.createElement("label",null,"\xbd",r.a.createElement("input",{type:"radio",checked:.5===o.byeValue,onChange:function(){return s({type:"SET_BYE_VALUE",byeValue:.5})}})))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Manage data"),r.a.createElement("p",null,r.a.createElement("a",{href:"data:application/json,"+encodeURIComponent(JSON.stringify(h)),download:"chessahoochee.json"},"Download all data")),r.a.createElement("label",null,"Load data file:"," ",r.a.createElement("input",{type:"file",id:"file",onChange:function(e){e.preventDefault();var t=new FileReader;t.onload=function(e){var t=e.target.result;O(JSON.parse(t))},t.readAsText(e.currentTarget.files[0]),e.currentTarget.value=""}}))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Reset all changes"),r.a.createElement("button",{onClick:function(e){e.preventDefault(),O({options:Mt,playerState:{players:Be.playerList.map(function(e){return Re(e)}),avoid:Be.avoidList},tourneys:Fe})}},"Reload demo data")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),O(JSON.parse(b))}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Advanced: manually edit data"),r.a.createElement("textarea",{className:"json",rows:25,cols:50,value:b,name:"playerdata",onChange:function(e){return g(e.currentTarget.value)},spellCheck:!1}),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Load"})))))}var Aa=a(53),ka=a.n(Aa),Ta=function(){return r.a.createElement("div",{className:ka.a.caution},r.a.createElement("p",{className:ka.a.caution__text},r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f"),"\xa0 This is an unstable demo build. \xa0",r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f")," ","Want to help make it better? Head to the"," ",r.a.createElement("span",{role:"img","aria-label":"finger pointing right"},"\ud83d\udc49"),"\xa0",r.a.createElement("a",{className:ka.a.caution__link,href:"https://github.com/johnridesabike/chessahoochee"},"Git repository"),"."))};qt.a.register("format","half",{regexps:{format:/(1\/2)/,unformat:/(1\/2)/},format:function(e,t,a){var n=Math.floor(e),r=e-n,l=function(){switch(r){case.25:return"\xbc";case.5:return"\xbd";case.75:return"\xbe";default:return""}}();return(0===n&&r?"":String(n))+l},unformat:function(e){return Number(e)}});a(119);var La=a(36),Da=o()(),Ba=Object(u.e)(Da);var Pa=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(Ta,null),r.a.createElement(u.b,{history:Ba},r.a.createElement("nav",{className:"header"},r.a.createElement(u.a,{to:"tourneys",className:La.link},"Tournaments"),r.a.createElement(u.a,{to:"players",className:La.link},"Players"),r.a.createElement(u.a,{to:"options",className:La.link},"Options"),r.a.createElement(u.a,{to:"about",className:La.link},"About")),r.a.createElement("main",{className:"content"},r.a.createElement(Vt,null,r.a.createElement(Ye,null,r.a.createElement(xt,null,r.a.createElement(u.d,null,r.a.createElement(Qt,{path:"tourneys"},r.a.createElement(Gt,{path:"/"}),r.a.createElement(Kt,{path:":tourneyId"},r.a.createElement(ba,{path:"/"}),r.a.createElement(ga,{path:"crosstable"}),r.a.createElement(Ea,{path:"scores"}),r.a.createElement(wa,{path:":roundId"}))),r.a.createElement(ca,{path:"players"},r.a.createElement(la,{path:"/"}),r.a.createElement(zt,{path:":playerId"})),r.a.createElement(Sa,{path:"options"}),r.a.createElement(s,{path:"about"}),r.a.createElement(m,{default:!0}),r.a.createElement(u.c,{from:"/",to:"tourneys",noThrow:!0}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(n.StrictMode,null,r.a.createElement(Pa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},18:function(e,t,a){e.exports={table:"scores_table__22BFZ",topHeader:"scores_topHeader__2RVRR",row:"scores_row__bmBzX",playerName:"scores_playerName__3ghv9",rank:"scores_rank__3AxBb"}},30:function(e){e.exports={playerList:[{id:0,type:"person",firstName:"Bruce",lastName:"Wayne",rating:1998,matchCount:9},{id:1,type:"person",firstName:"Dick",lastName:"Grayson",rating:1909,matchCount:9},{id:2,type:"person",firstName:"Alfred",lastName:"Pennyworth",rating:1999,matchCount:9},{id:3,type:"person",firstName:"Barbara",lastName:"Gordon",rating:1345,matchCount:7},{id:4,type:"person",firstName:"Kate",lastName:"Kane",rating:1538,matchCount:9},{id:5,type:"person",firstName:"Selina",lastName:"Kyle",rating:1495,matchCount:9},{id:6,type:"person",firstName:"Jason",lastName:"Todd",rating:1101,matchCount:7},{id:7,type:"person",firstName:"James",lastName:"Gordon",rating:1167,matchCount:7},{id:8,type:"person",firstName:"Helena",lastName:"Wayne",rating:1087,matchCount:7},{id:9,type:"person",firstName:"Joker",lastName:"",rating:1538,matchCount:1},{id:10,type:"person",firstName:"Harley",lastName:"Quinn",rating:1648,matchCount:1},{id:11,type:"person",firstName:"Victor",lastName:"Fries",rating:862,matchCount:1},{id:12,type:"person",firstName:"Oswald",lastName:"Cobblepot",rating:1812,matchCount:1},{id:13,type:"person",firstName:"Ra's",lastName:"al Ghul",rating:1404,matchCount:1},{id:14,type:"person",firstName:"Pamela",lastName:"Isley",rating:965,matchCount:1},{id:15,type:"person",firstName:"Edward",lastName:"Nigma",rating:948,matchCount:1},{id:16,type:"person",firstName:"Jonathan",lastName:"Crane",rating:899,matchCount:1},{id:17,type:"person",firstName:"Harvey",lastName:"Dent",rating:1649,matchCount:1},{id:18,type:"person",firstName:"Hugo",lastName:"Strange",rating:800,matchCount:0}],avoidList:[[3,7],[9,10],[8,0]]}},32:function(e,t,a){e.exports={tournament:"tournament_tournament__2nSxH",header:"tournament_header__9nZzI",sidebar:"tournament_sidebar__21G-s",content:"tournament_content__1mdG3"}},34:function(e,t,a){e.exports={table:"round_table__2JmnE",winnerSelect:"round_winnerSelect__317oT",toolbar:"round_toolbar__3CWVM"}},36:function(e,t,a){e.exports={link:"App_link__TB6Cl"}},48:function(e){e.exports=[{name:"Wayne Manor Open",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,7,8],roundList:[[{id:"6-1",players:[6,1],result:[0,1],origRating:[1238,2108],newRating:[1236,2109]},{id:"7-2",players:[7,2],result:[0,1],origRating:[1049,2260],newRating:[1049,2260]},{id:"4-3",players:[4,3],result:[.5,.5],origRating:[1527,1755],newRating:[1553,1722]},{id:"5-0",players:[5,0],result:[0,1],origRating:[1284,1881],newRating:[1278,1887]},{id:"8--1",players:[8,-1],result:[1,0],origRating:[831,0],newRating:[831,0]}],[{id:"1-4",players:[1,4],result:[1,0],origRating:[2109,1685],newRating:[2122,1672]},{id:"0-8",players:[0,8],result:[1,0],origRating:[1887,831],newRating:[1887,830]},{id:"2-5",players:[2,5],result:[0,1],origRating:[2260,1278],newRating:[2101,1437]},{id:"3-6",players:[3,6],result:[1,0],origRating:[1545,1236],newRating:[1574,1207]},{id:"7--1",players:[7,-1],result:[1,0],origRating:[1049,0],newRating:[1049,0]}],[{id:"2-0",players:[2,0],result:[0,1],origRating:[2101,1887],newRating:[1998,1990]},{id:"8-1",players:[8,1],result:[1,0],origRating:[830,2122],newRating:[990,2008]},{id:"5-3",players:[5,3],result:[1,0],origRating:[1437,1574],newRating:[1529,1464]},{id:"4-7",players:[4,7],result:[0,1],origRating:[1672,1049],newRating:[1542,1244]},{id:"6--1",players:[6,-1],result:[1,0],origRating:[1207,0],newRating:[1207,0]}],[{id:"0-4",players:[0,4],result:[1,0],origRating:[1990,1542],newRating:[1998,1534]},{id:"1-7",players:[1,7],result:[1,0],origRating:[2008,1244],newRating:[2009,1243]},{id:"8-5",players:[8,5],result:[0,1],origRating:[990,1529],newRating:[983,1534]},{id:"6-2",players:[6,2],result:[0,1],origRating:[1207,1998],newRating:[1205,1999]},{id:"3--1",players:[3,-1],result:[1,0],origRating:[1464,0],newRating:[1464,0]}]]},{name:"The Battle for Gotham City",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,7],roundList:[[{id:"15-0",players:[15,0],result:[0,1],origRating:[950,1998],newRating:[948,1998]},{id:"16-2",players:[16,2],result:[0,1],origRating:[900,1999],newRating:[899,1999]},{id:"17-1",players:[17,1],result:[1,0],origRating:[850,2009],newRating:[1649,1909]},{id:"13-5",players:[13,5],result:[.5,.5],origRating:[1050,1534],newRating:[1404,1495]},{id:"12-3",players:[12,3],result:[1,0],origRating:[1100,1464],newRating:[1812,1345]},{id:"14-4",players:[14,4],result:[0,1],origRating:[1e3,1534],newRating:[965,1538]},{id:"10-7",players:[10,7],result:[1,0],origRating:[1200,1242],newRating:[1648,1167]},{id:"11-9",players:[11,9],result:[0,1],origRating:[1150,1250],newRating:[862,1538]},{id:"8-6",players:[8,6],result:[1,0],origRating:[983,1205],newRating:[1087,1101]}],[]]}]},49:function(e){e.exports={byeValue:1}},53:function(e,t,a){e.exports={caution:"caution_caution__17Bbq",caution__text:"caution_caution__text__2ptRS",caution__link:"caution_caution__link__X_K5Y"}},57:function(e,t,a){e.exports={panels:"utility_panels__LN75I",panel:"utility_panel__2GOiH"}},95:function(e,t,a){e.exports=a(120)}},[[95,1,2]]]);
//# sourceMappingURL=main.9d283b3b.chunk.js.map