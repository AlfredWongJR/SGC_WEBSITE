(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(37),c=a.n(l),u=(a(98),a(7)),i=a(66),o=a.n(i),s=function(e){return r.a.createElement("p",{"data-testid":"about"},"This is an early, proof-of-concept, demo of a chess tournament manager."," ",r.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"You can find out more here."))},m=function(e){return r.a.createElement("div",{"data-testid":"404"},r.a.createElement("p",null,"Page not found."))},d=a(54),E=a.n(d),p=a(67),f=a(1),y=a(87),b=a(57),g=a.n(b),h=a(68),O=a.n(h),N=a(69),v=a.n(N),j=a(70),_=a.n(j),R=a(16),I=a.n(R),C=a(71),w=a.n(C),S=a(141),A=a(88),k=a(120),T=a(121),L=a(122),D=a(72),B=a(137),P=a(123),x=a(44),M=a(140),Y=a(139),U=a(124),H=a(125),V=a(86),W=a(126),K=a(127),G=a(55),Q=a.n(G),F=1,J=0,q=-1;function z(e){return{id:e.id,players:e.players,result:e.result||[0,0],origRating:e.origRating,newRating:e.newRating}}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||0,type:e.type||"person",firstName:e.firstName||"",lastName:e.lastName||"",rating:e.rating||0,matchCount:e.matchCount||0}}var Z=X({id:-1,firstName:"Bye",lastName:"Player",type:"dummy"});function $(e,t){if(t===q)return Z;var a=e.filter(function(e){return e.id===t})[0];return a||X({id:t,firstName:"Anonymous",type:"missing"})}function ee(e,t){return t.filter(function(t){return t.includes(e)}).reduce(function(e,t){return t.concat(e)},[]).filter(function(t){return t!==e})}function te(e){return 800/(e||1)}Object.freeze(Z);var ae=a(56),ne={players:ae.playerList.map(function(e){return X(e)}),avoid:ae.avoidList};function re(e,t){var a=Object(S.a)(Object(A.a)(function(e){return e.id}),Object(k.a)(function(e,t){return t-e}),T.a,L.a);switch(t.type){case"ADD_PLAYER":return Object(D.a)(Object(B.a)(["players"]),Object(P.a)(X({firstName:t.firstName,lastName:t.lastName,rating:t.rating,id:a(e.players)})),e);case"SET_PLAYER":return Object(x.a)("players",Object(D.a)(Object(M.a)(Object(Y.a)(Object(U.a)("id",t.id),e.players)),Object(H.a)({firstName:t.firstName,lastName:t.lastName,rating:t.rating,matchCount:t.matchCount}),e.players),e);case"DEL_PLAYER":return Object(D.a)(Object(B.a)(["players"]),Object(V.a)(function(e){return e.id!==t.id}),Object(W.a)(Object(B.a)(["avoid"]),Object(V.a)(function(e){return!e.includes(t.id)}),e));case"SET_PLAYER_MATCHCOUNT":return Object(W.a)(Object(B.a)(["players",Object(Y.a)(Object(U.a)("id",t.id),e.players),"matchCount"]),t.matchCount,e);case"SET_PLAYER_RATING":return Object(W.a)(Object(B.a)(["players",Object(Y.a)(Object(U.a)("id",t.id),e.players),"rating"]),t.rating,e);case"ADD_AVOID_PAIR":return Object(D.a)(Object(B.a)(["avoid"]),Object(P.a)(t.pair),e);case"DEL_AVOID_PAIR":return Object(D.a)(Object(B.a)(["avoid"]),Object(V.a)(function(e){return!(e.includes(t.pair[0])&&e.includes(t.pair[1]))}),e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type")}}var le=Object(n.createContext)(null);function ce(){var e=Object(n.useContext)(le),t=Object(f.a)(e,2),a=t[0];return{playerState:a,playerDispatch:t[1],getPlayer:Object(K.a)($)(a.players)}}function ue(e){var t=Object(n.useReducer)(re,ne),a=Object(f.a)(t,2),r=a[0],l=a[1];return Object(n.createElement)(le.Provider,{value:[r,l]},e.children)}var ie=a(130),oe=a(132),se=a(136),me=a(133),de=a(134),Ee=a(135),pe=a(142),fe=a(73),ye=a(128),be=a(129),ge=a(143),he=a(131),Oe=a(42),Ne=a(33),ve=[{name:"Modified median",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Ie(e,t,a),r=Object(S.a)(Object(ie.a)(-1,1),Object(ie.a)(0,1))(n);return Object(ye.a)(r)}},{name:"Solkoff",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Ie(e,t,a);return Object(ye.a)(n)}},{name:"Cumulative score",func:Ae},{name:"Cumulative of opposition",func:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=we(e,t,a).filter(_e).map(function(e){return Ae(e,t,a)});return Object(ye.a)(n)}},{name:"Most black",func:ke}];function je(e){return!function(e){return e.players.includes(q)}(e)}function _e(e){return e!==q}function Re(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(null===a?t:t.slice(0,a+1)).reduce(function(e,t){return e.concat(t)},[]).filter(function(t){return t.players.includes(e)})}function Ie(e,t,a){var n=we(e,t,a).filter(_e).map(function(e){return Se(e,t,a)});return Object(k.a)(function(e,t){return e-t},n)}function Ce(e,t){return Re(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat(t.players)},[]).includes(q)}function we(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Re(e,t,a).reduce(function(e,t){return e.concat(t.players)},[]).filter(function(t){return t!==e})}function Se(e,t){var a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Re(e,t,a).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return Object(ye.a)(a)}function Ae(e,t){var a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Re(e,t,a).filter(je).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat([Object(be.a)(e)+t])},[0]);return Object(ye.a)(a)}function ke(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Re(e,t,a).filter(je).reduce(function(t,a){return a.players[J]===e?t.concat(-1):t.concat(1)},[0]);return Object(ye.a)(n)}function Te(e,t,a){var n=e.map(function(e){return ve[e]}),r=n.map(function(e){return e.name}),l=function(e){var t=e.reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t.players)},[]);return Array.from(new Set(t))}(t).filter(function(e){return e!==q}).map(function(e){return{id:e,score:Se(e,t,a),tieBreaks:n.map(function(n){return n.func(e,t,a)})}}),c=n.reduce(function(e,t,a){return e.thenBy(function(e){return e.tieBreaks[a]},-1)},Object(Ne.firstBy)(function(e){return e.score},-1));return[Object(k.a)(c,l),r]}function Le(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t[a-1])return null;var n=function(e,t){var a=t.filter(function(t){return t.players.includes(e)})[0];return a?a.players.indexOf(e):null}(e,t[a-1]);return n===J?F:J}function De(e,t,a,n,r){var l=$(t,e);return{profile:l,rating:l.rating,id:e,score:Se(e,n,r),dueColor:Le(e,n,r),colorBalance:ke(e,n,r),opponentHistory:we(e,n,r),upperHalf:!1,avoidList:ee(e,a),hasHadBye:Ce(e,n,r)}}Object.freeze(ve);var Be=a(138),Pe=a(74),xe=a.n(Pe),Me=20,Ye=16,Ue=2,He=1;function Ve(e,t,a){var n,r=0,l=e.opponentHistory.includes(t.id),c=e.avoidList.includes(t.id);return l||c||(r+=Me),n=Math.abs(a.indexOf(e.score)-a.indexOf(t.score)),n=(a.length-n)/a.length,r+=Ye*n,e.score===t.score&&e.upperHalf!==t.upperHalf&&(r+=Ue),null===e.dueColor?r+=He:e.dueColor!==t.dueColor&&(r+=He),Math.ceil(r)}function We(e,t,a,n,r){var l=e.roundList,c=Object(K.a)($)(t.players),u=e.byeQueue.filter(function(e){return!Ce(e,l)})[0],i=null;u>=0&&(i=z({id:u+"-"+Z.id,players:[u,Z.id],origRating:[c(u).rating,Z.rating],newRating:[c(u).rating,Z.rating]}),n=n.filter(function(e){return e!==u}));var o=function(e,t,a,n,r){var l,c=e.map(function(e){return De(e,n,r,a,t)}),u=Array.from(new Set(c.map(function(e){return e.score})));if(u.sort(),c.sort(Object(Ne.firstBy)(function(e){return e.score},-1).thenBy(function(e){return e.rating},-1)),c.length%2!==0){var i=Object(be.a)(c.filter(function(e){return!e.hasHadBye}));i||(i=Object(be.a)(c)),l=[i.id,q],c=c.filter(function(e){return e!==i})}u.forEach(function(e){var t=c.filter(function(t){return t.score===e});t.sort(function(e){return e.rating}).reverse(),t.length>1&&Object(Be.a)(t.length/2,t)[0].forEach(function(e){e.upperHalf=!0})});var o=c.reduce(function(e,t,a,n){var r=n.filter(function(e){return e!==t}).map(function(e){return[t.id,e.id,Ve(t,e,u)]});return e.concat(r)},[]),s=xe()(o).reduce(function(e,t,a){if(-1!==t){var n=c.filter(function(e){return e.id===t})[0],r=c.filter(function(e){return e.id===a})[0],l=o.filter(function(e){return e[0]===t&&e[1]===a})[0][2],u=e.map(function(e){return e[0]});u.includes(n)||u.includes(r)||e.push([n,r,l])}return e},[]);s.sort(Object(Ne.firstBy)(function(e){return e[0].score+e[1].score},-1).thenBy(function(e){return e[0].rating+e[1].rating},-1));var m=s.map(function(e){var t=e[0],a=e[1],n=[t.id,a.id];return t.colorBalance<a.colorBalance&&n.reverse(),n});return l&&m.push(l),m}(n,a,l,t.players,t.avoid).map(function(e){return z({id:e.join("-"),players:[e[J],e[F]],origRating:[c(e[J]).rating,c(e[F]).rating],newRating:[c(e[J]).rating,c(e[F]).rating]})});return i&&o.push(i),o.forEach(function(e){var t=e.players.indexOf(Z.id);t===F&&(e.result[J]=r),t===J&&(e.result[F]=r)}),o}var Ke=fe;function Ge(e,t){switch(t.type){case"ADD_TOURNEY":return Object(P.a)({name:(a={name:t.name}).name||"",tieBreaks:a.tieBreaks||[0,1,2,3],byeQueue:a.byeQueue||[],players:a.players||[],roundList:a.roundList||[]},e);case"DEL_TOURNEY":return e.filter(function(e,a){return a!==t.index});case"ADD_ROUND":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList"]),Object(P.a)([]),e);case"DEL_LAST_ROUND":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList"]),Object(ie.a)(-1,1),e);case"ADD_TIEBREAK":return Object(D.a)(Object(B.a)([t.tourneyId,"tieBreaks"]),Object(P.a)(t.id),e);case"DEL_TIEBREAK":return Object(D.a)(Object(B.a)([t.tourneyId,"tieBreaks"]),Object(V.a)(function(e){return e!==t.id}),e);case"MOVE_TIEBREAK":return Object(D.a)(Object(B.a)([t.tourneyId,"tieBreaks"]),Object(oe.a)(t.oldIndex,t.newIndex),e);case"SET_TOURNEY_PLAYERS":return Object(W.a)(Object(B.a)([t.tourneyId,"players"]),t.players,e);case"SET_BYE_QUEUE":return Object(W.a)(Object(B.a)([t.tourneyId,"byeQueue"]),t.byeQueue,e);case"AUTO_PAIR":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId]),Object(se.a)(me.a,We(e[t.tourneyId],t.playerState,t.roundId,t.unpairedPlayers,t.byeValue)),e);case"MANUAL_PAIR":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId]),Object(P.a)(function(e,t,a){var n=Object(K.a)($)(e),r=z({id:t.join("-"),players:[t[J],t[F]],origRating:[n(t[J]).rating,n(t[F]).rating],newRating:[n(t[J]).rating,n(t[F]).rating]});return t[J]===Z.id&&(r.result=[0,a]),t[F]===Z.id&&(r.result=[a,0]),r}(t.players,t.pair,t.byeValue)),e);case"SET_MATCH_RESULT":return Object(W.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId,Object(Y.a)(Object(U.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId]),"result"]),t.result,Object(W.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId,Object(Y.a)(Object(U.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId]),"newRating"]),t.newRating,e));case"DEL_MATCH":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId]),Object(V.a)(function(e){return e.id!==t.matchId}),e);case"SWAP_COLORS":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId,Object(Y.a)(Object(U.a)("id",t.matchId),e[t.tourneyId].roundList[t.roundId])]),function(e){return Object(de.a)(e,{result:Object(Ee.a)(e.result),players:Object(Ee.a)(e.players),origRating:Object(Ee.a)(e.origRating),newRating:Object(Ee.a)(e.newRating)})},e);case"MOVE_MATCH":return Object(D.a)(Object(B.a)([t.tourneyId,"roundList",t.roundId]),Object(oe.a)(t.oldIndex,t.newIndex),e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type "+t.type)}var a}var Qe=Object(n.createContext)(null);function Fe(){return Object(n.useContext)(Qe)}function Je(e){var t=Object(n.useContext)(Qe),a=Object(f.a)(t,2),r=a[0],l=a[1];return[r[e],l]}function qe(e,t){var a=Je(e),n=Object(f.a)(a,2),r=n[0],l=n[1],c=r.roundList[t],u=c.reduce(function(e,t){return e.concat(t.players)},[]);return{tourney:r,dispatch:l,unmatched:Object(pe.a)(r.players,u),matchList:c}}function ze(e){var t=Object(n.useReducer)(Ge,Ke),a=Object(f.a)(t,2),r=a[0],l=a[1];return Object(n.createElement)(Qe.Provider,{value:[r,l]},e.children)}var Xe=a(75);function Ze(e,t){switch(t.type){case"SET_BYE_VALUE":return Object(x.a)("byeValue",t.byeValue,e);case"LOAD_STATE":return t.state;default:throw new Error("Unexpected action type.")}}var $e=Object(n.createContext)(null);function et(){return Object(n.useContext)($e)}function tt(e){var t=Object(n.useReducer)(Ze,Xe),a=Object(f.a)(t,2),r=a[0],l=a[1];return Object(n.createElement)($e.Provider,{value:[r,l]},e.children)}function at(e){var t=Math.ceil(Math.log2(e));return Number.isFinite(t)?t:0}function nt(e,t){return e.filter(function(e){return e.id===t})[0]}a(109),a(110);var rt=a(31),lt=a.n(rt);function ct(e){var t=e.tourneyId,a=e.children,l=e.navigate,c=Je(t=Number(t)),i=Object(f.a)(c,2),o=i[0],s=i[1],m=o.name,d=o.players,b=o.roundList,h=ce(),N=h.playerState,j=h.getPlayer,R=h.playerDispatch,C=Object(n.useMemo)(function(){var e=g()(b);if(!e)return!0;var t=e.reduce(function(e,t){return e.concat(t.players)},[]),a=d.filter(function(e){return!t.includes(e)}),n=e.map(function(e){return e.result[0]+e.result[1]});return 0===a.length&&!n.includes(0)},[d,b]);Object(n.useEffect)(function(){var e=document.title;return document.title=m,function(){document.title=e}},[m]);var S=b.length>=at(d.length),A=C?S?["All necessary rounds have completed.",!0]:["Ready to begin a new round.",!1]:["You must complete the last round before beginning a new one.",!0],k=Object(f.a)(A,2),T=k[0],L=k[1];function D(){return(D=Object(p.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete the last round?")){e.next=5;break}return e.next=3,l(".");case 3:g()(b).forEach(function(e){e.result[0]+e.result[1]!==0&&e.players.forEach(function(t,a){if(t!==q){var n=j(t).matchCount;R({type:"SET_PLAYER_MATCHCOUNT",id:t,matchCount:n-1}),R({type:"SET_PLAYER_RATING",id:t,rating:e.origRating[a]})}})}),s({type:"DEL_LAST_ROUND",players:N.players,tourneyId:t});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.a.createElement("div",{className:lt.a.tournament},r.a.createElement("div",{className:lt.a.header},r.a.createElement("nav",null,r.a.createElement(u.a,{to:"/"},r.a.createElement(_.a,null)," Back")),r.a.createElement("h2",null,m)),r.a.createElement("div",{className:lt.a.sidebar},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.a,{to:"."},"Players")),r.a.createElement("li",null,r.a.createElement(u.a,{to:"crosstable"},"Crosstable")),r.a.createElement("li",null,r.a.createElement(u.a,{to:"scores"},"Score detail"))),r.a.createElement("hr",null),r.a.createElement("ul",null,Object.keys(b).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement(u.a,{to:"".concat(e)},"Round ",Number(e)+1))}))),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){S&&!window.confirm("All rounds have completed. Are you sure you want to begin a new one?")||s({type:"ADD_ROUND",tourneyId:t})},disabled:!C},r.a.createElement(w.a,null)," New round")," ",r.a.createElement(y.a,{label:T},r.a.createElement("span",{className:"helpIcon"},L?r.a.createElement(v.a,{className:"status-alert"}):r.a.createElement(O.a,{className:"status-ok"})))),r.a.createElement("li",null,r.a.createElement("button",{className:"danger "+lt.a.toolbarItem,onClick:function(){return D.apply(this,arguments)},disabled:0===b.length},r.a.createElement(I.a,null)," Remove last round")),r.a.createElement("li",null,"Round progress: ",b.length,"/",at(d.length)," "))),r.a.createElement("div",{className:lt.a.content},a))}function ut(e){var t=Fe(),a=Object(f.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),o=Object(f.a)(i,2),s=o[0],m=o[1];return r.a.createElement("div",null,l.length>0&&r.a.createElement("h2",null,"Tournament list"),l.length>0?r.a.createElement("ol",null,l.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(u.a,{to:String(t)},e.name)," ",r.a.createElement("button",{title:"Delete \u201c".concat(e.name,"\u201d"),"aria-label":"Delete \u201c".concat(e.name,"\u201d"),className:"danger iconButton",onClick:function(){return c({type:"DEL_TOURNEY",index:t})}},r.a.createElement(I.a,null)))})):r.a.createElement("p",null,"No tournaments added yet."),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c({type:"ADD_TOURNEY",name:s}),m("")}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Make a new tournament"),r.a.createElement("label",null,"Name:"," ",r.a.createElement("input",{type:"text",placeholder:"tournament name",value:s,onChange:function(e){m(e.target.value)},required:!0})),r.a.createElement("input",{type:"submit",value:"Create"}))))}var it=function(e){return r.a.createElement("div",null,e.children)},ot=a(11),st=a.n(ot);function mt(e){var t=Number(e.playerId),a=ce(),l=a.playerState,c=a.playerDispatch,u=a.getPlayer,i=l.players,o=l.avoid,s=Object(n.useState)(ee(t,o)),m=Object(f.a)(s,2),d=m[0],E=m[1],p=Object(n.useMemo)(function(){return i.map(function(e){return e.id}).filter(function(e){return!d.includes(e)&&e!==t})},[i,t,d]),y=Object(n.useState)(p[0]),b=Object(f.a)(y,2),g=b[0],h=b[1];function O(e){e.preventDefault();var a=e.currentTarget,n=a.firstName,r=a.lastName,l=a.matchCount,u=a.rating;c({type:"SET_PLAYER",id:t,firstName:n.value,lastName:r.value,matchCount:Number(l.value),rating:Number(u.value)})}return Object(n.useEffect)(function(){E(ee(t,o))},[o,t]),Object(n.useEffect)(function(){h(p[0])},[h,p]),Object(n.useEffect)(function(){var e=document.title;return document.title=u(t).firstName+" "+u(t).lastName,function(){document.title=e}},[t,u]),r.a.createElement("div",null,r.a.createElement("h2",null,"Profile for"," ",u(t).firstName," ",u(t).lastName),r.a.createElement("form",{onChange:O,onSubmit:O},r.a.createElement("p",null,r.a.createElement("label",null,"First name"," ",r.a.createElement("input",{type:"text",name:"firstName",defaultValue:u(t).firstName}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name"," ",r.a.createElement("input",{type:"text",name:"lastName",defaultValue:u(t).lastName}))),r.a.createElement("p",null,r.a.createElement("label",null,"Matches played"," ",r.a.createElement("input",{type:"number",name:"matchCount",defaultValue:String(u(t).matchCount)}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating",r.a.createElement("input",{type:"number",name:"rating",defaultValue:String(u(t).rating)}))),r.a.createElement("p",null,r.a.createElement("label",null,"K factor",r.a.createElement("input",{type:"number",readOnly:!0,value:st()(te(u(t).matchCount)).format("00")})))),r.a.createElement("ul",null,r.a.createElement("h3",null,"Players to avoid"),d.map(function(e){return r.a.createElement("li",{key:e},u(e).firstName," ",u(e).lastName," ",r.a.createElement("button",{className:"danger iconButton",onClick:function(){return c({type:"DEL_AVOID_PAIR",pair:[t,e]})},title:"Remove ".concat(u(e).firstName," \n").concat(u(e).lastName),"arial-label":"Remove \n".concat(u(e).firstName," ").concat(u(e).lastName," from avoid list.")},r.a.createElement(I.a,null)))}),0===o.length&&r.a.createElement("li",null,"None")),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),c({type:"ADD_AVOID_PAIR",pair:[t,Number(g)]})}(e)}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add player to avoid"),r.a.createElement("select",{onBlur:function(e){return h(Number(e.target.value))}},p.map(function(e){return r.a.createElement("option",{key:e,value:e},u(e).firstName," ",u(e).lastName)}))," ",r.a.createElement("input",{type:"submit",value:"Add"}))))}var dt=a(20),Et=a(76),pt=a.n(Et),ft=a(89),yt=a(58),bt=a.n(yt);function gt(e){var t=e.children,a=e.style;return r.a.createElement("div",{style:Object(ft.a)({},a),className:bt.a.panel},t)}function ht(e){return r.a.createElement("div",Object.assign({},e,{className:bt.a.panels}),r.a.Children.map(e.children,function(e){return e}))}function Ot(e){var t=e.id,a=e.firstName,n=e.lastName,l=ce().getPlayer;return t===q?r.a.createElement("span",null,a&&l(t).firstName," ",n&&l(t).lastName):r.a.createElement(u.a,{to:"/players/"+t},a&&l(t).firstName," ",n&&l(t).lastName)}function Nt(){var e=ce().playerDispatch,t={firstName:"",lastName:"",rating:1200},a=Object(n.useState)(t),l=Object(f.a)(a,2),c=l[0],u=l[1],i=function(e){e.preventDefault();var t=e.currentTarget,a=t.name,n=t.value;u(function(e){return Object(x.a)(a,n,e)})};return r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=c.firstName,r=c.lastName,l=c.rating;u(t),e({type:"ADD_PLAYER",firstName:n,lastName:r,rating:l})}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Register a new player"),r.a.createElement("p",null,r.a.createElement("label",null,"First name"," ",r.a.createElement("input",{type:"text",name:"firstName",onChange:i,value:c.firstName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name"," ",r.a.createElement("input",{type:"text",name:"lastName",onChange:i,value:c.lastName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating "," ",r.a.createElement("input",{type:"number",name:"rating",onChange:i,value:c.rating,required:!0}))),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Add"}))))}function vt(e){var t=ce(),a=t.playerState,n=t.playerDispatch;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("caption",null,"Demo Roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Rating"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.players.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__player"},r.a.createElement(Ot,{id:e.id,firstName:!0})),r.a.createElement("td",{className:"table__player"},r.a.createElement(Ot,{id:e.id,lastName:!0})),r.a.createElement("td",{className:"table__number"},e.rating),r.a.createElement("td",null,r.a.createElement("button",{className:"danger iconButton",onClick:function(t){return function(e,t){e.preventDefault(),n({type:"DEL_PLAYER",id:t})}(t,e.id)},title:"Delete ".concat(e.firstName," ").concat(e.lastName),"aria-label":"Delete ".concat(e.firstName," ").concat(e.lastName)},r.a.createElement(I.a,null))),r.a.createElement("td",null,r.a.createElement(u.a,{to:String(e.id)},"Open",r.a.createElement(dt.a,null," ",e.firstName," ",e.lastName)," ",r.a.createElement(pt.a,null))))}))),r.a.createElement(Nt,null))}function jt(e){return r.a.createElement("div",null,e.children)}st.a.register("format","half",{regexps:{format:/(1\/2)/,unformat:/(1\/2)/},format:function(e,t,a){var n=Math.floor(e),r=e-n;return.5===r?r="\xbd":0===r&&(r=""),0===n&&r&&(n=""),String(n)+r},unformat:function(e){return Number(e)}});var _t=a(59),Rt=a.n(_t),It=a(10),Ct=a(18),wt=a.n(Ct);function St(e){var t=Je(e.tourneyId),a=Object(f.a)(t,1)[0],n=a.tieBreaks,l=a.roundList,c=ce().getPlayer,u=function(e,t){var a=Te(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),n=Object(f.a)(a,2),r=n[0],l=n[1];return[r.reduce(function(e,t,a,n){var r,l,c=n[a-1];return 0===a||(l=c,(r=t).score!==l.score||r.tieBreaks.reduce(function(e,t,a){return e.concat(t!==l.tieBreaks[a])},[]).includes(!0))?Object(P.a)([t],e):Object(D.a)(Object(M.a)(e.length-1),Object(P.a)(t),e)},[]),l]}(n,l),i=Object(f.a)(u,2),o=i[0],s=i[1];return r.a.createElement("table",{className:wt.a.table},r.a.createElement("caption",null,"Score detail"),r.a.createElement("tbody",null,r.a.createElement("tr",{className:wt.a.topHeader},r.a.createElement("th",{scope:"col"},"Rank"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Score"),s.map(function(e,t){return r.a.createElement("th",{key:t,scope:"col"},e)})),o.map(function(e,t){return e.map(function(e,a,n){return r.a.createElement("tr",{key:e.id,className:wt.a.row},0===a&&r.a.createElement("th",{scope:"row",className:"table__number "+wt.a.rank,rowSpan:n.length},st()(t+1).format("0o")),r.a.createElement("th",{scope:"row",className:wt.a.playerName,"data-testid":t},c(e.id).firstName,"\xa0",c(e.id).lastName),r.a.createElement("td",{className:"table__number","data-testid":Rt()(c(e.id).firstName+c(e.id).lastName+" score")},st()(e.score).format("1/2")),e.tieBreaks.map(function(t,a){return r.a.createElement("td",{key:a,className:"table__number","data-testid":Rt()(c(e.id).firstName+c(e.id).lastName+s[a])},st()(t).format("1/2"))}))})})))}function At(e){var t=e.tourneyId,a=Je(t),l=Object(f.a)(a,2),c=l[0].tieBreaks,u=l[1],i=Object(n.useState)(null),o=Object(f.a)(i,2),s=o[0],m=o[1];function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=Object(he.a)(s);c.includes(a(e))?(u({type:"DEL_TIEBREAK",id:a(e),tourneyId:t}),m(null)):u({type:"ADD_TIEBREAK",id:a(e),tourneyId:t})}function E(e){var a=c.indexOf(s);u({type:"MOVE_TIEBREAK",oldIndex:a,newIndex:a+e,tourneyId:t})}return r.a.createElement("div",null,r.a.createElement("h3",null,"Selected tiebreak methods"),r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{onClick:function(){return d()},disabled:null===s},"Toggle"),r.a.createElement("button",{onClick:function(){return E(-1)},disabled:null===s},"Move up"),r.a.createElement("button",{onClick:function(){return E(1)},disabled:null===s},"Move down"),r.a.createElement("button",{onClick:function(){return m(null)},disabled:null===s},"Done")),r.a.createElement("ol",null,c.map(function(e){return r.a.createElement("li",{key:e,className:s===e?"selected":""},ve[e].name,r.a.createElement("button",{onClick:function(){return m(s===e?null:e)},disabled:null!==s&&s!==e},s===e?"Done":"Edit"))})),r.a.createElement("h3",null,"Available tiebreak methods"),r.a.createElement("ol",null,ve.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:c.includes(t)?"enabled":"disabled"},e.name),!c.includes(t)&&r.a.createElement("button",{onClick:function(){return d(t)}},"Add"))})))}var kt=function(e){var t=e.tourneyId;return r.a.createElement(It.e,null,r.a.createElement(It.b,null,r.a.createElement(It.a,null,"Scores"),r.a.createElement(It.a,null,"Edit tiebreak rules")),r.a.createElement(It.d,null,r.a.createElement(It.c,null,r.a.createElement(St,{tourneyId:Number(t)})),r.a.createElement(It.c,null,r.a.createElement(At,{tourneyId:Number(t)}))))},Tt=a(26);function Lt(e){var t=e.tourneyId,a=Je(t),n=Object(f.a)(a,2),l=n[0].players,c=n[1],u=ce(),i=u.playerState,o=u.getPlayer;function s(e){var a=Number(e.target.value);e.target.checked?c({type:"SET_TOURNEY_PLAYERS",players:l.concat([a]),tourneyId:t}):c({type:"SET_TOURNEY_PLAYERS",players:l.filter(function(e){return e!==a}),tourneyId:t})}return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return c({type:"SET_TOURNEY_PLAYERS",players:i.players.map(function(e){return e.id}),tourneyId:t})}},"Select all"),r.a.createElement("button",{onClick:function(){return c({type:"SET_TOURNEY_PLAYERS",players:[],tourneyId:t})}},"Select none"),r.a.createElement("table",null,r.a.createElement("caption",null,"Select players"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Select"))),r.a.createElement("tbody",null,i.players.map(function(e){var t=e.id;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,o(t).firstName),r.a.createElement("td",null,o(t).lastName),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",value:t,checked:l.includes(t),onChange:s})))}))),r.a.createElement(Nt,null))}function Dt(e){var t=e.tourneyId,a=Je(t),l=Object(f.a)(a,2),c=l[0],u=c.players,i=c.byeQueue,o=c.roundList,s=l[1],m=ce().getPlayer,d=Object(n.useState)(0===u.length),E=Object(f.a)(d,2),p=E[0],y=E[1];return r.a.createElement(ht,null,r.a.createElement(gt,null,r.a.createElement("button",{onClick:function(){return y(!0)}},"Edit player roster"),r.a.createElement("table",null,r.a.createElement("caption",null,"Current roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Options"))),r.a.createElement("tbody",null,u.map(function(e){return r.a.createElement("tr",{key:e,className:m(e).type+" player"},r.a.createElement("td",null,m(e).firstName),r.a.createElement("td",null,m(e).lastName),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return s({type:"SET_BYE_QUEUE",byeQueue:i.concat([e]),tourneyId:t})},disabled:i.includes(e)},"Bye signup")))})))),r.a.createElement(gt,null,r.a.createElement("h3",null,"Bye queue"),0===i.length&&r.a.createElement("p",null,"No players have signed up for a bye round."),r.a.createElement("ol",null,i.map(function(e){return r.a.createElement("li",{key:e,className:Ce(e,o)?"disabled":""},m(e).firstName," ",m(e).lastName,r.a.createElement("button",{onClick:function(){return s({type:"SET_BYE_QUEUE",byeQueue:i.filter(function(t){return e!==t}),tourneyId:t})}},"Remove"))}))),r.a.createElement(Tt.a,{isOpen:p},r.a.createElement("button",{onClick:function(){return y(!1)}},"Done"),r.a.createElement(Lt,{tourneyId:t})))}var Bt=a(78),Pt=a.n(Bt);function xt(e){var t=e.tourneyId,a=Je(Number(t)),l=Object(f.a)(a,1)[0],c=l.tieBreaks,u=l.roundList,i=ce().getPlayer,o=Object(n.useMemo)(function(){var e=Te(c,u),t=Object(f.a)(e,1)[0],a=t.reduce(function(e,t){return Object(x.a)(String(t.id),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Re(e,t,a).reduce(function(t,a){var n=a.players.filter(function(t){return t!==e})[0],r=a.players.indexOf(e),l=a.result[r];return Object(D.a)(Object(ge.a)(String(n)),Object(S.a)(Object(he.a)(0),Object(Oe.a)(l)),t)},{})}(t.id,u),e)},{});return[t,a]},[u,c]),s=Object(f.a)(o,2),m=s[0],d=s[1];return r.a.createElement("table",{className:wt.a.table},r.a.createElement("caption",null,"Crosstable"),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"Name"),m.map(function(e,t){return r.a.createElement("th",{key:t},t+1)}),r.a.createElement("th",null,"Score"),r.a.createElement("th",null,"Rating")),m.map(function(e,t){return r.a.createElement("tr",{key:t,className:wt.a.row},r.a.createElement("th",{scope:"col"},t+1),r.a.createElement("th",{scope:"row",className:wt.a.playerName},i(e.id).firstName,"\xa0",i(e.id).lastName),m.map(function(t,a){return r.a.createElement("td",{key:a,className:"table__number"},function(e,t){if(e===t)return r.a.createElement(Pt.a,null);var a=d[String(e)][t];return void 0===a?null:st()(a).format("1/2")}(e.id,t.id))}),r.a.createElement("td",{className:"table__number"},st()(e.score).format("1/2")),r.a.createElement("td",{className:"table__number"},i(e.id).rating))})))}var Mt=a(79),Yt=a.n(Mt),Ut=a(80),Ht=a.n(Ut),Vt=a(49),Wt=a.n(Vt),Kt=a(81),Gt=a.n(Kt),Qt=a(82),Ft=a.n(Qt),Jt=a(83),qt=a.n(Jt),zt=a(84),Xt=a.n(zt),Zt=a(50),$t=a.n(Zt);function ea(e){var t=e.matchId,a=e.color,n=e.tourneyId,l=e.roundId,c=qe(n,l),u=c.tourney,i=c.matchList,o=ce(),s=o.playerState,m=o.getPlayer,d=nt(i,t),E=De(d.players[a],s.players,s.avoid,u.roundList,l),p=E.colorBalance,f=p<0?"White +"+Math.abs(p):p>0?"Black +"+p:"Even";return r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,E.profile.firstName," ",E.profile.lastName),r.a.createElement("dt",null,"Score"),r.a.createElement("dd",null,E.score),r.a.createElement("dt",null,"Rating"),r.a.createElement("dd",{"data-testid":"rating-".concat(E.id)},d.origRating[a]," (",st()(d.newRating[a]-d.origRating[a]).format("+0"),")"),r.a.createElement("dt",null,"Color balance"),r.a.createElement("dd",null,f),r.a.createElement("dt",null,"Has had a bye round"),r.a.createElement("dd",null,E.hasHadBye?"Yes":"No"),r.a.createElement("dt",null,"Opponent history"),r.a.createElement("dd",null,r.a.createElement("ol",null,E.opponentHistory.map(function(e){return r.a.createElement("li",{key:e},m(e).firstName," ",m(e).lastName)}))))}var ta=a(34),aa=a.n(ta);a(116);function na(e){var t=e.pos,a=e.match,l=e.tourneyId,c=e.roundId,u=e.selectedMatch,i=e.setSelectedMatch,o=qe(l,c),s=o.tourney,m=o.dispatch,d=ce(),E=d.playerDispatch,p=d.getPlayer,y=Object(n.useState)(!1),b=Object(f.a)(y,2),g=b[0],h=b[1],O=a.result[0]>a.result[1]?"WHITE":a.result[1]>a.result[0]?"BLACK":a.result.every(function(e){return.5===e})?"DRAW":"NOTSET",N=p(a.players[0]).firstName+" "+p(a.players[0]).lastName,v=p(a.players[1]).firstName+" "+p(a.players[1]).lastName;function j(e){var t=function(){switch(e.currentTarget.value){case"WHITE":return[1,0];case"BLACK":return[0,1];case"DRAW":return[.5,.5];case"NOTSET":return[0,0];default:throw new Error}}(),n=p(a.players[J]),r=p(a.players[F]),u="NOTSET"===e.currentTarget.value?a.origRating:function(e,t,a){var n=new Q.a(te(t[J])),r=new Q.a(te(t[F])),l=[n.getExpected(e[J],e[F]),r.getExpected(e[F],e[J])];return[n.updateRating(l[J],a[J],e[J]),r.updateRating(l[F],a[F],e[F])].map(function(e){return e<100?100:e})}(a.origRating,[n.matchCount,r.matchCount],t);E({type:"SET_PLAYER_RATING",id:n.id,rating:u[J]}),E({type:"SET_PLAYER_RATING",id:r.id,rating:u[F]}),0===a.result.reduce(function(e,t){return e+t})&&(E({type:"SET_PLAYER_MATCHCOUNT",id:n.id,matchCount:n.matchCount+1}),E({type:"SET_PLAYER_MATCHCOUNT",id:r.id,matchCount:r.matchCount+1})),m({type:"SET_MATCH_RESULT",tourneyId:l,roundId:c,matchId:a.id,result:t,newRating:u})}return r.a.createElement("tr",{className:a.id===u?"selected":""},r.a.createElement("th",{className:"table__number row__id",scope:"row"},t+1),r.a.createElement("td",{className:"table__player row__player","data-testid":"match-".concat(t,"-white")},N," ","WHITE"===O&&r.a.createElement("span",{role:"img","aria-label":"Winner"},"\ud83c\udfc6")),r.a.createElement("td",{className:"table__player row__player","data-testid":"match-".concat(t,"-black")},v," ","BLACK"===O&&r.a.createElement("span",{role:"img","aria-label":"Winner"},"\ud83c\udfc6")),r.a.createElement("td",{className:"data__input row__controls"},r.a.createElement("select",{onBlur:j,onChange:j,disabled:a.players.includes(q),value:O,className:ta.winnerSelect},r.a.createElement("option",{value:"NOTSET"},"Select a winner"),r.a.createElement("option",{value:"WHITE"},N," won"),r.a.createElement("option",{value:"BLACK"},v," won"),r.a.createElement("option",{value:"DRAW"},"Draw"))),r.a.createElement("td",{className:"data__input row__controls"},u!==a.id?r.a.createElement("button",{className:"iconButton",onClick:function(){return i(a.id)},title:"Edit match"},r.a.createElement(qt.a,null)):r.a.createElement("button",{className:"iconButton",onClick:function(){return i(null)},title:"End editing match"},r.a.createElement($t.a,null)),r.a.createElement("button",{className:"iconButton",onClick:function(){return h(!0)},title:"Open match information."},r.a.createElement(Xt.a,null),r.a.createElement(dt.a,null,"View information for match:"," ",N," versus ",v)),r.a.createElement(Tt.a,{isOpen:g},r.a.createElement("button",{onClick:function(){return h(!1)}},"close"),r.a.createElement("p",null,s.name),r.a.createElement("p",null,"Round ",c+1,", match ",t+1),r.a.createElement(ht,null,r.a.createElement(gt,null,r.a.createElement(ea,{matchId:a.id,color:0,tourneyId:l,roundId:c})),r.a.createElement(gt,null,r.a.createElement(ea,{matchId:a.id,color:1,tourneyId:l,roundId:c}))))))}function ra(e){var t=e.roundId,a=e.tourneyId,l=qe(a,t),c=l.matchList,u=l.dispatch,i=ce(),o=i.playerDispatch,s=i.getPlayer,m=Object(n.useState)(null),d=Object(f.a)(m,2),E=d[0],p=d[1];if(!c)throw new Error("Round "+t+" does not exist.");function y(e,n){var r,l,i=(l=e,(r=c).indexOf(nt(r,l)));u({type:"MOVE_MATCH",tourneyId:a,roundId:t,oldIndex:i,newIndex:i+n>=0?i+n:0})}return r.a.createElement(ht,{"data-testid":"round-"+t},r.a.createElement(gt,null,r.a.createElement("div",{className:aa.a.toolbar},r.a.createElement("button",{className:"danger iconButton",onClick:function(){return function(e){var n=nt(c,e);0!==n.result.reduce(function(e,t){return e+t})&&n.players.forEach(function(e,t){o({type:"SET_PLAYER_MATCHCOUNT",id:e,matchCount:s(e).matchCount-1}),o({type:"SET_PLAYER_RATING",id:e,rating:n.origRating[t]})}),u({type:"DEL_MATCH",tourneyId:a,roundId:t,matchId:e}),p(null)}(E)},disabled:null===E},r.a.createElement(I.a,null)," Unmatch"),r.a.createElement("button",{className:"iconButton",onClick:function(){u({type:"SWAP_COLORS",tourneyId:a,roundId:t,matchId:E})},disabled:null===E},r.a.createElement(Wt.a,null)," Swap colors"),r.a.createElement("button",{className:"iconButton",onClick:function(){return y(E,-1)},disabled:null===E},r.a.createElement(Gt.a,null)," Move up"),r.a.createElement("button",{className:"iconButton",onClick:function(){return y(E,1)},disabled:null===E},r.a.createElement(Ft.a,null)," Move down")),0===c.length&&r.a.createElement("p",null,"No players matched yet."),r.a.createElement("table",{className:aa.a.table},c.length>0&&r.a.createElement("caption",null,"Round ",t+1," results"),r.a.createElement("tbody",null,c.length>0&&r.a.createElement("tr",null,r.a.createElement("th",{className:"row__id",scope:"col"},"#"),r.a.createElement("th",{className:"row__player",scope:"col"},"White"),r.a.createElement("th",{className:"row__player",scope:"col"},"Black"),r.a.createElement("th",{className:"row__result",scope:"col"},"Result"),r.a.createElement("th",{className:"row__controls",scope:"col"},"Controls")),c.map(function(e,n){return r.a.createElement(na,{key:e.id,pos:n,match:e,tourneyId:a,roundId:t,selectedMatch:E,setSelectedMatch:p})})))),r.a.createElement(gt,null))}var la=a(85),ca=a.n(la);function ua(e){var t=e.tourneyId,a=e.roundId,l=e.stagedPlayers,c=e.setStagedPlayers,u=qe(t,a),i=u.dispatch,o=u.unmatched,s=ce(),m=s.playerState,d=s.getPlayer,E=et(),p=Object(f.a)(E,1)[0].byeValue,y=Object(n.useState)(!1),b=Object(f.a)(y,2),g=b[0],h=b[1];var O=o.length%2!==0?Object(P.a)(q,o):o;return 0===o.length?null:r.a.createElement("div",null,r.a.createElement("h3",null,"Unmatched players"),r.a.createElement("button",{onClick:function(){return i({type:"AUTO_PAIR",unpairedPlayers:o,tourneyId:t,roundId:a,playerState:m,byeValue:p})},disabled:0===o.length},"Auto-pair unmatched players"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return h(!0)}},"Add or remove players from the roster."),r.a.createElement("ul",null,O.map(function(e){return r.a.createElement("li",{key:e},l.includes(e)?r.a.createElement("button",{disabled:!0},"Selected"):r.a.createElement("button",{disabled:!l.includes(null),onClick:function(){return t=e,void(null===l[J]?c(function(e){return Object(W.a)(Object(M.a)(J),t,e)}):null===l[F]&&c(function(e){return Object(W.a)(Object(M.a)(F),t,e)}));var t}},r.a.createElement(ca.a,null),r.a.createElement(dt.a,null,"Select ",d(e).firstName," ",d(e).lastName))," ",d(e).firstName," ",d(e).lastName)})),r.a.createElement(Tt.a,{isOpen:g},r.a.createElement("button",{onClick:function(){return h(!1)}},"Done"),r.a.createElement(Lt,{tourneyId:t})))}var ia=a(61),oa=a.n(ia);function sa(e){var t=e.tourneyId,a=e.roundId,l=e.stagedPlayers,c=e.setStagedPlayers,u=ce(),i=u.playerState,o=u.getPlayer,s=i.players,m=Je(t)[1],d=et(),E=Object(f.a)(d,1)[0].byeValue,p=Object(f.a)(l,2),y=p[0],b=p[1];function g(e){c(function(t){return Object(W.a)(Object(M.a)(e),null,t)})}return r.a.createElement("div",null,r.a.createElement("h2",null,"Selected for matching:"),r.a.createElement("p",null,"White:"," ",null!==y&&r.a.createElement(n.Fragment,null,o(y).firstName," ",o(y).lastName," ",r.a.createElement("button",{onClick:function(){return g(J)}},r.a.createElement(oa.a,null)," Remove"))),r.a.createElement("p",null,"Black:"," ",null!==b&&r.a.createElement(n.Fragment,null,o(b).firstName," ",o(b).lastName," ",r.a.createElement("button",{onClick:function(){return g(F)}},r.a.createElement(oa.a,null)," Remove"))),r.a.createElement("button",{onClick:function(){return c(function(e){return[e[F],e[J]]})},disabled:l.every(function(e){return null===e})},r.a.createElement(Wt.a,null)," Swap colors")," ",r.a.createElement("button",{onClick:function(){m({type:"MANUAL_PAIR",pair:[y,b],tourneyId:t,roundId:a,byeValue:E,players:s}),c([null,null])},disabled:l.includes(null)},r.a.createElement($t.a,null)," Match selected")," ")}function ma(e){var t=e.playerId,a=e.tourneyId,n=e.roundId,l=Je(a),c=Object(f.a)(l,1)[0].roundList,u=ce(),i=u.playerState,o=u.getPlayer,s=De(t,i.players,i.avoid,c,n),m=s.profile,d=s.rating,E=s.score,p=s.colorBalance,y=s.hasHadBye,b=s.opponentHistory,g=s.avoidList,h=p<0?"White +"+Math.abs(p):p>0?"Black +"+p:"Even";return r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,m.firstName," ",m.lastName),r.a.createElement("p",null,"Score: ",E),r.a.createElement("p",null,"Rating: ",d),r.a.createElement("p",null,"Color balance: ",h),r.a.createElement("p",null,"Has had a bye round: ",y?"Yes":"No"),r.a.createElement("p",null,"Opponent history:"),r.a.createElement("ol",null,b.map(function(e){return r.a.createElement("li",{key:e},o(e).firstName," ",o(e).lastName)})),r.a.createElement("p",null,"Players to avoid:"),r.a.createElement("ol",null,g.map(function(e){return r.a.createElement("li",{key:e},o(e).firstName," ",o(e).lastName)})))}function da(e){var t=e.tourneyId,a=e.roundId,l=Object(n.useState)([null,null]),c=Object(f.a)(l,2),u=c[0],i=c[1];return r.a.createElement(ht,null,r.a.createElement(gt,null,r.a.createElement(ua,{tourneyId:t,roundId:a,stagedPlayers:u,setStagedPlayers:i})),r.a.createElement(gt,null,r.a.createElement(sa,{tourneyId:t,roundId:a,stagedPlayers:u,setStagedPlayers:i}),r.a.createElement(ht,null,u.map(function(e){return null!==e&&r.a.createElement(gt,{key:e},r.a.createElement(ma,{playerId:e,tourneyId:t,roundId:a}))}))))}function Ea(e){var t=e.tourneyId,a=e.roundId,l=qe(t=Number(t),a=Number(a)).unmatched,c=Object(n.useState)(0),u=Object(f.a)(c,2),i=u[0],o=u[1];return Object(n.useEffect)(function(){l.length>0?o(1):o(0)},[l.length]),r.a.createElement(It.e,{index:i,onChange:function(e){return o(e)}},r.a.createElement(It.b,null,r.a.createElement(It.a,null,r.a.createElement(Yt.a,null)," Matches"),r.a.createElement(It.a,{disabled:0===l.length},r.a.createElement(Ht.a,null)," Unmatched players")),r.a.createElement(It.d,null,r.a.createElement(It.c,null,r.a.createElement(ra,{tourneyId:t,roundId:a})),r.a.createElement(It.c,null,r.a.createElement(da,{tourneyId:t,roundId:a}))))}function pa(e){var t=Fe(),a=Object(f.a)(t,2),l=a[0],c=a[1],u=et(),i=Object(f.a)(u,2),o=i[0],s=i[1],m=ce(),d=m.playerState,E=m.playerDispatch,p=Object(n.useState)(""),y=Object(f.a)(p,2),b=y[0],g=y[1],h=Object(n.useMemo)(function(){return{options:o,tourneys:l,playerState:d}},[o,l,d]);function O(e){c({type:"LOAD_STATE",state:e.tourneys}),s({type:"LOAD_STATE",state:e.options}),E({type:"LOAD_STATE",state:e.playerState}),window.alert("Data loaded!")}return Object(n.useEffect)(function(){g(JSON.stringify(h,null,4))},[h]),r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Bye options"),"Select how many points a bye is worth:"," ",r.a.createElement("label",null,"1",r.a.createElement("input",{type:"radio",checked:1===o.byeValue,onChange:function(){return s({type:"SET_BYE_VALUE",byeValue:1})}}))," ",r.a.createElement("label",null,"\xbd",r.a.createElement("input",{type:"radio",checked:.5===o.byeValue,onChange:function(){return s({type:"SET_BYE_VALUE",byeValue:.5})}})))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Manage data"),r.a.createElement("p",null,r.a.createElement("a",{href:"data:application/json,"+encodeURIComponent(JSON.stringify(h)),download:"chessahoochee.json"},"Download all data")),r.a.createElement("label",null,"Load data file:"," ",r.a.createElement("input",{type:"file",id:"file",onChange:function(e){e.preventDefault();var t=new FileReader;t.onload=function(e){var t=e.target.result;O(JSON.parse(t))},t.readAsText(e.currentTarget.files[0]),e.currentTarget.value=""}}))),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),O(JSON.parse(b))}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Advanced: manually edit data"),r.a.createElement("textarea",{className:"json",rows:25,cols:50,value:b,name:"playerdata",onChange:function(e){return g(e.currentTarget.value)},spellCheck:!1}),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Load"})))))}var fa=a(53),ya=a.n(fa),ba=function(){return r.a.createElement("div",{className:ya.a.caution},r.a.createElement("p",{className:ya.a.caution__text},r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f"),"\xa0 This is an unstable demo build. \xa0",r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f")," ","Want to help make it better? Head to the"," ",r.a.createElement("span",{role:"img","aria-label":"finger pointing right"},"\ud83d\udc49"),"\xa0",r.a.createElement("a",{className:ya.a.caution__link,href:"https://github.com/johnridesabike/chessahoochee"},"Git repository"),"."))},ga=(a(117),a(36)),ha=o()(),Oa=Object(u.e)(ha);var Na=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(ba,null),r.a.createElement(u.b,{history:Oa},r.a.createElement("nav",{className:"header"},r.a.createElement(u.a,{to:"tourneys",className:ga.link},"Tournaments"),r.a.createElement(u.a,{to:"players",className:ga.link},"Players"),r.a.createElement(u.a,{to:"options",className:ga.link},"Options"),r.a.createElement(u.a,{to:"about",className:ga.link},"About")),r.a.createElement("main",{className:"content"},r.a.createElement(tt,null,r.a.createElement(ue,null,r.a.createElement(ze,null,r.a.createElement(u.d,null,r.a.createElement(it,{path:"tourneys"},r.a.createElement(ut,{path:"/"}),r.a.createElement(ct,{path:":tourneyId"},r.a.createElement(Dt,{path:"/"}),r.a.createElement(xt,{path:"crosstable"}),r.a.createElement(kt,{path:"scores"}),r.a.createElement(Ea,{path:":roundId"}))),r.a.createElement(jt,{path:"players"},r.a.createElement(vt,{path:"/"}),r.a.createElement(mt,{path:":playerId"})),r.a.createElement(pa,{path:"options"}),r.a.createElement(s,{path:"about"}),r.a.createElement(m,{default:!0}),r.a.createElement(u.c,{from:"/",to:"tourneys",noThrow:!0}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(n.StrictMode,null,r.a.createElement(Na,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},18:function(e,t,a){e.exports={table:"scores_table__22BFZ",topHeader:"scores_topHeader__2RVRR",row:"scores_row__bmBzX",playerName:"scores_playerName__3ghv9",rank:"scores_rank__3AxBb"}},31:function(e,t,a){e.exports={tournament:"tournament_tournament__2nSxH",header:"tournament_header__9nZzI",sidebar:"tournament_sidebar__21G-s",content:"tournament_content__1mdG3"}},34:function(e,t,a){e.exports={table:"round_table__2JmnE",winnerSelect:"round_winnerSelect__317oT",toolbar:"round_toolbar__3CWVM"}},36:function(e,t,a){e.exports={link:"App_link__TB6Cl"}},53:function(e,t,a){e.exports={caution:"caution_caution__17Bbq",caution__text:"caution_caution__text__2ptRS",caution__link:"caution_caution__link__X_K5Y"}},56:function(e){e.exports={playerList:[{id:0,type:"person",firstName:"Bruce",lastName:"Wayne",rating:1998,matchCount:9},{id:1,type:"person",firstName:"Dick",lastName:"Grayson",rating:1909,matchCount:9},{id:2,type:"person",firstName:"Alfred",lastName:"Pennyworth",rating:1999,matchCount:9},{id:3,type:"person",firstName:"Barbara",lastName:"Gordon",rating:1345,matchCount:7},{id:4,type:"person",firstName:"Kate",lastName:"Kane",rating:1538,matchCount:9},{id:5,type:"person",firstName:"Selina",lastName:"Kyle",rating:1495,matchCount:9},{id:6,type:"person",firstName:"Jason",lastName:"Todd",rating:1101,matchCount:7},{id:7,type:"person",firstName:"James",lastName:"Gordon",rating:1167,matchCount:7},{id:8,type:"person",firstName:"Helena",lastName:"Wayne",rating:1087,matchCount:7},{id:9,type:"person",firstName:"Joker",lastName:"",rating:1538,matchCount:1},{id:10,type:"person",firstName:"Harley",lastName:"Quinn",rating:1648,matchCount:1},{id:11,type:"person",firstName:"Victor",lastName:"Fries",rating:862,matchCount:1},{id:12,type:"person",firstName:"Oswald",lastName:"Cobblepot",rating:1812,matchCount:1},{id:13,type:"person",firstName:"Ra's",lastName:"al Ghul",rating:1404,matchCount:1},{id:14,type:"person",firstName:"Pamela",lastName:"Isley",rating:965,matchCount:1},{id:15,type:"person",firstName:"Edward",lastName:"Nigma",rating:948,matchCount:1},{id:16,type:"person",firstName:"Jonathan",lastName:"Crane",rating:899,matchCount:1},{id:17,type:"person",firstName:"Harvey",lastName:"Dent",rating:1649,matchCount:1},{id:18,type:"person",firstName:"Hugo",lastName:"Strange",rating:800,matchCount:0}],avoidList:[[3,7],[9,10],[8,0]]}},58:function(e,t,a){e.exports={panels:"utility_panels__LN75I",panel:"utility_panel__2GOiH"}},73:function(e){e.exports=[{name:"Wayne Manor Open",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,7,8],roundList:[[{id:"6-1",players:[6,1],result:[0,1],origRating:[1238,2108],newRating:[1236,2109]},{id:"7-2",players:[7,2],result:[0,1],origRating:[1049,2260],newRating:[1049,2260]},{id:"4-3",players:[4,3],result:[.5,.5],origRating:[1527,1755],newRating:[1553,1722]},{id:"5-0",players:[5,0],result:[0,1],origRating:[1284,1881],newRating:[1278,1887]},{id:"8--1",players:[8,-1],result:[1,0],origRating:[831,0],newRating:[831,0]}],[{id:"1-4",players:[1,4],result:[1,0],origRating:[2109,1685],newRating:[2122,1672]},{id:"0-8",players:[0,8],result:[1,0],origRating:[1887,831],newRating:[1887,830]},{id:"2-5",players:[2,5],result:[0,1],origRating:[2260,1278],newRating:[2101,1437]},{id:"3-6",players:[3,6],result:[1,0],origRating:[1545,1236],newRating:[1574,1207]},{id:"7--1",players:[7,-1],result:[1,0],origRating:[1049,0],newRating:[1049,0]}],[{id:"2-0",players:[2,0],result:[0,1],origRating:[2101,1887],newRating:[1998,1990]},{id:"8-1",players:[8,1],result:[1,0],origRating:[830,2122],newRating:[990,2008]},{id:"5-3",players:[5,3],result:[1,0],origRating:[1437,1574],newRating:[1529,1464]},{id:"4-7",players:[4,7],result:[0,1],origRating:[1672,1049],newRating:[1542,1244]},{id:"6--1",players:[6,-1],result:[1,0],origRating:[1207,0],newRating:[1207,0]}],[{id:"0-4",players:[0,4],result:[1,0],origRating:[1990,1542],newRating:[1998,1534]},{id:"1-7",players:[1,7],result:[1,0],origRating:[2008,1244],newRating:[2009,1243]},{id:"8-5",players:[8,5],result:[0,1],origRating:[990,1529],newRating:[983,1534]},{id:"6-2",players:[6,2],result:[0,1],origRating:[1207,1998],newRating:[1205,1999]},{id:"3--1",players:[3,-1],result:[1,0],origRating:[1464,0],newRating:[1464,0]}]]},{name:"The Battle for Gotham City",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,7],roundList:[[{id:"15-0",players:[15,0],result:[0,1],origRating:[950,1998],newRating:[948,1998]},{id:"16-2",players:[16,2],result:[0,1],origRating:[900,1999],newRating:[899,1999]},{id:"17-1",players:[17,1],result:[1,0],origRating:[850,2009],newRating:[1649,1909]},{id:"13-5",players:[13,5],result:[.5,.5],origRating:[1050,1534],newRating:[1404,1495]},{id:"12-3",players:[12,3],result:[1,0],origRating:[1100,1464],newRating:[1812,1345]},{id:"14-4",players:[14,4],result:[0,1],origRating:[1e3,1534],newRating:[965,1538]},{id:"10-7",players:[10,7],result:[1,0],origRating:[1200,1242],newRating:[1648,1167]},{id:"11-9",players:[11,9],result:[0,1],origRating:[1150,1250],newRating:[862,1538]},{id:"8-6",players:[8,6],result:[1,0],origRating:[983,1205],newRating:[1087,1101]}]]}]},75:function(e){e.exports={byeValue:1}},93:function(e,t,a){e.exports=a(118)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.e0c0ff3b.chunk.js.map