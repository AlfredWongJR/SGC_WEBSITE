(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e){e.exports={byeValue:1}},16:function(e){e.exports=[{name:"Wayne Manor Open",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,7,8],roundList:[[{id:"6-1",players:[6,1],result:[0,1],origRating:[1238,2108],newRating:[1236,2109]},{id:"7-2",players:[7,2],result:[0,1],origRating:[1049,2260],newRating:[1049,2260]},{id:"4-3",players:[4,3],result:[1,0],origRating:[1527,1755],newRating:[1685,1545]},{id:"5-0",players:[5,0],result:[0,1],origRating:[1284,1881],newRating:[1278,1887]},{id:"8--1",players:[8,-1],result:[1,0],origRating:[831,0],newRating:[831,0]}],[{id:"1-4",players:[1,4],result:[1,0],origRating:[2109,1685],newRating:[2122,1672]},{id:"0-8",players:[0,8],result:[1,0],origRating:[1887,831],newRating:[1887,830]},{id:"2-5",players:[2,5],result:[0,1],origRating:[2260,1278],newRating:[2101,1437]},{id:"3-6",players:[3,6],result:[1,0],origRating:[1545,1236],newRating:[1574,1207]},{id:"7--1",players:[7,-1],result:[1,0],origRating:[1049,0],newRating:[1049,0]}],[{id:"2-0",players:[2,0],result:[0,1],origRating:[2101,1887],newRating:[1998,1990]},{id:"8-1",players:[8,1],result:[1,0],origRating:[830,2122],newRating:[990,2008]},{id:"5-3",players:[5,3],result:[1,0],origRating:[1437,1574],newRating:[1529,1464]},{id:"4-7",players:[4,7],result:[0,1],origRating:[1672,1049],newRating:[1542,1244]},{id:"6--1",players:[6,-1],result:[1,0],origRating:[1207,0],newRating:[1207,0]}],[{id:"0-4",players:[0,4],result:[1,0],origRating:[1990,1542],newRating:[1998,1534]},{id:"1-7",players:[1,7],result:[1,0],origRating:[2008,1244],newRating:[2009,1242]},{id:"8-5",players:[8,5],result:[0,1],origRating:[990,1529],newRating:[983,1534]},{id:"6-2",players:[6,2],result:[0,1],origRating:[1207,1998],newRating:[1205,1999]},{id:"3--1",players:[3,-1],result:[1,0],origRating:[1464,0],newRating:[1464,0]}]]},{name:"The Battle for Gotham City",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,7],roundList:[[{id:"15-0",players:[15,0],result:[0,1],origRating:[950,1998],newRating:[948,1998]},{id:"16-2",players:[16,2],result:[0,1],origRating:[900,1999],newRating:[899,1999]},{id:"17-1",players:[17,1],result:[1,0],origRating:[850,2009],newRating:[1649,1909]},{id:"13-5",players:[13,5],result:[.5,.5],origRating:[1050,1534],newRating:[1404,1495]},{id:"12-3",players:[12,3],result:[1,0],origRating:[1100,1464],newRating:[1812,1345]},{id:"14-4",players:[14,4],result:[0,1],origRating:[1e3,1534],newRating:[965,1538]},{id:"10-7",players:[10,7],result:[1,0],origRating:[1200,1242],newRating:[1648,1167]},{id:"11-9",players:[11,9],result:[0,1],origRating:[1150,1250],newRating:[862,1538]},{id:"8-6",players:[8,6],result:[1,0],origRating:[983,1205],newRating:[1087,1101]}]]}]},21:function(e,t,n){e.exports=n(51)},26:function(e,t,n){},27:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),u=n.n(l),i=(n(26),n(1)),c=(n(27),n(2)),o=(n(32),n(20));n(19);function s(e){var t=e.children,n=e.action;return r.a.createElement("nav",null,r.a.createElement("button",{onClick:n},t))}function d(e){var t=e.action;return r.a.createElement(s,{action:t},"< Back")}function m(e){var t=e.action;return r.a.createElement(s,{action:t},"Open >")}function f(e){var t=e.children,n=e.style;return r.a.createElement("div",{style:Object(o.a)({},n)},t)}function p(e){var t=e.children;return r.a.createElement("div",{style:{display:"flex"}},r.a.Children.map(t,function(e){return e}))}var E=Object.freeze(function(e){return{name:e.name||"",tieBreaks:e.tieBreaks||[0,1,2,3],byeQueue:e.byeQueue||[],players:e.players||[],roundList:e.roundList||[]}}),y=n(3),g=n.n(y),b=n(7),h=n.n(b),v=n(8),N=n.n(v),O=1,R=0;function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||0,type:e.type||"person",firstName:e.firstName||"",lastName:e.lastName||"",rating:e.rating||0,matchCount:e.matchCount||0}}Object.freeze(_);var I=_();function C(e,t){if(-1===e)return I;var n=t.filter(function(t){return t.id===e})[0];return n||(n=_({id:e,firstName:"Anonymous",type:"missing"})),n}function k(e,t){return t.filter(function(t){return t.includes(e)}).reduce(function(e,t){return t.concat(e)},[]).filter(function(t){return t!==e})}function j(e){return 800/(e||1)}function w(e,t,n){var a=new N.a(j(t[R])),r=new N.a(j(t[O])),l=[a.getExpected(e[R],e[O]),r.getExpected(e[O],e[R])];return[a.updateRating(l[R],n[R],e[R]),r.updateRating(l[O],n[O],e[O])].map(function(e){return e<100?100:e})}function L(e){var t=Math.ceil(Math.log2(e));return Number.isFinite(t)||(t=0),t}function A(e,t){return e.filter(function(e){return e.id===t})[0]}function T(e,t){return e.indexOf(A(e,t))}I.id=-1,I.firstName="Bye",I.lastName="Player",I.type="dummy",Object.freeze(I),Object.freeze(C),Object.freeze(k),Object.freeze(function(e,t){var n=t.map(function(e){return e.id});return e.filter(function(e){return n.includes(e[0])&&n.includes(e[1])})}),Object.freeze(j),Object.freeze(w),Object.freeze(L),Object.freeze(A),Object.freeze(T);var S=n(15),B=n(9),D=n(16);var x=Object.freeze(function(e){return{id:e.id,players:e.players,result:e.result||[0,0],origRating:e.origRating,newRating:e.newRating}}),P=n(4);function U(e){return e.players.includes(I.id)}function Y(e,t){var n=null,a=t.filter(function(t){return t.players.includes(e)})[0];return a&&(n=a.players.indexOf(e)),n}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(null===n?t:t.slice(0,n+1)).reduce(function(e,t){return e.concat(t)},[]).filter(function(t){return t.players.includes(e)})}function z(e,t){return M(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat(t.players)},[]).includes(I.id)}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return M(e,t,n).reduce(function(e,t){return e.concat(t.players)},[]).filter(function(t){return t!==e})}function V(e,t){var n=0,a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return M(e,t,n).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return a.length>0&&(n=a.reduce(function(e,t){return e+t})),n}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=0,r=[];(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return M(e,t,n).filter(function(e){return!U(e)}).map(function(t){return t.result[t.players.indexOf(e)]})})(e,t,n).forEach(function(e){a+=e,r.push(a)});var l=0;return 0!==r.length&&(l=r.reduce(function(e,t){return e+t})),l}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=0;return M(e,t,n).filter(function(e){return!U(e)}).forEach(function(t){t.players[0]===e?a+=-1:t.players[1]===e&&(a+=1)}),a}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=H(e,t,n).filter(function(e){return e!==I.id}).map(function(e){return V(e,t,n)});r.sort(),a||(r.pop(),r.shift());var l=0;return r.length>0&&(l=r.reduce(function(e,t){return e+t})),l}Object.freeze(Y),Object.freeze(z),Object.freeze(H),Object.freeze(V),Object.freeze(G);var W=[{name:"Modified median",func:K},{name:"Solkoff",func:function(e,t){return K(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,!0)}},{name:"Cumulative score",func:Q},{name:"Cumulative of opposition",func:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=H(e,t,n).filter(function(e){return e!==I.id}).map(function(e){return Q(e,t,n)}),r=0;return 0!==a.length&&(r=a.reduce(function(e,t){return e+t})),r}},{name:"Most black",func:G}];function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.map(function(e){return W[e]}),r=function(e){var t=e.reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t.players)},[]);return Array.from(new Set(t))}(t).map(function(e){return{id:e,score:V(e,t,n),tieBreaks:a.map(function(a){return a.func(e,t,n)})}}),l=Object(P.firstBy)(function(e){return e.score},-1);a.forEach(function(e,t){l=l.thenBy(function(e){return e.tieBreaks[t]},-1)}),r.sort(l);var u=[],i=0;return r.forEach(function(e,t,n){0!==t&&(function(e,t){var n=!0;return e.score!==t.score&&(n=!1),Object.keys(e.tieBreaks).forEach(function(a){e.tieBreaks[a]!==t.tieBreaks[a]&&(n=!1)}),n}(e,n[t-1])||(i+=1));u[i]||(u[i]=[]),u[i].push(e)}),[u,a.map(function(e){return e.name})]}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t[n-1])return null;var a=0;return 0===Y(e,t[n-1])&&(a=1),a}function q(e,t,n,a,r){var l=C(e,t);return{data:l,rating:l.rating,id:e,score:V(e,a,r),dueColor:J(e,a,r),colorBalance:G(e,a,r),opponentHistory:H(e,a,null),upperHalf:!1,avoidList:k(e,n),hasHadBye:z(e,a,r)}}Object.freeze(W),Object.freeze(F),Object.freeze(q);var $=n(17),X=n.n($),Z=n(18),ee=n.n(Z),te=20,ne=16,ae=2,re=1;function le(e,t,n){var a,r=0,l=e.opponentHistory.includes(t.id),u=e.avoidList.includes(t.id);return l||u||(r+=te),a=Math.abs(n.indexOf(e.score)-n.indexOf(t.score)),a=(n.length-a)/n.length,r+=ne*a,e.score===t.score&&e.upperHalf!==t.upperHalf&&(r+=ae),null===e.dueColor?r+=re:e.dueColor!==t.dueColor&&(r+=re),Math.ceil(r)}Object.freeze(le);var ue=Object.freeze(function(e,t,n,a,r){var l,u,i,c,o,s=e.map(function(e){return q(e,a,r,n,t)});if((o=Array.from(new Set(s.map(function(e){return e.score})))).sort(),s.sort(Object(P.firstBy)(function(e){return e.score},-1).thenBy(function(e){return e.rating},-1)),s.length%2!==0){var d=g()(s.filter(function(e){return!e.hasHadBye}));d||(d=g()(s)),l=[d.id,I.id],s=s.filter(function(e){return e!==d})}return o.forEach(function(e){var t=s.filter(function(t){return t.score===e});t.sort(function(e){return e.rating}).reverse(),t.length>1&&X()(t,t.length/2)[0].forEach(function(e){e.upperHalf=!0})}),u=s.reduce(function(e,t,n,a){var r=a.filter(function(e){return e!==t}).map(function(e){return[t.id,e.id,le(t,e,o)]});return e.concat(r)},[]),(c=ee()(u).reduce(function(e,t,n){if(-1!==t){var a=s.filter(function(e){return e.id===t})[0],r=s.filter(function(e){return e.id===n})[0],l=u.filter(function(e){return e[0]===t&&e[1]===n})[0][2],i=e.map(function(e){return e[0]});i.includes(a)||i.includes(r)||e.push([a,r,l])}return e},[])).sort(Object(P.firstBy)(function(e){return e[0].score+e[1].score},-1).thenBy(function(e){return e[0].rating+e[1].rating},-1)),i=c.map(function(e){var t=e[0],n=e[1],a=[t.id,n.id];return t.colorBalance<n.colorBalance&&a.reverse(),a}),l&&i.push(l),i});function ie(e,t,n,a){var r=e.tourneys[t],l=r.roundList,u=r.byeQueue.filter(function(e){return!z(e,l)})[0],i=null;u>=0&&(i=x({id:u+"-"+I.id,players:[u,I.id],origRating:[C(u,e.players).rating,I.rating],newRating:[C(u,e.players).rating,I.rating]}),a=a.filter(function(e){return e!==u}));var c=ue(a,n,l,e.players,e.avoid).map(function(t){return x({id:t.join("-"),players:[t[R],t[O]],origRating:[C(t[R],e.players).rating,C(t[O],e.players).rating],newRating:[C(t[R],e.players).rating,C(t[O],e.players).rating]})});return i&&c.push(i),c.forEach(function(t){var n=t.players.indexOf(I.id);n===O&&(t.result[R]=e.options.byeValue),n===R&&(t.result[O]=e.options.byeValue)}),c}function ce(e,t){var n=x({id:t.join("-"),players:[t[R],t[O]],origRating:[C(t[R],e.players).rating,C(t[O],e.players).rating],newRating:[C(t[R],e.players).rating,C(t[O],e.players).rating]});return t[R]===I.id&&(n.result=[e.options.byeValue,0]),t[O]===I.id&&(n.result=[0,e.options.byeValue]),n}function oe(e,t,n,a){var r=A(e.tourneys[t].roundList[n],a);r.players.reverse(),r.origRating.reverse(),r.newRating.reverse()}Object.freeze(ie),Object.freeze(ce),Object.freeze(oe);var se={options:S,players:B.playerList.map(function(e){return _(e)}),avoid:B.avoidList,tourneys:D};function de(e,t){var n=e.avoid,a=e.players,r=e.options,l=e.tourneys;switch(t.type){case"SET_BYE_VALUE":return r.byeValue=t.byeValue,Object.assign({},e);case"ADD_PLAYER":return Object.assign({},e,{players:a.concat([t.newPlayer])});case"DEL_PLAYER":return Object.assign({},e,{players:a.filter(function(e){return e.id!==t.id}),avoid:n.filter(function(e){return!e.includes(t.id)})});case"SET_PLAYER_MATCHCOUNT":return Object.assign(a[a.map(function(e){return e.id}).indexOf(t.id)],{matchCount:t.matchCount}),Object.assign({},e);case"SET_PLAYER_RATING":return Object.assign(a[a.map(function(e){return e.id}).indexOf(t.id)],{rating:t.rating}),Object.assign({},e);case"ADD_AVOID_PAIR":return Object.assign({},e,{avoid:n.concat([t.pair])});case"DEL_AVOID_PAIR":return Object.assign({},e,{avoid:n.filter(function(e){return!(e.includes(t.pair[0])&&e.includes(t.pair[1]))})});case"ADD_TOURNEY":return Object.assign({},e,{tourneys:l.concat([t.tourney])});case"DEL_TOURNEY":return Object.assign({},e,{tourneys:l.filter(function(e,n){return n!==t.index})});case"ADD_ROUND":return l[t.tourneyId].roundList=l[t.tourneyId].roundList.concat([[]]),Object.assign({},e);case"DEL_LAST_ROUND":return g()(l[t.tourneyId].roundList).forEach(function(e){0!==e.result.reduce(function(e,t){return e+t})&&e.players.forEach(function(t,n){C(t,a).matchCount-=1,C(t,a).rating=e.origRating[n]})}),l[t.tourneyId].roundList=l[t.tourneyId].roundList.slice(0,l[t.tourneyId].roundList.length-1),Object.assign({},e);case"ADD_TIEBREAK":return l[t.tourneyId].tieBreaks=l[t.tourneyId].tieBreaks.concat([t.id]),Object.assign({},e);case"DEL_TIEBREAK":return l[t.tourneyId].tieBreaks=l[t.tourneyId].tieBreaks.filter(function(e){return e!==t.id}),Object.assign({},e);case"MOVE_TIEBREAK":return l[t.tourneyId].tieBreaks=h()(l[t.tourneyId].tieBreaks,t.oldIndex,t.newIndex),Object.assign({},e);case"SET_TOURNEY_PLAYERS":return l[t.tourneyId].players=t.players,Object.assign({},e);case"SET_BYE_QUEUE":return l[t.tourneyId].byeQueue=t.byeQueue,Object.assign({},e);case"AUTO_PAIR":return l[t.tourneyId].roundList[t.roundId]=l[t.tourneyId].roundList[t.roundId].concat(ie(e,t.tourneyId,t.roundId,t.unpairedPlayers)),Object.assign({},e);case"MANUAL_PAIR":return l[t.tourneyId].roundList[t.roundId]=l[t.tourneyId].roundList[t.roundId].concat([ce(e,t.pair)]),Object.assign({},e);case"SET_MATCH_RESULT":return A(l[t.tourneyId].roundList[t.roundId],t.matchId).result=t.result,A(l[t.tourneyId].roundList[t.roundId],t.matchId).newRating=t.newRating,Object.assign({},e);case"DEL_MATCH":return l[t.tourneyId].roundList[t.roundId]=l[t.tourneyId].roundList[t.roundId].filter(function(e){return e.id!==t.matchId}),Object.assign({},e);case"SWAP_COLORS":return oe(e,t.tourneyId,t.roundId,t.matchId),Object.assign({},e);case"MOVE_MATCH":return l[t.tourneyId].roundList[t.roundId]=h()(l[t.tourneyId].roundList[t.roundId],t.oldIndex,t.newIndex),Object.assign({},e);default:throw new Error("Unexpected action type")}}Object.freeze(de);var me=Object(a.createContext)(null),fe=n(5),pe=n.n(fe);function Ee(e){var t=e.roundId,n=e.tourneyId,l=Object(a.useContext)(me),u=l.data,c=l.dispatch,o=u.players,s=u.tourneys[n],E=s.roundList[t],y=Object(a.useState)(null),g=Object(i.a)(y,2),b=g[0],h=g[1],v=Object(a.useState)([]),N=Object(i.a)(v,2),_=N[0],k=N[1];function j(e){var t=Number(e.target.value);e.target.checked?k(function(e){return e.includes(t)||e.push(t),e.slice(-2)}):k(_.filter(function(e){return e!==t}))}var L=E.reduce(function(e,t){return e.concat(t.players)},[]),S=s.players.filter(function(e){return!L.includes(e)});function B(e,a){var r=A(s.roundList[t],e),l=C(r.players[R],o),u=C(r.players[O],o),i=w(r.origRating,[l.matchCount,u.matchCount],a);c({type:"SET_PLAYER_RATING",id:l.id,rating:i[R]}),c({type:"SET_PLAYER_RATING",id:u.id,rating:i[O]}),0===r.result.reduce(function(e,t){return e+t})&&(c({type:"SET_PLAYER_MATCHCOUNT",id:l.id,matchCount:l.matchCount+1}),c({type:"SET_PLAYER_MATCHCOUNT",id:u.id,matchCount:u.matchCount+1})),c({type:"SET_MATCH_RESULT",tourneyId:n,roundId:t,matchId:e,result:a,newRating:i})}function D(e,a){var r=T(u.tourneys[n].roundList[t],e);c({type:"MOVE_MATCH",tourneyId:n,roundId:t,matchId:e,oldIndex:r,newIndex:r+a})}return r.a.createElement(p,null,r.a.createElement(f,null,r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{className:"danger",onClick:function(){return function(e){var a=A(s.roundList[t],e);0!==a.result.reduce(function(e,t){return e+t})&&a.players.forEach(function(e,t){c({type:"SET_PLAYER_MATCHCOUNT",id:e,matchCount:C(e,o).matchCount-1}),c({type:"SET_PLAYER_RATING",id:e,rating:a.origRating[t]})}),c({type:"DEL_MATCH",tourneyId:n,roundId:t,matchId:e}),h(null)}(b)},disabled:null===b},"Unmatch"),r.a.createElement("button",{onClick:function(){c({type:"SWAP_COLORS",tourneyId:n,roundId:t,matchId:b})},disabled:null===b},"Swap colors"),r.a.createElement("button",{onClick:function(){return D(b,-1)},disabled:null===b},"Move up"),r.a.createElement("button",{onClick:function(){return D(b,1)},disabled:null===b},"Move down")),r.a.createElement("table",{className:"table__roster"},r.a.createElement("caption",null,"Round ",t+1," results"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"row__id"},"#"),r.a.createElement("th",{className:"row__player"},"White"),r.a.createElement("th",{className:"row__result"},"Result"),r.a.createElement("th",{className:"row__player"},"Black"),r.a.createElement("th",{className:"row__controls"}))),r.a.createElement("tbody",null,E.map(function(e,t){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__number row__id"},t+1),r.a.createElement("td",{className:"table__player row__player"},C(e.players[0],o).firstName," ",C(e.players[0],o).lastName),r.a.createElement("td",{className:"data__input row__result"},r.a.createElement("input",{type:"radio",checked:e.result[0]>e.result[1],onChange:function(){return B(e.id,[1,0])},disabled:e.players.includes(I.id)}),r.a.createElement("input",{type:"radio",checked:e.result.every(function(e){return.5===e}),onChange:function(){return B(e.id,[.5,.5])},disabled:e.players.includes(I.id)}),r.a.createElement("input",{type:"radio",checked:e.result[1]>e.result[0],onChange:function(){return B(e.id,[0,1])},disabled:e.players.includes(I.id)})),r.a.createElement("td",{className:"table__player row__player"},C(e.players[1],o).firstName," ",C(e.players[1],o).lastName),r.a.createElement("td",{className:"data__input row__controls"},b!==e.id?r.a.createElement(m,{action:function(){return h(e.id)}}):r.a.createElement(d,{action:function(){return h(null)}})))})))),r.a.createElement(f,null,null!==b&&r.a.createElement(p,null,r.a.createElement(f,null,r.a.createElement(ye,{match:A(E,b),color:0,tourneyId:n,roundId:t})),r.a.createElement(f,null,r.a.createElement(ye,{match:A(E,b),color:1,tourneyId:n,roundId:t}))),S.length>0&&r.a.createElement(a.Fragment,null,r.a.createElement("h3",null,"Unmatched players"),r.a.createElement("ul",null,S.map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("input",{type:"checkbox",checked:_.includes(e),value:e,onChange:j}),C(e,o).firstName," ",C(e,o).lastName)}),S.length%2!==0&&r.a.createElement("li",null,r.a.createElement("input",{type:"checkbox",checked:_.includes(I.id),value:I.id,onChange:j}),I.firstName," ",I.lastName)),r.a.createElement("button",{onClick:function(){c({type:"MANUAL_PAIR",tourneyId:n,roundId:t,unpairedPlayers:_})},disabled:2!==_.length},"Pair checked")," ",r.a.createElement("button",{onClick:function(){c({type:"AUTO_PAIR",tourneyId:n,roundId:t,unpairedPlayers:S})},disabled:0===S.length},"Auto-pair"))))}function ye(e){var t=e.match,n=e.color,l=e.tourneyId,u=e.roundId,i=Object(a.useContext)(me).data,c=i.players,o=q(t.players[n],c,i.avoid,i.tourneys[l].roundList,u),s=o.colorBalance,d="Even";return s<0?d="White +"+Math.abs(s):s>0&&(d="Black +"+s),r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,o.data.firstName," ",o.data.lastName),r.a.createElement("dt",null,"Score"),r.a.createElement("dd",null,o.score),r.a.createElement("dt",null,"Rating"),r.a.createElement("dd",null,t.origRating[n]," ","(",pe()(t.newRating[n]-t.origRating[n]).format("+0"),")"),r.a.createElement("dt",null,"Color balance"),r.a.createElement("dd",null,d),r.a.createElement("dt",null,"Has had a bye round"),r.a.createElement("dd",null,o.hasHadBye?"Yes":"No"),r.a.createElement("dt",null,"Opponent history"),r.a.createElement("dd",null,r.a.createElement("ol",null,o.opponentHistory.map(function(e){return r.a.createElement("li",{key:e},C(e,c).firstName," ",C(e,c).lastName)}))),r.a.createElement("dt",null,"Players to avoid"),r.a.createElement("dd",null,r.a.createElement("ol",null,o.avoidList.map(function(e){return r.a.createElement("li",{key:e},C(e,c).firstName," ",C(e,c).lastName)}))))}function ge(e){var t=e.tourneyId,n=Object(a.useContext)(me),l=n.data,u=n.dispatch,c=l.players,o=l.tourneys[t].players,s=l.tourneys[t],d=Object(a.useState)(0===o.length),m=Object(i.a)(d,2),E=m[0],y=m[1],g=Object(a.useState)(null),b=Object(i.a)(g,2),h=b[0],v=b[1];function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=h),l.tourneys[t].tieBreaks.includes(e)?u({type:"DEL_TIEBREAK",id:e,tourneyId:t}):u({type:"ADD_TIEBREAK",id:e,tourneyId:t})}function O(e){var n=l.tourneys[t].tieBreaks.indexOf(h);u({type:"MOVE_TIEBREAK",tourneyId:t,oldIndex:n,newIndex:n+e})}function R(e){var n=Number(e.target.value);e.target.checked?u({type:"SET_TOURNEY_PLAYERS",tourneyId:t,players:o.concat([n])}):u({type:"SET_TOURNEY_PLAYERS",tourneyId:t,players:o.filter(function(e){return e!==n})})}return E?r.a.createElement("table",null,r.a.createElement("caption",null,"Select players"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null))),r.a.createElement("tbody",null,c.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.firstName),r.a.createElement("td",null,e.lastName),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",value:e.id,checked:o.includes(e.id),onChange:R})))})),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement("button",{onClick:function(){return u({type:"SET_TOURNEY_PLAYERS",players:c.map(function(e){return e.id})})}},"Select all"),r.a.createElement("button",{onClick:function(){return u({type:"SET_TOURNEY_PLAYERS",players:[]})}},"Select none"),r.a.createElement("button",{onClick:function(){return y(!1)}},"Done"))))):r.a.createElement(p,null,r.a.createElement(f,null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null))),r.a.createElement("tbody",null,o.map(function(e){return r.a.createElement("tr",{key:e,className:C(e,c).type+" player"},r.a.createElement("td",null,C(e,c).firstName),r.a.createElement("td",null,C(e,c).lastName),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return u({type:"SET_BYE_QUEUE",tourneyId:t,byeQueue:s.byeQueue.concat([e])})},disabled:s.byeQueue.includes(e)},"Bye signup")))}))),r.a.createElement("button",{onClick:function(){return y(!0)}},"Edit player roster"),r.a.createElement("h3",null,"Bye queue"),r.a.createElement("ol",null,s.byeQueue.map(function(e){return r.a.createElement("li",{key:e,className:z(e,s.roundList)?"disabled":""},C(e,c).firstName," ",C(e,c).lastName,r.a.createElement("button",{onClick:function(){return u({type:"SET_BYE_QUEUE",tourneyId:t,byeQueue:s.byeQueue.filter(function(t){return e!==t})})}},"Remove"))}))),r.a.createElement(f,null,r.a.createElement("h3",null,"Selected tiebreak methods"),r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{onClick:function(){return N()},disabled:null===h},"Toggle"),r.a.createElement("button",{onClick:function(){return O(-1)},disabled:null===h},"Move up"),r.a.createElement("button",{onClick:function(){return O(1)},disabled:null===h},"Move down"),r.a.createElement("button",{onClick:function(){return v(null)},disabled:null===h},"Done")),r.a.createElement("ol",null,s.tieBreaks.map(function(e){return r.a.createElement("li",{key:e},W[e].name,r.a.createElement("button",{onClick:function(){return v(h===e?null:e)},disabled:null!==h&&h!==e},h===e?"Done":"Edit"))})),r.a.createElement("h3",null,"Available tiebreak methods"),r.a.createElement("ol",null,W.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:s.tieBreaks.includes(t)?"enabled":"disabled"},e.name),!s.tieBreaks.includes(t)&&r.a.createElement("button",{onClick:function(){return N(t)}},"Add"))}))))}function be(e){var t=e.tourneyId,n=e.backButton,l=Object(a.useContext)(me),u=l.data,o=l.dispatch,s=u.players,d=u.tourneys[t],m=d.players,f=Object(a.useState)(0),p=Object(i.a)(f,2),E=p[0],y=p[1],g=F(d.tieBreaks,d.roundList),b=Object(i.a)(g,2),h=b[0],v=b[1];return r.a.createElement(c.e,{defaultIndex:E},n,r.a.createElement("div",null,r.a.createElement("h2",null,d.name),"Round progress: ",d.roundList.length,"/",L(m.length),r.a.createElement("button",{onClick:function(){return o({type:"ADD_ROUND",tourneyId:t}),void y(d.roundList.length+1)}},"New Round"),r.a.createElement("button",{className:"danger",onClick:function(){return o({type:"DEL_LAST_ROUND",tourneyId:t})},disabled:0===d.roundList.length},"Remove last round")),r.a.createElement(c.b,null,r.a.createElement(c.a,null,"Players"),r.a.createElement(c.a,null,"Scores"),Object.keys(d.roundList).map(function(e){return r.a.createElement(c.a,{key:e},"Round ",Number(e)+1)})),r.a.createElement(c.d,null,r.a.createElement(c.c,null,r.a.createElement(ge,{tourneyId:t})),r.a.createElement(c.c,null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Score"),v.map(function(e,t){return r.a.createElement("th",{key:t},e)}))),r.a.createElement("tbody",null,h.map(function(e,t){return e.filter(function(e){return e.id!==I.id}).map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__number"},t+1),r.a.createElement("td",null,C(e.id,s).firstName),r.a.createElement("td",{className:"table__number"},e.score),e.tieBreaks.map(function(e,t){return r.a.createElement("td",{key:t,className:"table__number"},e)}))})})))),Object.keys(d.roundList).map(function(e){return r.a.createElement(c.c,{key:e},r.a.createElement(Ee,{roundId:Number(e),tourneyId:t}))})))}function he(){var e=Object(a.useContext)(me),t=e.data,n=e.dispatch,l=t.tourneys,u=Object(a.useState)(null),c=Object(i.a)(u,2),o=c[0],s=c[1],m=Object(a.useState)(""),f=Object(i.a)(m,2),p=f[0],y=f[1];var g=r.a.createElement(a.Fragment,null);return g=null!==o?r.a.createElement(be,{tourneyId:o,backButton:r.a.createElement(d,{action:function(){return s(null)}})}):r.a.createElement("div",null,l.length>0?r.a.createElement("ol",null,l.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("button",{className:"tourney-select",onClick:function(){return s(t)}},e.name),r.a.createElement("button",{className:"danger",onClick:function(){return n({type:"DEL_TOURNEY",index:t})}},"delete"))})):r.a.createElement("p",null,"No tournaments added yet."),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n({type:"ADD_TOURNEY",tourney:E({name:p})}),y("")}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Make a new tournament"),r.a.createElement("input",{type:"text",placeholder:"tournament name",value:p,onChange:function(e){y(e.target.value)},required:!0}),r.a.createElement("input",{type:"submit",value:"Create"})))),r.a.createElement("div",null,g)}function ve(e){var t=e.setOpenPlayer,n=Object(a.useContext)(me),l=n.data,u=n.dispatch,c=l.players,o={firstName:"",lastName:"",rating:1200},s=Object(a.useState)(o),d=Object(i.a)(s,2),f=d[0],p=d[1],E=c.map(function(e){return e.id});E.sort(function(e,t){return e-t}),E.reverse();var y=Object(a.useState)(E[0]+1),g=Object(i.a)(y,2),b=g[0],h=g[1],v=function(e){e.preventDefault();var t={};t[e.currentTarget.name]=e.currentTarget.value,p(Object.assign({},f,t))},N=r.a.createElement(a.Fragment,null);return c.length>0&&(N=r.a.createElement("table",null,r.a.createElement("caption",null,"Demo Roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Rating"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,c.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__player"},e.firstName),r.a.createElement("td",{className:"table__player"},e.lastName),r.a.createElement("td",{className:"table__number"},e.rating),r.a.createElement("td",null,r.a.createElement("button",{className:"danger",onClick:function(t){return function(e,t){e.preventDefault(),u({type:"DEL_PLAYER",player:t})}(t,e)}},"delete")),r.a.createElement("td",null,r.a.createElement(m,{action:function(){return t(e.id)}})))})))),r.a.createElement("div",{className:"roster"},N,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=_(f);t.id=b,h(function(e){return e+1}),p(o),u({type:"ADD_PLAYER",newPlayer:t})}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add your own players"),r.a.createElement("p",null,r.a.createElement("label",null,"First name"," ",r.a.createElement("input",{type:"text",name:"firstName",onChange:v,value:f.firstName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name"," ",r.a.createElement("input",{type:"text",name:"lastName",onChange:v,value:f.lastName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating"," ",r.a.createElement("input",{type:"number",name:"rating",onChange:v,value:f.rating,required:!0}))),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Add"})))))}function Ne(e){var t=e.playerId,n=e.setOpenPlayer,l=Object(a.useContext)(me),u=l.data,c=l.dispatch,o=u.players,s=u.avoid,m=Object(a.useState)(k(t,s)),f=Object(i.a)(m,2),p=f[0],E=f[1],y=function(){return o.map(function(e){return e.id}).filter(function(e){return!p.includes(e)&&e!==t})},g=Object(a.useState)(y()[0]),b=Object(i.a)(g,2),h=b[0],v=b[1];return Object(a.useEffect)(function(){E(k(t,s))},[s,t]),r.a.createElement("div",null,r.a.createElement(d,{action:function(){return n(null)}}),r.a.createElement("h2",null,C(t,o).firstName," ",C(t,o).lastName),r.a.createElement("dl",null,r.a.createElement("dt",null,"Matches played"),r.a.createElement("dd",null,C(t,o).matchCount),r.a.createElement("dt",null,"Rating"),r.a.createElement("dd",null,C(t,o).rating),r.a.createElement("dt",null,"K factor"),r.a.createElement("dd",null,pe()(j(C(t,o).matchCount)).format("00")),r.a.createElement("dt",null,"Players to avoid"),r.a.createElement("dd",null,r.a.createElement("ul",null,p.map(function(e){return r.a.createElement("li",{key:e},C(e,o).firstName," ",C(e,o).lastName,r.a.createElement("button",{className:"danger",onClick:function(){return c({type:"DEL_AVOID_PAIR",pair:[t,e]})}},"remove"))}),0===s.length&&r.a.createElement("li",null,"None")))),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),v(y()[0]),c({type:"ADD_AVOID_PAIR",pair:[t,Number(h)]})}(e)}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add player to avoid"),r.a.createElement("select",{onBlur:function(e){return v(e.target.value)}},y().map(function(e){return r.a.createElement("option",{key:e,value:e},C(e,o).firstName," ",C(e,o).lastName)})),r.a.createElement("input",{type:"submit",value:"Add"}))))}function Oe(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],l=t[1];return null!==n?r.a.createElement(Ne,{key:n,playerId:n,setOpenPlayer:l}):r.a.createElement(ve,{setOpenPlayer:l})}function Re(){var e=Object(a.useContext)(me),t=e.data,n=e.dispatch,l=t.options,u=JSON.stringify(t,null,2);return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Bye options"),"Select how many points a bye is worth:"," ",r.a.createElement("label",null,"1",r.a.createElement("input",{type:"radio",checked:1===l.byeValue,onChange:function(){return n({type:"SET_BYE_VALUE",byeValue:1})}})),r.a.createElement("label",null,"0.5",r.a.createElement("input",{type:"radio",checked:.5===l.byeValue,onChange:function(){return n({type:"SET_BYE_VALUE",byeValue:.5})}})))),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Export data"),r.a.createElement("textarea",{className:"json",rows:25,cols:50,value:u,name:"playerdata",readOnly:!0}),r.a.createElement("input",{type:"submit",value:"Load",disabled:!0}))))}function _e(){return r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f")," ","This is an unstable demo build."," ",r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f")," ","Want to help make it better? Head to the"," ",r.a.createElement("span",{role:"img","aria-label":"finger pointing right"},"\ud83d\udc49")," ",r.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"Git repository"),".")}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(function(){var e=Object(a.useReducer)(de,se),t=Object(i.a)(e,2),n=t[0],l=t[1];return r.a.createElement(r.a.StrictMode,null,r.a.createElement(me.Provider,{value:{data:n,dispatch:l}},r.a.createElement(c.e,{className:"app",defaultIndex:1},r.a.createElement("footer",{className:"caution footer"},r.a.createElement(_e,null)),r.a.createElement(c.b,{className:"header"},r.a.createElement(c.a,null,"Players"),r.a.createElement(c.a,null,"Tournaments"),r.a.createElement(c.a,null,"Options"),r.a.createElement(c.a,null,"About")),r.a.createElement(c.d,{className:"content"},r.a.createElement(c.c,null,r.a.createElement(Oe,null)),r.a.createElement(c.c,null,r.a.createElement(he,null)),r.a.createElement(c.c,null,r.a.createElement(Re,null)),r.a.createElement(c.c,null,r.a.createElement("p",null,"This is an early, proof-of-concept, demo of a chess tournament manager. ",r.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"You can find out more here.")))))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e){e.exports={playerList:[{id:0,type:"person",firstName:"Bruce",lastName:"Wayne",rating:1998,matchCount:9},{id:1,type:"person",firstName:"Dick",lastName:"Grayson",rating:1909,matchCount:9},{id:2,type:"person",firstName:"Alfred",lastName:"Pennyworth",rating:1999,matchCount:9},{id:3,type:"person",firstName:"Barbara",lastName:"Gordon",rating:1345,matchCount:7},{id:4,type:"person",firstName:"Kate",lastName:"Kane",rating:1538,matchCount:9},{id:5,type:"person",firstName:"Selina",lastName:"Kyle",rating:1495,matchCount:9},{id:6,type:"person",firstName:"Jason",lastName:"Todd",rating:1101,matchCount:7},{id:7,type:"person",firstName:"James",lastName:"Gordon",rating:1167,matchCount:7},{id:8,type:"person",firstName:"Helena",lastName:"Wayne",rating:1087,matchCount:7},{id:9,type:"person",firstName:"Joker",lastName:"",rating:1538,matchCount:1},{id:10,type:"person",firstName:"Harley",lastName:"Quinn",rating:1648,matchCount:1},{id:11,type:"person",firstName:"Victor",lastName:"Fries",rating:862,matchCount:1},{id:12,type:"person",firstName:"Oswald",lastName:"Cobblepot",rating:1812,matchCount:1},{id:13,type:"person",firstName:"Ra's",lastName:"al Ghul",rating:1404,matchCount:1},{id:14,type:"person",firstName:"Pamela",lastName:"Isley",rating:965,matchCount:1},{id:15,type:"person",firstName:"Edward",lastName:"Nigma",rating:948,matchCount:1},{id:16,type:"person",firstName:"Jonathan",lastName:"Crane",rating:899,matchCount:1},{id:17,type:"person",firstName:"Harvey",lastName:"Dent",rating:1649,matchCount:1},{id:18,type:"person",firstName:"Hugo",lastName:"Strange",rating:800,matchCount:0}],avoidList:[[3,7],[9,10],[8,0]]}}},[[21,1,2]]]);
//# sourceMappingURL=main.70c4d482.chunk.js.map