(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports={caution:"caution_caution__3GmMJ",caution__text:"caution_caution__text__2ZzEu",caution__link:"caution_caution__link__2xeym"}},17:function(e){e.exports={playerList:[{id:0,type:"person",firstName:"Bruce",lastName:"Wayne",rating:1998,matchCount:9},{id:1,type:"person",firstName:"Dick",lastName:"Grayson",rating:1909,matchCount:9},{id:2,type:"person",firstName:"Alfred",lastName:"Pennyworth",rating:1999,matchCount:9},{id:3,type:"person",firstName:"Barbara",lastName:"Gordon",rating:1345,matchCount:7},{id:4,type:"person",firstName:"Kate",lastName:"Kane",rating:1538,matchCount:9},{id:5,type:"person",firstName:"Selina",lastName:"Kyle",rating:1495,matchCount:9},{id:6,type:"person",firstName:"Jason",lastName:"Todd",rating:1101,matchCount:7},{id:7,type:"person",firstName:"James",lastName:"Gordon",rating:1167,matchCount:7},{id:8,type:"person",firstName:"Helena",lastName:"Wayne",rating:1087,matchCount:7},{id:9,type:"person",firstName:"Joker",lastName:"",rating:1538,matchCount:1},{id:10,type:"person",firstName:"Harley",lastName:"Quinn",rating:1648,matchCount:1},{id:11,type:"person",firstName:"Victor",lastName:"Fries",rating:862,matchCount:1},{id:12,type:"person",firstName:"Oswald",lastName:"Cobblepot",rating:1812,matchCount:1},{id:13,type:"person",firstName:"Ra's",lastName:"al Ghul",rating:1404,matchCount:1},{id:14,type:"person",firstName:"Pamela",lastName:"Isley",rating:965,matchCount:1},{id:15,type:"person",firstName:"Edward",lastName:"Nigma",rating:948,matchCount:1},{id:16,type:"person",firstName:"Jonathan",lastName:"Crane",rating:899,matchCount:1},{id:17,type:"person",firstName:"Harvey",lastName:"Dent",rating:1649,matchCount:1},{id:18,type:"person",firstName:"Hugo",lastName:"Strange",rating:800,matchCount:0}],avoidList:[[3,7],[9,10],[8,0]]}},21:function(e){e.exports={byeValue:1}},22:function(e){e.exports=[{name:"Wayne Manor Open",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,7,8],roundList:[[{id:"6-1",players:[6,1],result:[0,1],origRating:[1238,2108],newRating:[1236,2109]},{id:"7-2",players:[7,2],result:[0,1],origRating:[1049,2260],newRating:[1049,2260]},{id:"4-3",players:[4,3],result:[.5,.5],origRating:[1527,1755],newRating:[1553,1722]},{id:"5-0",players:[5,0],result:[0,1],origRating:[1284,1881],newRating:[1278,1887]},{id:"8--1",players:[8,-1],result:[1,0],origRating:[831,0],newRating:[831,0]}],[{id:"1-4",players:[1,4],result:[1,0],origRating:[2109,1685],newRating:[2122,1672]},{id:"0-8",players:[0,8],result:[1,0],origRating:[1887,831],newRating:[1887,830]},{id:"2-5",players:[2,5],result:[0,1],origRating:[2260,1278],newRating:[2101,1437]},{id:"3-6",players:[3,6],result:[1,0],origRating:[1545,1236],newRating:[1574,1207]},{id:"7--1",players:[7,-1],result:[1,0],origRating:[1049,0],newRating:[1049,0]}],[{id:"2-0",players:[2,0],result:[0,1],origRating:[2101,1887],newRating:[1998,1990]},{id:"8-1",players:[8,1],result:[1,0],origRating:[830,2122],newRating:[990,2008]},{id:"5-3",players:[5,3],result:[1,0],origRating:[1437,1574],newRating:[1529,1464]},{id:"4-7",players:[4,7],result:[0,1],origRating:[1672,1049],newRating:[1542,1244]},{id:"6--1",players:[6,-1],result:[1,0],origRating:[1207,0],newRating:[1207,0]}],[{id:"0-4",players:[0,4],result:[1,0],origRating:[1990,1542],newRating:[1998,1534]},{id:"1-7",players:[1,7],result:[1,0],origRating:[2008,1244],newRating:[2009,1243]},{id:"8-5",players:[8,5],result:[0,1],origRating:[990,1529],newRating:[983,1534]},{id:"6-2",players:[6,2],result:[0,1],origRating:[1207,1998],newRating:[1205,1999]},{id:"3--1",players:[3,-1],result:[1,0],origRating:[1464,0],newRating:[1464,0]}]]},{name:"The Battle for Gotham City",tieBreaks:[0,1,2,3],byeQueue:[],players:[0,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,7],roundList:[[{id:"15-0",players:[15,0],result:[0,1],origRating:[950,1998],newRating:[948,1998]},{id:"16-2",players:[16,2],result:[0,1],origRating:[900,1999],newRating:[899,1999]},{id:"17-1",players:[17,1],result:[1,0],origRating:[850,2009],newRating:[1649,1909]},{id:"13-5",players:[13,5],result:[.5,.5],origRating:[1050,1534],newRating:[1404,1495]},{id:"12-3",players:[12,3],result:[1,0],origRating:[1100,1464],newRating:[1812,1345]},{id:"14-4",players:[14,4],result:[0,1],origRating:[1e3,1534],newRating:[965,1538]},{id:"10-7",players:[10,7],result:[1,0],origRating:[1200,1242],newRating:[1648,1167]},{id:"11-9",players:[11,9],result:[0,1],origRating:[1150,1250],newRating:[862,1538]},{id:"8-6",players:[8,6],result:[1,0],origRating:[983,1205],newRating:[1087,1101]}]]}]},26:function(e,t,n){e.exports={table:"round_table__1Rm4K"}},29:function(e,t,n){e.exports=n(54)},35:function(e,t,n){},36:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(13),u=n.n(l),i=(n(35),n(1)),c=(n(36),n(2)),o=(n(40),n(28)),s=(n(27),n(10)),d=n.n(s),m=n(3),f=n.n(m),p=n(15),E=n.n(p),y=n(16),g=n.n(y),b=1,h=0;function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||0,type:e.type||"person",firstName:e.firstName||"",lastName:e.lastName||"",rating:e.rating||0,matchCount:e.matchCount||0}}Object.freeze(v);var N=v();function _(e,t){if(-1===t)return N;var n=e.filter(function(e){return e.id===t})[0];return n||(n=v({id:t,firstName:"Anonymous",type:"missing"})),n}function O(e,t){return t.filter(function(t){return t.includes(e)}).reduce(function(e,t){return t.concat(e)},[]).filter(function(t){return t!==e})}function R(e){return 800/(e||1)}function I(e,t,n){var a=new g.a(R(t[h])),r=new g.a(R(t[b])),l=[a.getExpected(e[h],e[b]),r.getExpected(e[b],e[h])];return[a.updateRating(l[h],n[h],e[h]),r.updateRating(l[b],n[b],e[b])].map(function(e){return e<100?100:e})}function C(e){var t=Math.ceil(Math.log2(e));return Number.isFinite(t)||(t=0),t}function k(e,t){return e.filter(function(e){return e.id===t})[0]}function j(e,t){return e.indexOf(k(e,t))}N.id=-1,N.firstName="Bye",N.lastName="Player",N.type="dummy",Object.freeze(N),Object.freeze(_),Object.freeze(O),Object.freeze(function(e,t){var n=t.map(function(e){return e.id});return e.filter(function(e){return n.includes(e[0])&&n.includes(e[1])})}),Object.freeze(R),Object.freeze(I),Object.freeze(C),Object.freeze(k),Object.freeze(j);var w=n(21),L=n(17),A=n(22);var S=Object.freeze(function(e){return{id:e.id,players:e.players,result:e.result||[0,0],origRating:e.origRating,newRating:e.newRating}}),T=n(9);function B(e){return e.players.includes(N.id)}function x(e,t){var n=null,a=t.filter(function(t){return t.players.includes(e)})[0];return a&&(n=a.players.indexOf(e)),n}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(null===n?t:t.slice(0,n+1)).reduce(function(e,t){return e.concat(t)},[]).filter(function(t){return t.players.includes(e)})}function P(e,t){return D(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null).reduce(function(e,t){return e.concat(t.players)},[]).includes(N.id)}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return D(e,t,n).reduce(function(e,t){return e.concat(t.players)},[]).filter(function(t){return t!==e})}function U(e,t){var n=0,a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return D(e,t,n).map(function(t){return t.result[t.players.indexOf(e)]})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return a.length>0&&(n=a.reduce(function(e,t){return e+t})),n}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=0,r=[];(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return D(e,t,n).filter(function(e){return!B(e)}).map(function(t){return t.result[t.players.indexOf(e)]})})(e,t,n).forEach(function(e){a+=e,r.push(a)});var l=0;return 0!==r.length&&(l=r.reduce(function(e,t){return e+t})),l}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=0;return D(e,t,n).filter(function(e){return!B(e)}).forEach(function(t){t.players[0]===e?a+=-1:t.players[1]===e&&(a+=1)}),a}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=M(e,t,n).filter(function(e){return e!==N.id}).map(function(e){return U(e,t,n)});r.sort(),a||(r.pop(),r.shift());var l=0;return r.length>0&&(l=r.reduce(function(e,t){return e+t})),l}Object.freeze(x),Object.freeze(P),Object.freeze(M),Object.freeze(U),Object.freeze(H);var V=[{name:"Modified median",func:z},{name:"Solkoff",func:function(e,t){return z(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,!0)}},{name:"Cumulative score",func:Y},{name:"Cumulative of opposition",func:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=M(e,t,n).filter(function(e){return e!==N.id}).map(function(e){return Y(e,t,n)}),r=0;return 0!==a.length&&(r=a.reduce(function(e,t){return e+t})),r}},{name:"Most black",func:H}];function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.map(function(e){return V[e]}),r=function(e){var t=e.reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t.players)},[]);return Array.from(new Set(t))}(t).map(function(e){return{id:e,score:U(e,t,n),tieBreaks:a.map(function(a){return a.func(e,t,n)})}}),l=Object(T.firstBy)(function(e){return e.score},-1);a.forEach(function(e,t){l=l.thenBy(function(e){return e.tieBreaks[t]},-1)}),r.sort(l);var u=[],i=0;return r.forEach(function(e,t,n){0!==t&&(function(e,t){var n=!0;return e.score!==t.score&&(n=!1),Object.keys(e.tieBreaks).forEach(function(a){e.tieBreaks[a]!==t.tieBreaks[a]&&(n=!1)}),n}(e,n[t-1])||(i+=1));u[i]||(u[i]=[]),u[i].push(e)}),[u,a.map(function(e){return e.name})]}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t[n-1])return null;var a=0;return 0===x(e,t[n-1])&&(a=1),a}function G(e,t,n,a,r){var l=_(t,e);return{data:l,rating:l.rating,id:e,score:U(e,a,r),dueColor:W(e,a,r),colorBalance:H(e,a,r),opponentHistory:M(e,a,null),upperHalf:!1,avoidList:O(e,n),hasHadBye:P(e,a,r)}}Object.freeze(V),Object.freeze(Q),Object.freeze(G);var K=n(24),F=n.n(K),J=n(23),q=n.n(J),Z=20,$=16,X=2,ee=1;function te(e,t,n){var a,r=0,l=e.opponentHistory.includes(t.id),u=e.avoidList.includes(t.id);return l||u||(r+=Z),a=Math.abs(n.indexOf(e.score)-n.indexOf(t.score)),a=(n.length-a)/n.length,r+=$*a,e.score===t.score&&e.upperHalf!==t.upperHalf&&(r+=X),null===e.dueColor?r+=ee:e.dueColor!==t.dueColor&&(r+=ee),Math.ceil(r)}Object.freeze(te);var ne=Object.freeze(function(e,t,n,a,r){var l,u,i,c,o,s=e.map(function(e){return G(e,a,r,n,t)});if((o=Array.from(new Set(s.map(function(e){return e.score})))).sort(),s.sort(Object(T.firstBy)(function(e){return e.score},-1).thenBy(function(e){return e.rating},-1)),s.length%2!==0){var m=d()(s.filter(function(e){return!e.hasHadBye}));m||(m=d()(s)),l=[m.id,N.id],s=s.filter(function(e){return e!==m})}return o.forEach(function(e){var t=s.filter(function(t){return t.score===e});t.sort(function(e){return e.rating}).reverse(),t.length>1&&F()(t.length/2,t)[0].forEach(function(e){e.upperHalf=!0})}),u=s.reduce(function(e,t,n,a){var r=a.filter(function(e){return e!==t}).map(function(e){return[t.id,e.id,te(t,e,o)]});return e.concat(r)},[]),(c=q()(u).reduce(function(e,t,n){if(-1!==t){var a=s.filter(function(e){return e.id===t})[0],r=s.filter(function(e){return e.id===n})[0],l=u.filter(function(e){return e[0]===t&&e[1]===n})[0][2],i=e.map(function(e){return e[0]});i.includes(a)||i.includes(r)||e.push([a,r,l])}return e},[])).sort(Object(T.firstBy)(function(e){return e[0].score+e[1].score},-1).thenBy(function(e){return e[0].rating+e[1].rating},-1)),i=c.map(function(e){var t=e[0],n=e[1],a=[t.id,n.id];return t.colorBalance<n.colorBalance&&a.reverse(),a}),l&&i.push(l),i});function ae(e,t,n,a){var r=e.tourneys[t],l=r.roundList,u=f()(_)(e.players),i=r.byeQueue.filter(function(e){return!P(e,l)})[0],c=null;i>=0&&(c=S({id:i+"-"+N.id,players:[i,N.id],origRating:[u(i).rating,N.rating],newRating:[u(i).rating,N.rating]}),a=a.filter(function(e){return e!==i}));var o=ne(a,n,l,e.players,e.avoid).map(function(e){return S({id:e.join("-"),players:[e[h],e[b]],origRating:[u(e[h]).rating,u(e[b]).rating],newRating:[u(e[h]).rating,u(e[b]).rating]})});return c&&o.push(c),o.forEach(function(t){var n=t.players.indexOf(N.id);n===b&&(t.result[h]=e.options.byeValue),n===h&&(t.result[b]=e.options.byeValue)}),o}function re(e,t){var n=f()(_)(e.players),a=S({id:t.join("-"),players:[t[h],t[b]],origRating:[n(t[h]).rating,n(t[b]).rating],newRating:[n(t[h]).rating,n(t[b]).rating]});return t[h]===N.id&&(a.result=[e.options.byeValue,0]),t[b]===N.id&&(a.result=[0,e.options.byeValue]),a}function le(e,t,n,a){var r=k(e.tourneys[t].roundList[n],a);r.players.reverse(),r.origRating.reverse(),r.newRating.reverse()}Object.freeze(ae),Object.freeze(re),Object.freeze(le);var ue={options:w,players:L.playerList.map(function(e){return v(e)}),avoid:L.avoidList,tourneys:A};function ie(e,t){var n=e.avoid,a=e.players,r=e.options,l=e.tourneys,u=f()(_)(a);switch(t.type){case"SET_BYE_VALUE":return r.byeValue=t.byeValue,Object.assign({},e);case"ADD_PLAYER":return Object.assign({},e,{players:a.concat([t.newPlayer])});case"DEL_PLAYER":return Object.assign({},e,{players:a.filter(function(e){return e.id!==t.id}),avoid:n.filter(function(e){return!e.includes(t.id)})});case"SET_PLAYER_MATCHCOUNT":return Object.assign(a[a.map(function(e){return e.id}).indexOf(t.id)],{matchCount:t.matchCount}),Object.assign({},e);case"SET_PLAYER_RATING":return Object.assign(a[a.map(function(e){return e.id}).indexOf(t.id)],{rating:t.rating}),Object.assign({},e);case"ADD_AVOID_PAIR":return Object.assign({},e,{avoid:n.concat([t.pair])});case"DEL_AVOID_PAIR":return Object.assign({},e,{avoid:n.filter(function(e){return!(e.includes(t.pair[0])&&e.includes(t.pair[1]))})});case"ADD_TOURNEY":return Object.assign({},e,{tourneys:l.concat([t.tourney])});case"DEL_TOURNEY":return Object.assign({},e,{tourneys:l.filter(function(e,n){return n!==t.index})});case"ADD_ROUND":return l[t.tourneyId].roundList=l[t.tourneyId].roundList.concat([[]]),Object.assign({},e);case"DEL_LAST_ROUND":return d()(l[t.tourneyId].roundList).forEach(function(e){0!==e.result.reduce(function(e,t){return e+t})&&e.players.forEach(function(t,n){u(t).matchCount-=1,u(t).rating=e.origRating[n]})}),l[t.tourneyId].roundList=l[t.tourneyId].roundList.slice(0,l[t.tourneyId].roundList.length-1),Object.assign({},e);case"ADD_TIEBREAK":return l[t.tourneyId].tieBreaks=l[t.tourneyId].tieBreaks.concat([t.id]),Object.assign({},e);case"DEL_TIEBREAK":return l[t.tourneyId].tieBreaks=l[t.tourneyId].tieBreaks.filter(function(e){return e!==t.id}),Object.assign({},e);case"MOVE_TIEBREAK":return l[t.tourneyId].tieBreaks=E()(l[t.tourneyId].tieBreaks,t.oldIndex,t.newIndex),Object.assign({},e);case"SET_TOURNEY_PLAYERS":return l[t.tourneyId].players=t.players,Object.assign({},e);case"SET_BYE_QUEUE":return l[t.tourneyId].byeQueue=t.byeQueue,Object.assign({},e);case"AUTO_PAIR":return l[t.tourneyId].roundList[t.roundId]=l[t.tourneyId].roundList[t.roundId].concat(ae(e,t.tourneyId,t.roundId,t.unpairedPlayers)),Object.assign({},e);case"MANUAL_PAIR":return l[t.tourneyId].roundList[t.roundId]=l[t.tourneyId].roundList[t.roundId].concat([re(e,t.pair)]),Object.assign({},e);case"SET_MATCH_RESULT":return k(l[t.tourneyId].roundList[t.roundId],t.matchId).result=t.result,k(l[t.tourneyId].roundList[t.roundId],t.matchId).newRating=t.newRating,Object.assign({},e);case"DEL_MATCH":return l[t.tourneyId].roundList[t.roundId]=l[t.tourneyId].roundList[t.roundId].filter(function(e){return e.id!==t.matchId}),Object.assign({},e);case"SWAP_COLORS":return le(e,t.tourneyId,t.roundId,t.matchId),Object.assign({},e);case"MOVE_MATCH":return l[t.tourneyId].roundList[t.roundId]=E()(l[t.tourneyId].roundList[t.roundId],t.oldIndex,t.newIndex),Object.assign({},e);default:throw new Error("Unexpected action type")}}Object.freeze(ie);var ce=Object(a.createContext)(null);function oe(e){var t=e.children,n=e.action;return r.a.createElement("button",{onClick:n},t)}var se=function(e){var t=e.action;return r.a.createElement(oe,{action:t},"< Back")},de=function(e){var t=e.action;return r.a.createElement(oe,{action:t},"Open >")},me=function(e){var t=e.action;return r.a.createElement(oe,{action:t},"Info")};function fe(e){var t=e.children,n=e.style;return r.a.createElement("div",{style:Object(o.a)({},n)},t)}function pe(e){var t=e.children;return r.a.createElement("div",{style:{display:"flex"}},r.a.Children.map(t,function(e){return e}))}var Ee=Object.freeze(function(e){return{name:e.name||"",tieBreaks:e.tieBreaks||[0,1,2,3],byeQueue:e.byeQueue||[],players:e.players||[],roundList:e.roundList||[]}}),ye=n(6),ge=(n(53),n(25)),be=n(5),he=n.n(be),ve=n(26),Ne=n.n(ve);function _e(e){var t=e.roundId,n=e.tourneyId,l=Object(a.useContext)(ce),u=l.data,c=l.dispatch,o=f()(_)(u.players),s=u.tourneys[n],d=s.roundList[t],m=Object(a.useState)(null),p=Object(i.a)(m,2),E=p[0],y=p[1];function g(e,a){var r=k(s.roundList[t],e),l=o(r.players[h]),u=o(r.players[b]),i=I(r.origRating,[l.matchCount,u.matchCount],a);c({type:"SET_PLAYER_RATING",id:l.id,rating:i[h]}),c({type:"SET_PLAYER_RATING",id:u.id,rating:i[b]}),0===r.result.reduce(function(e,t){return e+t})&&(c({type:"SET_PLAYER_MATCHCOUNT",id:l.id,matchCount:l.matchCount+1}),c({type:"SET_PLAYER_MATCHCOUNT",id:u.id,matchCount:u.matchCount+1})),c({type:"SET_MATCH_RESULT",tourneyId:n,roundId:t,matchId:e,result:a,newRating:i})}function v(e,a){var r=j(u.tourneys[n].roundList[t],e);c({type:"MOVE_MATCH",tourneyId:n,roundId:t,matchId:e,oldIndex:r,newIndex:r+a})}return r.a.createElement(pe,null,r.a.createElement(fe,null,r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{className:"danger",onClick:function(){return function(e){var a=k(s.roundList[t],e);0!==a.result.reduce(function(e,t){return e+t})&&a.players.forEach(function(e,t){c({type:"SET_PLAYER_MATCHCOUNT",id:e,matchCount:o(e).matchCount-1}),c({type:"SET_PLAYER_RATING",id:e,rating:a.origRating[t]})}),c({type:"DEL_MATCH",tourneyId:n,roundId:t,matchId:e}),y(null)}(E)},disabled:null===E},"Unmatch"),r.a.createElement("button",{onClick:function(){c({type:"SWAP_COLORS",tourneyId:n,roundId:t,matchId:E})},disabled:null===E},"Swap colors"),r.a.createElement("button",{onClick:function(){return v(E,-1)},disabled:null===E},"Move up"),r.a.createElement("button",{onClick:function(){return v(E,1)},disabled:null===E},"Move down")),r.a.createElement("table",{className:Ne.a.table},r.a.createElement("caption",null,"Round ",t+1," results"),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"row__id",scope:"col"},"#"),r.a.createElement("th",{className:"row__player",scope:"col"},"White"),r.a.createElement("th",{className:"row__player",scope:"col"},"Black"),r.a.createElement("th",{className:"row__result",scope:"col"},"Result"),r.a.createElement("th",{className:"row__controls",scope:"col"},"Controls")),d.map(function(e,t){return r.a.createElement(Oe,{key:e.id,pos:t,match:e,setMatchResult:g,selectedMatch:E,setSelectedMatch:y})})))),r.a.createElement(fe,null,null!==E&&r.a.createElement(pe,null,r.a.createElement(fe,null,r.a.createElement(Re,{match:k(d,E),color:0,tourneyId:n,roundId:t})),r.a.createElement(fe,null,r.a.createElement(Re,{match:k(d,E),color:1,tourneyId:n,roundId:t}))),r.a.createElement(Ie,{tourneyId:n,roundId:t})))}function Oe(e){var t=e.pos,n=e.match,l=e.setMatchResult,u=e.selectedMatch,i=e.setSelectedMatch,c=Object(a.useContext)(ce).data,o=f()(_)(c.players),s=n.result[0]>n.result[1],d=n.result[1]>n.result[0],m=n.result.every(function(e){return.5===e}),p=o(n.players[0]).firstName+" "+o(n.players[0]).lastName,E=o(n.players[1]).firstName+" "+o(n.players[1]).lastName;return r.a.createElement("tr",null,r.a.createElement("th",{className:"table__number row__id",scope:"row"},t+1),r.a.createElement("td",{className:"table__player row__player"},p," ",s&&r.a.createElement("span",{role:"img","aria-label":"Winner"},"\ud83c\udfc6")),r.a.createElement("td",{className:"table__player row__player"},E," ",d&&r.a.createElement("span",{role:"img","aria-label":"Winner"},"\ud83c\udfc6")),r.a.createElement("td",{className:"row__result"},s&&"White won",d&&"Black won",m&&"Draw"),r.a.createElement("td",{className:"data__input row__controls"},r.a.createElement(ye.a,null,r.a.createElement(ye.b,{disabled:n.players.includes(N.id)},r.a.createElement(ge.a,null,"Set result for ",p," versus ",E),r.a.createElement("span",{"aria-hidden":!0},"Set result \u25be")),r.a.createElement(ye.d,null,r.a.createElement(ye.c,{onSelect:function(){return l(n.id,[1,0])}},p," won"),r.a.createElement(ye.c,{onSelect:function(){return l(n.id,[0,1])}},E," won"),r.a.createElement(ye.c,{onSelect:function(){return l(n.id,[.5,.5])}},"Draw")))," ",u!==n.id?r.a.createElement(me,{action:function(){return i(n.id)}}):r.a.createElement(se,{action:function(){return i(null)}})))}function Re(e){var t=e.match,n=e.color,l=e.tourneyId,u=e.roundId,i=Object(a.useContext)(ce).data,c=f()(_)(i.players),o=G(t.players[n],i.players,i.avoid,i.tourneys[l].roundList,u),s=o.colorBalance,d="Even";return s<0?d="White +"+Math.abs(s):s>0&&(d="Black +"+s),r.a.createElement("dl",{className:"player-card"},r.a.createElement("h3",null,o.data.firstName," ",o.data.lastName),r.a.createElement("dt",null,"Score"),r.a.createElement("dd",null,o.score),r.a.createElement("dt",null,"Rating"),r.a.createElement("dd",null,t.origRating[n]," (",he()(t.newRating[n]-t.origRating[n]).format("+0"),")"),r.a.createElement("dt",null,"Color balance"),r.a.createElement("dd",null,d),r.a.createElement("dt",null,"Has had a bye round"),r.a.createElement("dd",null,o.hasHadBye?"Yes":"No"),r.a.createElement("dt",null,"Opponent history"),r.a.createElement("dd",null,r.a.createElement("ol",null,o.opponentHistory.map(function(e){return r.a.createElement("li",{key:e},c(e).firstName," ",c(e).lastName)}))),r.a.createElement("dt",null,"Players to avoid"),r.a.createElement("dd",null,r.a.createElement("ol",null,o.avoidList.map(function(e){return r.a.createElement("li",{key:e},c(e).firstName," ",c(e).lastName)}))))}function Ie(e){var t=e.tourneyId,n=e.roundId,l=Object(a.useContext)(ce),u=l.data,c=l.dispatch,o=f()(_)(u.players),s=u.tourneys[t],d=s.roundList[n],m=Object(a.useState)([]),p=Object(i.a)(m,2),E=p[0],y=p[1];function g(e){var t=Number(e.target.value);e.target.checked?y(function(e){return e.includes(t)||e.push(t),e.slice(-2)}):y(E.filter(function(e){return e!==t}))}var b=d.reduce(function(e,t){return e.concat(t.players)},[]),h=s.players.filter(function(e){return!b.includes(e)});return r.a.createElement("div",null,r.a.createElement("h3",null,"Unmatched players"),r.a.createElement("ul",null,h.map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("input",{id:e,type:"checkbox",checked:E.includes(e),value:e,onChange:g})," ",r.a.createElement("label",{htmlFor:e},o(e).firstName," ",o(e).lastName))}),h.length%2!==0&&r.a.createElement("li",null,r.a.createElement("input",{type:"checkbox",checked:E.includes(N.id),value:N.id,onChange:g}),N.firstName," ",N.lastName)),r.a.createElement("button",{onClick:function(){return c({type:"MANUAL_PAIR",tourneyId:t,roundId:n,pair:E})},disabled:2!==E.length},"Pair checked")," ",r.a.createElement("button",{onClick:function(){return c({type:"AUTO_PAIR",tourneyId:t,roundId:n,unpairedPlayers:h})},disabled:0===h.length},"Auto-pair"))}function Ce(e){var t=e.tourneyId,n=Object(a.useContext)(ce),l=n.data,u=n.dispatch,c=f()(_)(l.players),o=l.tourneys[t].players,s=l.tourneys[t],d=Object(a.useState)(0===o.length),m=Object(i.a)(d,2),p=m[0],E=m[1];function y(e){var n=Number(e.target.value);e.target.checked?u({type:"SET_TOURNEY_PLAYERS",tourneyId:t,players:o.concat([n])}):u({type:"SET_TOURNEY_PLAYERS",tourneyId:t,players:o.filter(function(e){return e!==n})})}return p?r.a.createElement("table",null,r.a.createElement("caption",null,"Select players"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null))),r.a.createElement("tbody",null,l.players.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.firstName),r.a.createElement("td",null,e.lastName),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",value:e.id,checked:o.includes(e.id),onChange:y})))})),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement("button",{onClick:function(){return u({type:"SET_TOURNEY_PLAYERS",players:l.players.map(function(e){return e.id})})}},"Select all"),r.a.createElement("button",{onClick:function(){return u({type:"SET_TOURNEY_PLAYERS",players:[]})}},"Select none"),r.a.createElement("button",{onClick:function(){return E(!1)}},"Done"))))):r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null))),r.a.createElement("tbody",null,o.map(function(e){return r.a.createElement("tr",{key:e,className:c(e).type+" player"},r.a.createElement("td",null,c(e).firstName),r.a.createElement("td",null,c(e).lastName),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return u({type:"SET_BYE_QUEUE",tourneyId:t,byeQueue:s.byeQueue.concat([e])})},disabled:s.byeQueue.includes(e)},"Bye signup")))}))),r.a.createElement("button",{onClick:function(){return E(!0)}},"Edit player roster"),r.a.createElement("h3",null,"Bye queue"),r.a.createElement("ol",null,s.byeQueue.map(function(e){return r.a.createElement("li",{key:e,className:P(e,s.roundList)?"disabled":""},c(e).firstName," ",c(e).lastName,r.a.createElement("button",{onClick:function(){return u({type:"SET_BYE_QUEUE",tourneyId:t,byeQueue:s.byeQueue.filter(function(t){return e!==t})})}},"Remove"))})))}var ke=n(18),je=n.n(ke),we=n(7),Le=n.n(we);function Ae(e){var t=e.tourneyId,n=Object(a.useContext)(ce).data,l=f()(_)(n.players),u=n.tourneys[t],c=Q(u.tieBreaks,u.roundList),o=Object(i.a)(c,2),s=o[0],d=o[1];return r.a.createElement("table",{className:Le.a.table},r.a.createElement("caption",null,"Standings"),r.a.createElement("tbody",null,r.a.createElement("tr",{className:Le.a.topHeader},r.a.createElement("th",{scope:"col"},"Rank"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Score"),d.map(function(e,t){return r.a.createElement("th",{key:t,scope:"col"},e)})),s.map(function(e,t){return e.filter(function(e){return e.id!==N.id}).map(function(e,n,a){return r.a.createElement("tr",{key:e.id,className:Le.a.row},0===n&&r.a.createElement("th",{scope:"row",className:"table__number "+Le.a.rank,rowSpan:a.length},he()(t+1).format("0o")),r.a.createElement("th",{scope:"row",className:Le.a.playerName,"data-testid":t},l(e.id).firstName,"\xa0",l(e.id).lastName),r.a.createElement("td",{className:"table__number","data-testid":je()(l(e.id).firstName+l(e.id).lastName+" score")},he()(e.score).format("1/2")),e.tieBreaks.map(function(t,n){return r.a.createElement("td",{key:n,className:"table__number","data-testid":je()(l(e.id).firstName+l(e.id).lastName+d[n])},he()(t).format("1/2"))}))})})))}function Se(e){var t=e.tourneyId,n=Object(a.useContext)(ce),l=n.data,u=n.dispatch,c=l.tourneys[t],o=Object(a.useState)(null),s=Object(i.a)(o,2),d=s[0],m=s[1];function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=d),l.tourneys[t].tieBreaks.includes(e)?u({type:"DEL_TIEBREAK",id:e,tourneyId:t}):u({type:"ADD_TIEBREAK",id:e,tourneyId:t})}function p(e){var n=l.tourneys[t].tieBreaks.indexOf(d);u({type:"MOVE_TIEBREAK",tourneyId:t,oldIndex:n,newIndex:n+e})}return r.a.createElement("div",null,r.a.createElement("h3",null,"Selected tiebreak methods"),r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{onClick:function(){return f()},disabled:null===d},"Toggle"),r.a.createElement("button",{onClick:function(){return p(-1)},disabled:null===d},"Move up"),r.a.createElement("button",{onClick:function(){return p(1)},disabled:null===d},"Move down"),r.a.createElement("button",{onClick:function(){return m(null)},disabled:null===d},"Done")),r.a.createElement("ol",null,c.tieBreaks.map(function(e){return r.a.createElement("li",{key:e},V[e].name,r.a.createElement("button",{onClick:function(){return m(d===e?null:e)},disabled:null!==d&&d!==e},d===e?"Done":"Edit"))})),r.a.createElement("h3",null,"Available tiebreak methods"),r.a.createElement("ol",null,V.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:c.tieBreaks.includes(t)?"enabled":"disabled"},e.name),!c.tieBreaks.includes(t)&&r.a.createElement("button",{onClick:function(){return f(t)}},"Add"))})))}he.a.register("format","half",{regexps:{format:/(1\/2)/,unformat:/(1\/2)/},format:function(e,t,n){var a=Math.floor(e),r=e-a;return.5===r?r="\xbd":0===r&&(r=""),0===a&&r&&(a=""),String(a)+r}});var Te=function(e){var t=e.tourneyId;return r.a.createElement(pe,null,r.a.createElement(fe,null,r.a.createElement(Ae,{tourneyId:t})),r.a.createElement(fe,null,r.a.createElement(Se,{tourneyId:t})))};function Be(e){var t=e.tourneyId,n=e.backButton,l=Object(a.useContext)(ce),u=l.data,o=l.dispatch,s=u.tourneys[t],d=s.players,m=Object(a.useState)(0),f=Object(i.a)(m,2),p=f[0],E=f[1];return r.a.createElement(c.e,{defaultIndex:p},r.a.createElement("div",null,n,r.a.createElement("h2",null,s.name),"Round progress: ",s.roundList.length,"/",C(d.length)," ",r.a.createElement("button",{onClick:function(){return o({type:"ADD_ROUND",tourneyId:t}),void E(s.roundList.length+1)}},"New round")," ",r.a.createElement("button",{className:"danger",onClick:function(){return o({type:"DEL_LAST_ROUND",tourneyId:t})},disabled:0===s.roundList.length},"Remove last round")),r.a.createElement(c.b,null,r.a.createElement(c.a,null,"Players"),r.a.createElement(c.a,null,"Scores"),Object.keys(s.roundList).map(function(e){return r.a.createElement(c.a,{key:e},"Round ",Number(e)+1)})),r.a.createElement(c.d,null,r.a.createElement(c.c,null,r.a.createElement(Ce,{tourneyId:t})),r.a.createElement(c.c,null,r.a.createElement(Te,{tourneyId:t})),Object.keys(s.roundList).map(function(e){return r.a.createElement(c.c,{key:e},r.a.createElement(_e,{roundId:Number(e),tourneyId:t}))})))}function xe(){var e=Object(a.useContext)(ce),t=e.data,n=e.dispatch,l=t.tourneys,u=Object(a.useState)(null),c=Object(i.a)(u,2),o=c[0],s=c[1],d=Object(a.useState)(""),m=Object(i.a)(d,2),f=m[0],p=m[1];var E=r.a.createElement(a.Fragment,null);return E=null!==o?r.a.createElement(Be,{tourneyId:o,backButton:r.a.createElement(se,{action:function(){return s(null)}})}):r.a.createElement("div",null,l.length>0?r.a.createElement("ol",null,l.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("button",{className:"tourney-select",onClick:function(){return s(t)}},e.name),r.a.createElement("button",{className:"danger",onClick:function(){return n({type:"DEL_TOURNEY",index:t})}},"delete"))})):r.a.createElement("p",null,"No tournaments added yet."),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n({type:"ADD_TOURNEY",tourney:Ee({name:f})}),p("")}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Make a new tournament"),r.a.createElement("input",{type:"text",placeholder:"tournament name",value:f,onChange:function(e){p(e.target.value)},required:!0}),r.a.createElement("input",{type:"submit",value:"Create"})))),r.a.createElement("div",null,E)}function De(e){var t=e.setOpenPlayer,n=Object(a.useContext)(ce),l=n.data,u=n.dispatch,c=l.players,o={firstName:"",lastName:"",rating:1200},s=Object(a.useState)(o),d=Object(i.a)(s,2),m=d[0],f=d[1],p=c.map(function(e){return e.id});p.sort(function(e,t){return e-t}),p.reverse();var E=Object(a.useState)(p[0]+1),y=Object(i.a)(E,2),g=y[0],b=y[1],h=function(e){e.preventDefault();var t={};t[e.currentTarget.name]=e.currentTarget.value,f(Object.assign({},m,t))},N=r.a.createElement(a.Fragment,null);return c.length>0&&(N=r.a.createElement("table",null,r.a.createElement("caption",null,"Demo Roster"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Rating"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,c.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"table__player"},e.firstName),r.a.createElement("td",{className:"table__player"},e.lastName),r.a.createElement("td",{className:"table__number"},e.rating),r.a.createElement("td",null,r.a.createElement("button",{className:"danger",onClick:function(t){return function(e,t){e.preventDefault(),u({type:"DEL_PLAYER",player:t})}(t,e)}},"delete")),r.a.createElement("td",null,r.a.createElement(de,{action:function(){return t(e.id)}})))})))),r.a.createElement("div",{className:"roster"},N,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=v(m);t.id=g,b(function(e){return e+1}),f(o),u({type:"ADD_PLAYER",newPlayer:t})}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add your own players"),r.a.createElement("p",null,r.a.createElement("label",null,"First name"," ",r.a.createElement("input",{type:"text",name:"firstName",onChange:h,value:m.firstName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Last name"," ",r.a.createElement("input",{type:"text",name:"lastName",onChange:h,value:m.lastName,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Rating"," ",r.a.createElement("input",{type:"number",name:"rating",onChange:h,value:m.rating,required:!0}))),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Add"})))))}function Pe(e){var t=e.playerId,n=e.setOpenPlayer,l=Object(a.useContext)(ce),u=l.data,c=l.dispatch,o=f()(_)(u.players),s=u.avoid,d=Object(a.useState)(O(t,s)),m=Object(i.a)(d,2),p=m[0],E=m[1],y=function(){return u.players.map(function(e){return e.id}).filter(function(e){return!p.includes(e)&&e!==t})},g=Object(a.useState)(y()[0]),b=Object(i.a)(g,2),h=b[0],v=b[1];return Object(a.useEffect)(function(){E(O(t,s))},[s,t]),r.a.createElement("div",null,r.a.createElement(se,{action:function(){return n(null)}}),r.a.createElement("h2",null,o(t).firstName," ",o(t).lastName),r.a.createElement("dl",null,r.a.createElement("dt",{id:"match-count"},"Matches played"),r.a.createElement("dd",{"aria-labelledby":"match-count"},o(t).matchCount),r.a.createElement("dt",{id:"rating"},"Rating"),r.a.createElement("dd",{"aria-labelledby":"rating"},o(t).rating),r.a.createElement("dt",null,"K factor"),r.a.createElement("dd",null,he()(R(o(t).matchCount)).format("00")),r.a.createElement("dt",null,"Players to avoid"),r.a.createElement("dd",null,r.a.createElement("ul",null,p.map(function(e){return r.a.createElement("li",{key:e},o(e).firstName," ",o(e).lastName,r.a.createElement("button",{className:"danger",onClick:function(){return c({type:"DEL_AVOID_PAIR",pair:[t,e]})}},"remove"))}),0===s.length&&r.a.createElement("li",null,"None")))),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),v(y()[0]),c({type:"ADD_AVOID_PAIR",pair:[t,Number(h)]})}(e)}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add player to avoid"),r.a.createElement("select",{onBlur:function(e){return v(e.target.value)}},y().map(function(e){return r.a.createElement("option",{key:e,value:e},o(e).firstName," ",o(e).lastName)})),r.a.createElement("input",{type:"submit",value:"Add"}))))}function Me(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],l=t[1];return null!==n?r.a.createElement(Pe,{key:n,playerId:n,setOpenPlayer:l}):r.a.createElement(De,{setOpenPlayer:l})}function Ue(){var e=Object(a.useContext)(ce),t=e.data,n=e.dispatch,l=t.options;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Bye options"),"Select how many points a bye is worth:"," ",r.a.createElement("label",null,"1",r.a.createElement("input",{type:"radio",checked:1===l.byeValue,onChange:function(){return n({type:"SET_BYE_VALUE",byeValue:1})}})),r.a.createElement("label",null,"0.5",r.a.createElement("input",{type:"radio",checked:.5===l.byeValue,onChange:function(){return n({type:"SET_BYE_VALUE",byeValue:.5})}})))),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Export data"),r.a.createElement("textarea",{className:"json",rows:25,cols:50,value:JSON.stringify(t,null,2),name:"playerdata",readOnly:!0}),r.a.createElement("input",{type:"submit",value:"Load",disabled:!0}))))}var Ye=n(14),He=n.n(Ye);function ze(){return r.a.createElement("div",{className:He.a.caution},r.a.createElement("p",{className:He.a.caution__text},r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f"),"\xa0 This is an unstable demo build. \xa0",r.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f")," ","Want to help make it better? Head to the"," ",r.a.createElement("span",{role:"img","aria-label":"finger pointing right"},"\ud83d\udc49"),"\xa0",r.a.createElement("a",{className:He.a.caution__link,href:"https://github.com/johnridesabike/chessahoochee"},"Git repository"),"."))}var Ve=function(){var e=Object(a.useReducer)(ie,ue),t=Object(i.a)(e,2),n=t[0],l=t[1];return r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce.Provider,{value:{data:n,dispatch:l}},r.a.createElement(c.e,{className:"app",defaultIndex:1},r.a.createElement(ze,null),r.a.createElement(c.b,{className:"header"},r.a.createElement(c.a,null,"Players"),r.a.createElement(c.a,null,"Tournaments"),r.a.createElement(c.a,null,"Options"),r.a.createElement(c.a,null,"About")),r.a.createElement(c.d,{className:"content"},r.a.createElement(c.c,null,r.a.createElement(Me,null)),r.a.createElement(c.c,null,r.a.createElement(xe,null)),r.a.createElement(c.c,null,r.a.createElement(Ue,null)),r.a.createElement(c.c,null,r.a.createElement("p",null,"This is an early, proof-of-concept, demo of a chess tournament manager. ",r.a.createElement("a",{href:"https://github.com/johnridesabike/chessahoochee"},"You can find out more here.")))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(Ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,t,n){e.exports={table:"scores_table__3lvMB",topHeader:"scores_topHeader__2tB60",row:"scores_row__2tesj",playerName:"scores_playerName__2J8Ps",rank:"scores_rank__1h3on"}}},[[29,1,2]]]);
//# sourceMappingURL=main.c4449168.chunk.js.map