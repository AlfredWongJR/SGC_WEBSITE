// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE

import * as EloRank from "elo-rank";
import * as Caml_int32 from "bs-platform/lib/es6/caml_int32.js";

function getKFactor(matchCount) {
  var match = matchCount > 0;
  var ne = match ? matchCount : 1;
  return Caml_int32.div(800, ne);
}

function keepAboveFloor(rating) {
  var match = rating > 100;
  if (match) {
    return rating;
  } else {
    return 100;
  }
}

function calcNewRatings(origRatings, matchCounts, result) {
  var whiteElo = new EloRank.default(getKFactor(matchCounts[/* white */0]));
  var blackElo = new EloRank.default(getKFactor(matchCounts[/* black */1]));
  var scoreExpected_000 = /* white */whiteElo.getExpected(origRatings[/* white */0], origRatings[/* black */1]);
  var scoreExpected_001 = /* black */blackElo.getExpected(origRatings[/* black */1], origRatings[/* white */0]);
  return /* record */[
          /* white */keepAboveFloor(whiteElo.updateRating(scoreExpected_000, result[/* white */0], origRatings[/* white */0])),
          /* black */keepAboveFloor(blackElo.updateRating(scoreExpected_001, result[/* black */1], origRatings[/* black */1]))
        ];
}

var floor = 100;

export {
  getKFactor ,
  floor ,
  keepAboveFloor ,
  calcNewRatings ,
  
}
/* elo-rank Not a pure module */
